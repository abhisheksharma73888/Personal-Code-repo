(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{1035:function(e,t,n){"use strict";var a=n(2),s=n.n(a),r=n(4),o=n(6),i=n(663),l=n(180);var c=n(127);var m=()=>{const e=Object(r.d)(),t=Object(r.e)(c.c);return Object(a.useEffect)(()=>{e(async e=>{try{const t=`${Object(i.a)()}/health`,n=await fetch(t),a=await n.json();return e(Object(l.j)({version:a.version,commit:a.commit})),a}catch(t){console.error(t),e(Object(l.j)({version:"n/a",commit:"n/a"}))}})},[e]),s.a.createElement(s.a.Fragment,null,"InfluxDB ",t.version,s.a.createElement("br",null),"Server:"," ",s.a.createElement("code",null,s.a.createElement("a",{href:`https://github.com/influxdata/influxdb/tree/${t.commit}`},t.commit&&t.commit.slice(0,7))),s.a.createElement("br",null),"Frontend:"," ",s.a.createElement("code",null,s.a.createElement("a",{href:`https://github.com/influxdata/ui/tree/${o.s.slice(0,7)}`},o.s.slice(0,7))))};class u extends a.PureComponent{render(){return s.a.createElement("div",{className:"version-info",style:this.style,"data-testid":"version-info"},s.a.createElement("p",null,o.f?s.a.createElement(s.a.Fragment,null,"Version ",o.G," ",o.s&&s.a.createElement("code",null,"(",o.s.slice(0,7),")")):s.a.createElement(m,null)))}get style(){if(this.props.widthPixels)return{width:`${this.props.widthPixels}px`}}}t.a=u},127:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));const a=e=>e.app.persisted.timeZone||"Local",s=e=>e.app.persisted.theme||"dark",r=e=>e.app.persisted.navBarState||"collapsed",o=e=>e.app.persisted.versionInfo||{},i=e=>e.app.ephemeral.hasUpdatedTimeRangeInVEO||!1,l=e=>e.app.ephemeral.inPresentationMode||!1,c=e=>e.app.persisted.flowsCTA||{explorer:!0,tasks:!0,alerts:!0}},2605:function(e,t,n){"use strict";n.r(t);var a=n(10),s=n(2),r=n.n(s),o=n(155),i=n(4),l=n(39),c=n(11),m=n(14),u=n(7),d=n(3),p=n(16),h=n(12);let g=class extends s.PureComponent{constructor(){super(...arguments),this.state={username:"",password:""},this.handleUsername=e=>{const t=e.target.value;this.setState({username:t})},this.handlePassword=e=>{const t=e.target.value;this.setState({password:t})},this.handleSignIn=async()=>{const{notify:e}=this.props,{username:t,password:n}=this.state;try{const e=await Object(p.postSignin)({auth:{username:t,password:n}});if(204!==e.status)throw new Error(e.data.message);this.handleRedirect()}catch(t){const n=Object(u.get)(t,"response.data.msg","");if(401===Object(u.get)(t,"response.status",""))return void e(Object.assign(Object.assign({},h.g),{message:"Login failed: username or password is invalid"}));if(!n)return void e(h.g);e(Object.assign(Object.assign({},h.g),{message:n}))}}}render(){const{username:e,password:t}=this.state;return r.a.createElement(d.Form,{onSubmit:this.handleSignIn},r.a.createElement(d.Grid,null,r.a.createElement(d.Grid.Row,null,r.a.createElement(d.Grid.Column,{widthXS:d.Columns.Twelve},r.a.createElement(d.Form.Element,{label:"Username"},r.a.createElement(d.Input,{name:"username",value:e,onChange:this.handleUsername,size:d.ComponentSize.Medium,autoFocus:!0,testID:"username",id:"login"}))),r.a.createElement(d.Grid.Column,{widthXS:d.Columns.Twelve},r.a.createElement(d.Form.Element,{label:"Password"},r.a.createElement(d.Input,{name:"password",value:t,onChange:this.handlePassword,size:d.ComponentSize.Medium,type:d.InputType.Password,testID:"password",id:"password"}))),r.a.createElement(d.Grid.Column,{widthXS:d.Columns.Twelve},r.a.createElement(d.Form.Footer,null,r.a.createElement(d.Button,{color:d.ComponentColor.Primary,text:"Sign In",size:d.ComponentSize.Medium,type:d.ButtonType.Submit,id:"submit-login"}))))))}handleRedirect(){const{history:e,location:t}=this.props,n=new URLSearchParams(t.search).get("returnTo");n?e.replace(n):e.push("/")}};g=Object(a.a)([m.a],g);const E={notify:c.c};var w=Object(i.c)(null,E)(Object(o.j)(g)),f=n(5),b=n(1035),j=n(762),v=n(6);let O=class extends s.PureComponent{constructor(e){super(e),this.state={status:f.RemoteDataState.Loading}}async componentDidMount(){const{allowed:e}=await l.a.setup.status();if(e)this.props.history.push("/onboarding/0");else if(v.f)return void(window.location.pathname=v.j);this.setState({status:f.RemoteDataState.Done})}componentWillUnmount(){this.props.dismissAllNotifications()}render(){return r.a.createElement(d.SpinnerContainer,{loading:this.state.status,spinnerComponent:r.a.createElement(d.TechnoSpinner,null)},r.a.createElement(j.a,null),r.a.createElement(d.AppWrapper,null,r.a.createElement(d.FunnelPage,{className:"signin-page",testID:"signin-page"},r.a.createElement(d.Panel,{className:"signin-page--panel"},r.a.createElement(d.Panel.Body,{alignItems:d.AlignItems.Center},r.a.createElement("div",{className:"signin-page--cubo"}),r.a.createElement(d.InfluxDBCloudLogo,{cloud:!1,className:"signin-page--logo"}),r.a.createElement(w,null)),r.a.createElement(d.Panel.Footer,null,r.a.createElement(b.a,null))))))}};O=Object(a.a)([m.a,Object(a.b)("design:paramtypes",[Object])],O);const S={dismissAllNotifications:c.a},C=Object(i.c)(null,S);t.default=C(Object(o.j)(O))}}]);
//# sourceMappingURL=76.4f05d3498e.js.map