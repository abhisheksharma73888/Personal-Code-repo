(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{101:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));const a=(e,t,n,a="text/plain")=>{const r=((e,t)=>`${e.trim().toLowerCase().replace(/\s/g,"_")}${t}`)(t,n),o=new Blob([e],{type:a}),s=document.createElement("a");s.href=window.URL.createObjectURL(o),s.target="_blank",s.download=r,document.body.appendChild(s),s.click(),s.parentNode.removeChild(s)},r=(e,t)=>{const n=document.createElement("a");"string"==typeof n.download?(n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)):window.open(e)}},1031:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(155),s=n(3),c=n(82);class i extends a.PureComponent{render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.e,{align:c.a.Center},r.a.createElement(s.FlexBox,{alignItems:s.AlignItems.Center,direction:s.FlexDirection.Row,margin:c.c.Small},this.deleteButton)))}get deleteButton(){const{bucket:e,onDeleteBucket:t}=this.props;return"user"===e.type?r.a.createElement(c.e.Menu,{icon:s.IconFont.Trash,color:s.ComponentColor.Danger,shape:s.ButtonShape.Default,text:"Delete Bucket",testID:`context-delete-menu ${e.name}`},r.a.createElement(c.e.Item,{label:"Confirm",action:t,value:e,testID:`context-delete-bucket ${e.name}`})):null}}var l=n(95),u=n.n(l),d=n(7),m=n(4),p=n(6),h=n(12);const b={notify:n(11).c};var y=Object(m.c)(null,b)(({bucket:e,notify:t})=>{const n=r.a.createElement("span",{"data-testid":"bucket-retention",key:"bucket-retention"},"Retention: ",Object(d.capitalize)(e.readableRetention)),a=(null==e?void 0:e.schemaType)||"implicit",o=`Schema Type: ${Object(d.capitalize)(a)}`,c=r.a.createElement("span",{"data-testid":"bucket-schemaType",key:"bucket-schemaType"},o),i=p.f?[n,c]:[n];return"system"===e.type?r.a.createElement(s.ResourceCard.Meta,{testID:`resourceCard-buckets-${e.id}`},r.a.createElement("span",{className:"system-bucket",key:`system-bucket-indicator-${e.id}`},"System Bucket"),i):r.a.createElement(s.ResourceCard.Meta,{testID:`resourceCard-buckets-${e.id}`},i,r.a.createElement(u.a,{text:e.id,onCopy:(e,n)=>{const a=`${e.slice(0,30).trimRight()}...`;t(n?Object(h.X)(a,"Bucket ID"):Object(h.W)(a,"Bucket ID"))}},r.a.createElement("span",{className:"copy-bucket-id",title:"Click to Copy to Clipboard"},"ID: ",e.id,r.a.createElement("span",{className:"copy-bucket-id--helper"},"Copy to Clipboard"))))}),g=n(152);class f extends a.PureComponent{constructor(){super(...arguments),this.triggerRef=Object(a.createRef)()}render(){const{onAddCollector:e,onAddCsv:t,onAddLineProtocol:n,onAddClientLibrary:a,onAddScraper:o}=this.props;return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.Popover,{color:s.ComponentColor.Secondary,appearance:s.Appearance.Outline,position:s.PopoverPosition.ToTheRight,triggerRef:this.triggerRef,distanceFromTrigger:8,contents:s=>r.a.createElement("div",{className:"bucket-add-data",onClick:s},r.a.createElement("div",{className:"bucket-add-data--option",onClick:e},r.a.createElement("div",{className:"bucket-add-data--option-header"},"Configure Telegraf Agent"),r.a.createElement("div",{className:"bucket-add-data--option-desc"},"Configure a Telegraf agent to push data into your bucket.")),r.a.createElement("div",{className:"bucket-add-data--option",onClick:n},r.a.createElement("div",{className:"bucket-add-data--option-header","data-testid":"bucket-add-line-protocol"},"Line Protocol"),r.a.createElement("div",{className:"bucket-add-data--option-desc"},"Quickly load an existing line protocol file.")),r.a.createElement("div",{className:"bucket-add-data--option",onClick:t},r.a.createElement("div",{className:"bucket-add-data--option-header","data-testid":"bucket-add-csv"},"CSV Upload"),r.a.createElement("div",{className:"bucket-add-data--option-desc"},"Quickly load an existing csv file.")),r.a.createElement("div",{className:"bucket-add-data--option",onClick:a},r.a.createElement("div",{className:"bucket-add-data--option-header","data-testid":"bucket-add-client-library"},"Client Library"),r.a.createElement("div",{className:"bucket-add-data--option-desc"},"Write data easily from your own application.")),r.a.createElement(g.a,null,r.a.createElement("div",{className:"bucket-add-data--option",onClick:o},r.a.createElement("div",{className:"bucket-add-data--option-header"},"Scrape Metrics"),r.a.createElement("div",{className:"bucket-add-data--option-desc"},"Add a scrape target to pull data into your bucket."))))}),r.a.createElement(s.Button,{ref:this.triggerRef,text:"Add Data",testID:"add-data--button",icon:s.IconFont.Plus,size:s.ComponentSize.ExtraSmall,color:s.ComponentColor.Secondary}))}}var E=n(361),S=n(23),k=n(110),D=n(304),C=n(174),T=n(8),v=n(284);const O={onAddBucketLabel:k.a,onDeleteBucketLabel:k.f,onSetDataLoadersBucket:D.d,onSetDataLoadersType:C.l};var x=Object(m.c)(null,O)(Object(o.j)(({bucket:e,bucketType:t,orgID:n,onFilterChange:a,onGetSchema:o,onAddBucketLabel:c,onDeleteBucketLabel:i,history:l,onSetDataLoadersBucket:u,onSetDataLoadersType:d})=>{if("system"===t)return null;const m=()=>{Object(T.a)("bucket.view.schema.explicit"),o(e)};return r.a.createElement(s.FlexBox,{direction:s.FlexDirection.Row,margin:s.ComponentSize.Small,style:{marginTop:"4px"}},r.a.createElement(E.a,{selectedLabelIDs:e.labels,onFilterChange:a,onAddLabel:t=>{c(e.id,t)},onRemoveLabel:t=>{i(e.id,t)}}),r.a.createElement(f,{onAddCollector:()=>{u(n,e.name,e.id),d(v.e.Streaming),l.push(`/orgs/${n}/load-data/buckets/${e.id}/telegrafs/new`)},onAddLineProtocol:()=>{u(n,e.name,e.id),l.push(`/orgs/${n}/load-data/file-upload/lp`)},onAddCsv:()=>{u(n,e.name,e.id),l.push(`/orgs/${n}/load-data/file-upload/annotated_csv`)},onAddClientLibrary:()=>{u(n,e.name,e.id),d(v.e.ClientLibrary),l.push(`/orgs/${n}/load-data/`)},onAddScraper:()=>{u(n,e.name,e.id),d(v.e.Scraping),l.push(`/orgs/${n}/load-data/buckets/${e.id}/scrapers/new`)}}),r.a.createElement(s.Button,{text:"Settings",testID:"bucket-settings",size:s.ComponentSize.ExtraSmall,onClick:()=>{Object(T.a)("bucket.view.settings"),l.push(`/orgs/${n}/load-data/buckets/${e.id}/edit`)}}),(()=>{if(Object(S.c)("measurementSchema")&&p.f&&"explicit"===(null==e?void 0:e.schemaType))return r.a.createElement(s.Button,{text:"Show Schema",testID:"bucket-showSchema",size:s.ComponentSize.ExtraSmall,onClick:m})})())})),I=n(105);t.a=Object(o.j)(({bucket:e,onDeleteBucket:t,onFilterChange:n,onGetBucketSchema:a,history:o,match:{params:{orgID:c}}})=>r.a.createElement(s.ResourceCard,{testID:`bucket-card ${e.name}`,contextMenu:!Object(I.e)(e.name)&&r.a.createElement(i,{bucket:e,onDeleteBucket:t})},r.a.createElement(s.ResourceCard.Name,{testID:`bucket--card--name ${e.name}`,onClick:()=>{Object(S.c)("exploreWithFlows")?o.push(`/notebook/from/bucket/${e.name}`):o.push(`/orgs/${c}/data-explorer?bucket=${e.name}`)},name:e.name}),r.a.createElement(y,{bucket:e}),r.a.createElement(x,{bucket:e,orgID:c,bucketType:e.type,onFilterChange:n,onGetSchema:a})))},1040:function(e,t,n){"use strict";var a=n(10),r=n(2),o=n.n(r),s=n(155),c=n(546),i=n(4),l=n(82),u=n(3),d=n(110),m=n(5),p=n(13);class h extends r.PureComponent{constructor(){super(...arguments),this.state={bucket:this.props.startBucket},this.saveButtonStatus=e=>this.state.bucket.name===this.props.startBucket.name||e===l.d.Error?l.d.Disabled:e,this.handleValidation=e=>e?this.props.buckets.find(t=>t.name===e)?"This bucket name is taken":void 0:"Name is required",this.handleSubmit=()=>{const{startBucket:e,onRenameBucket:t}=this.props,{bucket:n}=this.state;t(e.name,n),this.handleClose()},this.handleChangeInput=e=>{const t=e.target.value,n=Object.assign(Object.assign({},this.state.bucket),{name:t});this.setState({bucket:n})},this.handleClose=()=>{const{history:e,match:t}=this.props;e.push(`/orgs/${t.params.orgID}/load-data/buckets`)}}render(){const{bucket:e}=this.state;return o.a.createElement(u.Form,{onSubmit:this.handleSubmit},o.a.createElement(u.Form.ValidationElement,{label:"Name",validationFunc:this.handleValidation,value:e.name},t=>o.a.createElement(o.a.Fragment,null,o.a.createElement(u.FlexBox,{alignItems:u.AlignItems.Center,direction:u.FlexDirection.Column,margin:u.ComponentSize.Large},o.a.createElement(u.Input,{placeholder:"Give your bucket a name",name:"name",autoFocus:!0,value:e.name,onChange:this.handleChangeInput,status:t}),o.a.createElement(u.FlexBox,{alignItems:u.AlignItems.Center,direction:u.FlexDirection.Row,margin:u.ComponentSize.Small},o.a.createElement(u.Button,{text:"Cancel",onClick:this.handleClose,type:u.ButtonType.Button}),o.a.createElement(u.Button,{text:"Change Bucket Name",color:u.ComponentColor.Danger,status:this.saveButtonStatus(t),type:u.ButtonType.Submit}))))))}}const b={onRenameBucket:d.i},y=Object(i.c)((e,t)=>{const{bucketID:n}=t.match.params;return{startBucket:Object(p.f)(e,m.ResourceType.Buckets,n),buckets:Object(p.a)(e,m.ResourceType.Buckets).filter(e=>e.id!==n)}},b);var g=Object(s.j)(y(h)),f=n(14);let E=class extends r.PureComponent{constructor(){super(...arguments),this.handleClose=()=>{const{history:e,match:t}=this.props;e.push(`/orgs/${t.params.orgID}/load-data/buckets`)}}render(){return o.a.createElement(u.Overlay,{visible:!0},o.a.createElement(c.a,{title:"Rename Bucket",message:this.message,effectedItems:this.effectedItems,onClose:this.handleClose,confirmButtonText:"I understand, let's rename my Bucket"},o.a.createElement(g,null)))}get message(){return"Updating the name of a Bucket can have unintended consequences. Anything that references this Bucket by name will stop working including:"}get effectedItems(){return["Queries","Dashboards","Tasks","Telegraf Configurations","Templates"]}};E=Object(a.a)([f.a],E);t.a=Object(s.j)(E)},105:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c}));const a=e=>e.startsWith("_"),r=475,o=1,s="create-a-bucket",c={id:s,name:"+ Create A Bucket"}},150:function(e,t,n){"use strict";var a=n(10),r=n(2),o=n.n(r),s=n(7),c=n(3),i=n(14),l=n(54);let u=class extends r.Component{constructor(e){super(e),this.handleSearch=()=>{this.props.onSearch(this.state.searchTerm)},this.handleBlur=e=>{this.setState({searchTerm:e.target.value},this.handleSearch)},this.handleChange=e=>{this.setState({searchTerm:e.target.value},this.handleSearch)},this.state={searchTerm:this.props.searchTerm}}componentDidUpdate(e){this.props.searchTerm!==e.searchTerm&&this.setState({searchTerm:this.props.searchTerm})}UNSAFE_componentWillMount(){this.handleSearch=Object(s.debounce)(this.handleSearch,50)}render(){const{placeholderText:e,testID:t}=this.props,{searchTerm:n}=this.state;return o.a.createElement(l.a,null,o.a.createElement(c.Input,{icon:c.IconFont.Search,placeholder:e,value:n,onChange:this.handleChange,onBlur:this.handleBlur,testID:t,className:"search-widget-input"}))}};u.defaultProps={widthPixels:440,placeholderText:"Search...",searchTerm:"",testID:"search-widget"},u=Object(a.a)([i.a,Object(a.b)("design:paramtypes",[Object])],u),t.a=u},152:function(e,t,n){"use strict";var a=n(2),r=n(6);t.a=class extends a.PureComponent{render(){const{children:e}=this.props;return r.f?null:e}}},174:function(e,t,n){"use strict";n.d(t,"l",(function(){return C})),n.d(t,"e",(function(){return T})),n.d(t,"p",(function(){return v})),n.d(t,"n",(function(){return O})),n.d(t,"q",(function(){return x})),n.d(t,"a",(function(){return I})),n.d(t,"h",(function(){return w})),n.d(t,"k",(function(){return j})),n.d(t,"o",(function(){return B})),n.d(t,"d",(function(){return A})),n.d(t,"b",(function(){return R})),n.d(t,"c",(function(){return F})),n.d(t,"i",(function(){return _})),n.d(t,"f",(function(){return L})),n.d(t,"g",(function(){return P})),n.d(t,"j",(function(){return M})),n.d(t,"m",(function(){return U}));var a=n(7),r=n(25),o=n(39),s=n(285),c=n(334),i=n(46),l=n(294),u=n(665),d=n(329),m=n(221),p=n(13),h=n(9),b=n(8),y=n(526),g=n(284),f=n(5),E=n(314),S=n(333),k=n(11),D=n(12);const C=e=>({type:"SET_DATA_LOADERS_TYPE",payload:{type:e}}),T=()=>({type:"CLEAR_DATA_LOADERS"}),v=e=>({type:"SET_TELEGRAF_CONFIG_NAME",payload:{name:e}}),O=e=>({type:"SET_TELEGRAF_CONFIG_DESCRIPTION",payload:{description:e}}),x=(e,t,n)=>({type:"UPDATE_TELEGRAF_PLUGIN_CONFIG",payload:{name:e,field:t,value:n}}),I=(e,t,n)=>({type:"ADD_TELEGRAF_PLUGIN_CONFIG_VALUE",payload:{pluginName:e,fieldName:t,value:n}}),w=(e,t,n)=>({type:"REMOVE_TELEGRAF_PLUGIN_CONFIG_VALUE",payload:{pluginName:e,fieldName:t,value:n}}),j=(e,t,n,a)=>({type:"SET_TELEGRAF_PLUGIN_CONFIG_VALUE",payload:{pluginName:e,field:t,valueIndex:n,value:a}}),B=e=>({type:"SET_TELEGRAF_CONFIG_ID",payload:{id:e}}),A=e=>({type:"ADD_TELEGRAF_PLUGINS",payload:{telegrafPlugins:e}}),N=e=>({type:"SET_TOKEN",payload:{token:e}}),R=e=>t=>{t((e=>({type:"ADD_PLUGIN_BUNDLE",payload:{bundle:e}}))(e));const n=y.d[e];t(A(n.map(e=>({name:e,active:!1,configured:y.e[e].fields?g.d.Unconfigured:g.d.Configured,templateID:y.e[e].templateID}))))},F=e=>t=>{t((e=>({type:"ADD_TELEGRAF_telegrafUiRefresh",payload:{plugin:e}}))(e)),t({type:"ADD_TELEGRAF_PLUGINS_telegrafUiRefresh",payload:{telegrafPlugins:e}})},_=e=>t=>{t((e=>({type:"REMOVE_PLUGIN_BUNDLE",payload:{bundle:e}}))(e)),t((e=>({type:"REMOVE_BUNDLE_PLUGINS",payload:{bundle:e}}))(e))},L=()=>async(e,t)=>{const{telegrafPlugins:n,telegrafConfigID:a,telegrafConfigName:c,telegrafConfigDescription:i}=Object(d.a)(t()),{name:m}=Object(h.a)(t()),{bucket:p}=Object(d.b)(t()),y={name:s.y.NameEnum.InfluxdbV2,type:s.y.TypeEnum.Output,config:{urls:[`${window.location.origin}`],token:"$INFLUX_TOKEN",organization:m,bucket:p}},f=n.reduce((e,t)=>t.configured===g.d.Configured?[...e,t.plugin||Object(u.a)(t)]:e,[y]);if(a){const t=await o.a.telegrafConfigs.update(a,{name:c,description:i,plugins:f}),n=Object(r.a)(t,l.b);return e(Object(E.g)(n)),e(B(a)),void Object(b.a)(`telegraf.config.${Object(b.c)(c)}.edit.success`,{id:null==t?void 0:t.id})}$(e,t,f)},P=e=>async(t,n)=>{let r="",o="";try{const i=n(),l=Object(h.a)(i).id,u=Object(p.f)(i,f.ResourceType.Telegrafs,e);if(r=u.name,o=Object(a.get)(u,"metadata.buckets[0]",""),""===o)throw new Error("An API token cannot be generated without a corresponding bucket; no buckets are assigned");const d=Object(m.a)(i,o);if(!d||!d.id)throw new Error(`there is no bucket present with name ${o}`);const y=[{action:s.b.ActionEnum.Write,resource:{type:s.c.TypeEnum.Buckets,id:d.id,orgID:l}},{action:s.b.ActionEnum.Read,resource:{type:s.c.TypeEnum.Telegrafs,id:e,orgID:l}}],g={name:`${u.name} token`,orgID:l,description:`WRITE ${o} bucket / READ ${u.name} telegraf config`,permissions:y},E=await Object(c.a)(g);Object(b.a)("token.create.success",{name:r,bucket:o}),t(N(E.token))}catch(e){if(console.error(e),Object(b.a)("token.create.failure",{name:r,bucket:o}),e.message){const n=Object.assign(Object.assign({},D.l),{message:`${D.l.message}: ${e.message}`});t(Object(k.c)(n))}else t(Object(k.c)(D.l))}},$=async(e,t,n)=>{let a="",u="";try{const m=t(),{telegrafConfigName:p,telegrafConfigDescription:y}=Object(d.a)(m);a=p;const{bucket:g,bucketID:f}=Object(d.b)(m);u=g;const C=Object(h.a)(t()),T={name:p,description:y,agent:{collectionInterval:1e4},orgID:C.id,plugins:n},v=await o.a.telegrafConfigs.create(T),O=[{action:s.b.ActionEnum.Write,resource:{type:s.c.TypeEnum.Buckets,id:f,orgID:C.id}},{action:s.b.ActionEnum.Read,resource:{type:s.c.TypeEnum.Telegrafs,id:v.id,orgID:C.id}}],x={name:`${p} token`,orgID:C.id,description:`WRITE ${g} bucket / READ ${p} telegraf config`,permissions:O},I=await Object(c.a)(x);e(N(I.token));const w=Object(r.a)(I,i.h);e(Object(S.g)(w));const j=Object(r.a)(v,l.b);e(B(v.id)),e(Object(E.f)(j)),e(Object(k.c)(D.i)),Object(b.a)(`telegraf.config.${Object(b.c)(a)}.create.success`,{id:v.id,bucket:u})}catch(t){Object(b.a)(`telegraf.config.${Object(b.c)(a)}.create.failure`,{bucket:u}),console.error(t.message),e(Object(k.c)(D.h))}},M=e=>({type:"SET_ACTIVE_TELEGRAF_PLUGIN",payload:{telegrafPlugin:e}}),U=e=>({type:"SET_PLUGIN_CONFIGURATION_STATE",payload:{telegrafPlugin:e}})},178:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(3),s=n(109),c=n(5);t.a=function({sortDirection:e,sortKey:t,sortType:n,onSelect:a,resourceType:i,width:l=210}){const u=(e=>{switch(e){case c.ResourceType.Dashboards:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Modified (Oldest)",sortKey:"meta.updatedAt",sortType:s.a.Date,sortDirection:o.Sort.Ascending},{label:"Modified (Newest)",sortKey:"meta.updatedAt",sortType:s.a.Date,sortDirection:o.Sort.Descending}];case c.ResourceType.Tasks:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Active",sortKey:"status",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Inactive",sortKey:"status",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Completed (Oldest)",sortKey:"latestCompleted",sortType:s.a.Date,sortDirection:o.Sort.Ascending},{label:"Completed (Newest)",sortKey:"latestCompleted",sortType:s.a.Date,sortDirection:o.Sort.Descending},{label:"Schedule (Most Often)",sortKey:"every",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Schedule (Least Often)",sortKey:"every",sortType:s.a.String,sortDirection:o.Sort.Descending}];case c.ResourceType.Variables:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Type (A → Z)",sortKey:"arguments.type",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Type (Z → A)",sortKey:"arguments.type",sortType:s.a.String,sortDirection:o.Sort.Descending}];case c.ResourceType.Secrets:return[{label:"Name (A → Z)",sortKey:"id",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"id",sortType:s.a.String,sortDirection:o.Sort.Descending}];case c.ResourceType.Labels:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Description (A → Z)",sortKey:"properties.description",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Description (Z → A)",sortKey:"properties.description",sortType:s.a.String,sortDirection:o.Sort.Descending}];case c.ResourceType.Templates:return[{label:"Name (A → Z)",sortKey:"meta.name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"meta.name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Description (A → Z)",sortKey:"meta.description",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Description (Z → A)",sortKey:"meta.description",sortType:s.a.String,sortDirection:o.Sort.Descending}];case c.ResourceType.Buckets:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Retention (Ascending)",sortKey:"retentionRules[0].everySeconds",sortType:s.a.Float,sortDirection:o.Sort.Ascending},{label:"Retention (Descending)",sortKey:"retentionRules[0].everySeconds",sortType:s.a.Float,sortDirection:o.Sort.Descending}];case c.ResourceType.Telegrafs:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Description (Ascending)",sortKey:"description",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Description (Descending)",sortKey:"description",sortType:s.a.String,sortDirection:o.Sort.Descending}];case c.ResourceType.Scrapers:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"URL (Ascending)",sortKey:"url",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"URL (Descending)",sortKey:"url",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Bucket (Ascending)",sortKey:"bucket",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Bucket (Descending)",sortKey:"bucket",sortType:s.a.String,sortDirection:o.Sort.Descending}];case c.ResourceType.Authorizations:return[{label:"Description (A → Z)",sortKey:"description",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Description (Z → A)",sortKey:"description",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Status (Active)",sortKey:"status",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Status (Inactive)",sortKey:"status",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Date Created (Oldest)",sortKey:"createdAt",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Date Created (Newest)",sortKey:"createdAt",sortType:s.a.String,sortDirection:o.Sort.Descending}];case c.ResourceType.Flows:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Created (Oldest)",sortKey:"createdAt",sortType:s.a.Date,sortDirection:o.Sort.Ascending},{label:"Created (Newest)",sortKey:"createdAt",sortType:s.a.Date,sortDirection:o.Sort.Descending}]}})(i),{label:d}=u.find(a=>a.sortKey===t&&a.sortDirection===e&&a.sortType===n),m=e=>{const{sortKey:t,sortDirection:n,sortType:r}=e;a(t,n,r)};return r.a.createElement(o.Dropdown,{button:(e,t)=>r.a.createElement(o.Dropdown.Button,{onClick:t,active:e,testID:"resource-sorter--button"},`Sort by ${d}`),menu:a=>r.a.createElement(o.Dropdown.Menu,{onCollapse:a},u.map(a=>r.a.createElement(o.Dropdown.Item,{key:`${a.sortKey}${a.sortDirection}`,value:a,onClick:m,testID:`resource-sorter--${a.sortKey}-${a.sortDirection}`,selected:a.sortKey===t&&a.sortType===n&&a.sortDirection===e},a.label))),style:{flexBasis:`${l}px`,width:`${l}px`},testID:"resource-sorter"})}},205:function(e,t,n){var a=n(325);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(18)(a,r);a.locals&&(e.exports=a.locals)},209:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return p}));var a=n(2),r=n.n(a),o=n(4),s=n(3),c=n(71);const i=e=>e?s.ComponentStatus.Disabled:s.ComponentStatus.Default;var l=({selectedDuration:e,onSelectDuration:t,durations:n,disabled:a=!1})=>{let o=n,l=n.find(t=>e===t.duration||Object(c.a)(e,t.duration));return l||(l={duration:e,displayText:e},o=[l,...o]),r.a.createElement(s.Dropdown,{testID:"duration-selector",button:(e,t)=>r.a.createElement(s.Dropdown.Button,{testID:"duration-selector--button",active:e,onClick:t,status:i(a)},l.displayText),menu:n=>r.a.createElement(s.Dropdown.Menu,{onCollapse:n,testID:"duration-selector--menu"},o.map(({duration:n,displayText:a})=>r.a.createElement(s.Dropdown.Item,{id:n,key:n,value:n,testID:`duration-selector--${n}`,selected:n===e,onClick:t},a)))})},u=n(52),d=n(461);const m=2592e3,p=Object(d.a)(m),h=[{duration:"1h",displayText:"1 hour"},{duration:"6h",displayText:"6 hours"},{duration:"12h",displayText:"12 hours"},{duration:"24h",displayText:"24 hours"},{duration:"48h",displayText:"48 hours"},{duration:"72h",displayText:"72 hours"},{duration:"7d",displayText:"7 days"},{duration:"14d",displayText:"14 days"},{duration:"30d",displayText:"30 days"},{duration:"90d",displayText:"90 days"},{duration:"1y",displayText:"1 year"}];class b extends a.PureComponent{constructor(){super(...arguments),this.handleRadioClick=e=>{this.props.onChangeRuleType(e)},this.handleSelectDuration=e=>{const t=Object(c.c)(Object(c.h)(e))/1e3;this.props.onChangeRetentionRule(t)}}render(){const{retentionSeconds:e,maxRetentionSeconds:t,type:n}=this.props;return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.SelectGroup,{shape:s.ButtonShape.StretchToFit,className:"retention--radio"},r.a.createElement(s.SelectGroup.Option,{name:"bucket-retention",id:"never",testID:"retention-never--button",active:null===n,onClick:this.handleRadioClick,value:null,titleText:"Never delete data",disabled:!!t},"Never"),r.a.createElement(s.SelectGroup.Option,{name:"bucket-retention",id:"intervals",active:"expire"===n,onClick:this.handleRadioClick,value:"expire",testID:"retention-intervals--button",titleText:"Delete data older than a duration"},"Older Than")),"expire"===n&&r.a.createElement(l,{selectedDuration:`${e}s`,onSelectDuration:this.handleSelectDuration,durations:this.durations}))}get durations(){const{maxRetentionSeconds:e}=this.props;return e?h.filter(({duration:t})=>Object(c.c)(Object(c.h)(t))<=1e3*e):h}}t.c=Object(o.c)(e=>({maxRetentionSeconds:Object(u.c)(e)}))(b)},221:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var a=n(5),r=n(13);const o=(e,t)=>Object(r.a)(e,a.ResourceType.Buckets).find(e=>e.name===t),s=(e,t)=>{const n=`${e.name}`.toLowerCase(),a=`${t.name}`.toLowerCase();return n===a?0:n<a?-1:n>a?1:0},c=e=>{const t=[],n=[];return Object(r.a)(e,a.ResourceType.Buckets).forEach(e=>{"system"===e.type?t.push(e):n.push(e)}),t.sort(s),n.sort(s),n.concat(t)}},229:function(e,t,n){"use strict";var a=n(2),r=n.n(a);t.a=({childrenLeft:e,childrenRight:t,width:n})=>{let a=r.a.createElement(r.a.Fragment,null),o=r.a.createElement(r.a.Fragment,null);return e&&(a=r.a.createElement("div",{className:"tabbed-page--header-left"},e)),t&&(o=r.a.createElement("div",{className:"tabbed-page--header-right"},t)),n?r.a.createElement("div",{className:"tabbed-page--header","data-testid":"tabbed-page--header",style:{width:n}},a,o):r.a.createElement("div",{className:"tabbed-page--header","data-testid":"tabbed-page--header"},a,o)}},239:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c}));const a=["timestamp","tag","field"],r=["integer","float","boolean","string","unsigned"],o=e=>!!Array.isArray(e)&&e.every(e=>"name"in e&&"string"==typeof e.name&&(!(!("type"in e)||!a.includes(e.type))&&("dataType"in e?r.includes(e.dataType):"field"!==e.type))),s=(e="")=>(e=e.trim()).startsWith("_")||/^[0-9]/.test(e)?{valid:!1,message:"cannot start with '_' or a number"}:e.length>128?{valid:!1,message:"too long, max length is 128 characters"}:{valid:!0,message:null},c=e=>!(Array.isArray(e)&&e.length)||e.every(e=>e.valid)},2515:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(2),o=n.n(r),s=n(155),c=n(14),i=n(331),l=n(328),u=n(7),d=n(4),m=n(3),p=n(150),h=n(229),b=n(148),y=n(337),g=n(1031),f=n(954),E=n(109);class S extends r.PureComponent{constructor(){super(...arguments),this.memGetSortedResources=Object(y.a)(E.b)}render(){return o.a.createElement(m.ResourceList,null,o.a.createElement(m.ResourceList.Body,{emptyState:this.props.emptyState},this.listBuckets))}get listBuckets(){const{buckets:e,sortKey:t,sortDirection:n,sortType:a,onDeleteBucket:r,onFilterChange:s,onUpdateBucket:c,onGetBucketSchema:i}=this.props;return this.memGetSortedResources(e,t,n,a).map(e=>"demodata"===e.type?o.a.createElement(f.a,{key:e.id,bucket:e}):o.a.createElement(g.a,{key:e.id,bucket:e,onDeleteBucket:r,onUpdateBucket:c,onFilterChange:s,onGetBucketSchema:i}))}}var k,D=Object(s.j)(S),C=n(426),T=n(955),v=n(956),O=n(23),x=n(178),I=n(302),w=n(110),j=n(35),B=n(40),A=n(52),N=n(13),R=n(5);const F=Object(b.a)();let _=class extends r.PureComponent{constructor(e){super(e),this.handleSort=(e,t,n)=>{this.setState({sortKey:e,sortDirection:t,sortType:n})},this.handleDeleteBucket=({id:e,name:t})=>{this.props.deleteBucket(e,t)},this.handleShowBucketSchema=async({id:e,name:t})=>{const n=await this.props.getBucketSchema(e),a=null==n?void 0:n.measurementSchemas;this.props.showOverlay("bucket-schema-show",{schema:a,bucketName:t},this.props.dismissOverlay)},this.handleFilterUpdate=e=>{this.setState({searchTerm:e})},this.state={searchTerm:"",sortKey:"name",sortDirection:m.Sort.Ascending,sortType:E.a.String}}componentDidMount(){this.props.checkBucketLimits()}render(){const{buckets:e,limitStatus:t}=this.props,{searchTerm:n,sortKey:a,sortDirection:r,sortType:s}=this.state,c=o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{placeholderText:"Filter buckets...",searchTerm:n,onSearch:this.handleFilterUpdate}),o.a.createElement(x.a,{resourceType:R.ResourceType.Buckets,sortDirection:r,sortKey:a,sortType:s,onSelect:this.handleSort,width:238})),i=o.a.createElement(o.a.Fragment,null,o.a.createElement(O.a,{name:"demodata"},o.a.createElement(v.a,null)),o.a.createElement(I.a,null));return o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,{childrenLeft:c,childrenRight:i}),o.a.createElement(m.Grid,null,o.a.createElement(m.Grid.Row,null,o.a.createElement(m.Grid.Column,{widthXS:m.Columns.Twelve,widthSM:m.Columns.Eight,widthMD:m.Columns.Ten},o.a.createElement(F,{searchTerm:n,searchKeys:["name","readableRetention","labels[].name"],list:e},e=>o.a.createElement(D,{buckets:e,emptyState:this.emptyState,onUpdateBucket:this.props.updateBucket,onDeleteBucket:this.handleDeleteBucket,onFilterChange:this.handleFilterUpdate,onGetBucketSchema:this.handleShowBucketSchema,sortKey:a,sortDirection:r,sortType:s})),o.a.createElement(C.a,{resourceName:"buckets",limitStatus:t,className:"load-data--asset-alert"})),o.a.createElement(m.Grid.Column,{widthXS:m.Columns.Twelve,widthSM:m.Columns.Four,widthMD:m.Columns.Two},o.a.createElement(T.a,null)))))}get emptyState(){const{searchTerm:e}=this.state;return Object(u.isEmpty)(e)?o.a.createElement(m.EmptyState,{size:m.ComponentSize.Large},o.a.createElement(m.EmptyState.Text,null,"Looks like there aren't any ",o.a.createElement("b",null,"Buckets"),", why not create one?"),o.a.createElement(I.a,null)):o.a.createElement(m.EmptyState,{size:m.ComponentSize.Large},o.a.createElement(m.EmptyState.Text,null,"No Buckets match your query"))}};_=Object(a.a)([c.a,Object(a.b)("design:paramtypes",["function"==typeof(k="undefined"!=typeof Props&&Props)?k:Object])],_);const L={createBucket:w.c,updateBucket:w.j,deleteBucket:w.e,getBucketSchema:w.g,showOverlay:j.d,dismissOverlay:j.b,checkBucketLimits:B.b};var P=Object(d.c)(e=>({buckets:Object(N.a)(e,R.ResourceType.Buckets),limitStatus:Object(A.p)(e)}),L)(_),$=n(88),M=n(376),U=n(373),G=n(741),K=n(957),z=n(1040),V=n(764),Z=n(64),W=n(203);const H=`/${W.m}/${W.n}/load-data/${W.a}/${W.b}`;let q=class extends r.Component{render(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.Page,{titleTag:Object(Z.a)(["Buckets","Load Data"])},o.a.createElement(U.a,null,o.a.createElement(l.a,null),o.a.createElement(i.a,{activeTab:"buckets"},o.a.createElement($.a,{resources:[R.ResourceType.Buckets,R.ResourceType.Labels,R.ResourceType.Telegrafs]},o.a.createElement(M.a,null,o.a.createElement(P,null)))))),o.a.createElement(s.c,null,o.a.createElement(s.a,{path:`${H}/telegrafs/new`,component:G.a}),o.a.createElement(s.a,{path:`${H}/scrapers/new`,component:V.a}),o.a.createElement(s.a,{path:`${H}/edit`,component:K.a}),o.a.createElement(s.a,{path:`${H}/rename`,component:z.a})))}};q=Object(a.a)([c.a],q);t.default=q},267:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(4),s=n(3),c=n(35);const i={onShowOverlay:c.d,onDismissOverlay:c.b},l=Object(o.c)(null,i);t.a=l(({color:e=s.ComponentColor.Primary,buttonText:t,resourceName:n,onShowOverlay:a,onDismissOverlay:o})=>r.a.createElement(s.Button,{icon:s.IconFont.Plus,text:t||`Create ${n}`,color:e,titleText:`Click to create ${n}`,onClick:()=>{a("asset-limit",{asset:`${n}s`},o)},testID:`create-${n.toLowerCase()}`}))},299:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=c(n(2)),s=c(n(300));function c(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(t.CopyToClipboard=function(e){function t(){var e,n,a;i(this,t);for(var r=arguments.length,c=Array(r),u=0;u<r;u++)c[u]=arguments[u];return n=a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.onClick=function(e){var t=a.props,n=t.text,r=t.onCopy,c=t.children,i=t.options,l=o.default.Children.only(c),u=(0,s.default)(n,i);r&&r(n,u),l&&l.props&&"function"==typeof l.props.onClick&&l.props.onClick(e)},l(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){var e=this.props,t=(e.text,e.onCopy,e.options,e.children),n=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["text","onCopy","options","children"]),r=o.default.Children.only(t);return o.default.cloneElement(r,a({},n,{onClick:this.onClick}))}}]),t}(o.default.PureComponent)).defaultProps={onCopy:void 0,options:void 0}},300:function(e,t,n){"use strict";var a=n(301);e.exports=function(e,t){var n,r,o,s,c,i,l=!1;t||(t={}),n=t.debug||!1;try{if(o=a(),s=document.createRange(),c=document.getSelection(),(i=document.createElement("span")).textContent=e,i.style.all="unset",i.style.position="fixed",i.style.top=0,i.style.clip="rect(0, 0, 0, 0)",i.style.whiteSpace="pre",i.style.webkitUserSelect="text",i.style.MozUserSelect="text",i.style.msUserSelect="text",i.style.userSelect="text",document.body.appendChild(i),s.selectNode(i),c.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");l=!0}catch(a){n&&console.error("unable to copy using execCommand: ",a),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),l=!0}catch(a){n&&console.error("unable to copy using clipboardData: ",a),n&&console.error("falling back to prompt"),r=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(r,e)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(s):c.removeAllRanges()),i&&document.body.removeChild(i),o()}return l}},301:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],a=0;a<e.rangeCount;a++)n.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},302:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(4),s=n(3),c=n(267),i=n(40),l=n(35),u=n(52),d=n(6);const m={onShowOverlay:l.d,onDismissOverlay:l.b},p=Object(o.c)(e=>({limitStatus:Object(u.p)(e)}),m);t.a=p(({limitStatus:e,onShowOverlay:t,onDismissOverlay:n})=>{const l=Object(o.d)();Object(a.useEffect)(()=>{l(Object(i.b)())},[l]);return d.f&&"exceeded"===e?r.a.createElement(c.a,{resourceName:"Bucket"}):r.a.createElement(s.Button,{icon:s.IconFont.Plus,color:s.ComponentColor.Primary,text:"Create Bucket",titleText:"Click to create a bucket",onClick:()=>{t("create-bucket",null,n)},testID:"Create Bucket"})})},304:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"d",(function(){return i}));const a=()=>({type:"CLEAR_STEPS"}),r=()=>({type:"INCREMENT_CURRENT_STEP_INDEX"}),o=()=>({type:"DECREMENT_CURRENT_STEP_INDEX"}),s=e=>({type:"SET_CURRENT_STEP_INDEX",payload:{index:e}}),c=(e,t)=>({type:"SET_SUBSTEP_INDEX",payload:{stepIndex:e,substep:t}}),i=(e,t,n)=>({type:"SET_BUCKET_INFO",payload:{orgID:e,bucket:t,bucketID:n}})},307:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(2),r=n.n(a),o=n(3),s=n(209),c=n(7),i=(n(205),n(6));let l=null;i.f&&(l=n(41).MeasurementSchema);const u=({onChangeSchemaType:e,readOnlySchemaType:t})=>{const[n,s]=Object(a.useState)("implicit"),i=t=>{e(t),s(t)},l=r.a.createElement(r.a.Fragment,null,r.a.createElement(o.Toggle,{tabIndex:1,value:"implicit",id:"implicit-bucket-schema-choice",name:"implicit-bucket-schema-choice",className:"option",checked:"implicit"===n,onChange:i,type:o.InputToggleType.Radio,size:o.ComponentSize.ExtraSmall,color:o.ComponentColor.Primary,testID:"implicit-bucket-schema-choice-ID"},r.a.createElement(o.InputLabel,{htmlFor:"implicit-bucket-schema-choice",active:"implicit"===n},"Implicit")),r.a.createElement(o.Toggle,{tabIndex:2,value:"explicit",id:"explicit-bucket-schema-choice",name:"explicit-bucket-schema-choice",testID:"explicit-bucket-schema-choice-ID",checked:"explicit"===n,className:"option",onChange:i,type:o.InputToggleType.Radio,size:o.ComponentSize.ExtraSmall,color:o.ComponentColor.Primary},r.a.createElement(o.InputLabel,{htmlFor:"explicit-bucket-schema-choice",active:"explicit"===n},"Explicit"))),u=r.a.createElement("span",{className:"value-text","data-testid":"bucket-readonly-schema-label"},": ",Object(c.capitalize)(t)),d=t?null:l,m=t?u:null;return r.a.createElement(o.FlexBox,{direction:o.FlexDirection.Column,margin:o.ComponentSize.Large,alignItems:o.AlignItems.FlexStart,testID:"create-bucket-schema-type-toggle-box",className:"schema-section"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"title-text"},"Bucket Schema Type ",m),r.a.createElement("div",{className:"subtext"},"By default, buckets have an implicit schema that conforms to your data. Use explicit schemas to enforce specific data types and columns. Bucket Schema type cannot be changed after creation."," ",r.a.createElement("a",{href:"https://docs.influxdata.com/influxdb/cloud/organizations/buckets/bucket-schema/",target:"_blank",rel:"noopener noreferrer"}," ","Learn more"))),d)};var d=n(105),m=n(23),p=n(8),h=n(239),b=n(101),y=n(15),g=n.n(y);const f=({allowedExtensions:e,allowedTypes:t,handleFileUpload:n,setErrorState:o,alreadySetFileName:s})=>{const[c,i]=Object(a.useState)(s),[l,u]=Object(a.useState)(!1),[d,m]=Object(a.useState)(null);const p=(e,t)=>{m(e),o(e,t)},h=e=>{const t=new FileReader;t.readAsText(e),t.onload=()=>{const a=e.name;try{n(t.result,a),i(a),p(!1)}catch(e){p(!0,e.message)}}},b=Object(a.useRef)(null),y=r.a.createElement("input",{type:"file","data-testid":"drag-and-drop--input",ref:b,className:"drag-and-drop--input",accept:e,onChange:e=>{const t=e.currentTarget.files[0];t&&h(t)}}),f=null!=c?c:"Add schema file",E=g()("dnd",{active:l,hasError:d&&!c}),S=g()("display-area",{active:l});return r.a.createElement("div",{id:"drop_zone",className:E,onDrop:e=>{const n=e.dataTransfer.files[0];if(!n)return;e.preventDefault(),e.stopPropagation();const a=n.type;if(t.includes(a))h(n);else{const e=(e=>{const t=e.length;if(1===t)return e[0];const n=()=>{const t=e.length-1,n=e[t];return e[t]=`or ${n}`,e};return 2===t?n().join(" "):n().join(", ")})(t);p(!0,`Disallowed file type${a?` (${a})`:""}, you can only upload files with the type of ${e}.`)}u(!1)},onDragOver:function(e){u(!0),e.preventDefault()},onDragLeave:function(e){u(!1),e.preventDefault()},onClick:()=>{b.current.click()},"data-testid":"dndContainer"},r.a.createElement("div",{"data-testid":"displayArea",className:S},f),y)};let E=null,S=null;i.f&&(S=n(41).MeasurementSchema,E=n(41).MeasurementSchemaList);const k=({index:e,name:t,onAddName:n,onAddContents:s,onDelete:c,filename:i,showSchemaValidation:l})=>{const[u,d]=Object(a.useState)(t);let m={valid:!0,message:null};t&&(m=Object(h.c)(t));const[p,b]=Object(a.useState)(m),y=l&&!i,[g,E]=Object(a.useState)(y);let S=null;y&&(S="You must upload a file");const[k,D]=Object(a.useState)(S),C=r.a.createElement(o.DismissButton,{onClick:()=>c(e),size:o.ComponentSize.ExtraSmall,color:o.ComponentColor.Default}),T={placeholder:"Give your schema a name",onChange:t=>{const a=t.target.value,r=Object(h.c)(a);b(r),d(a),n(a,r.valid,e)},value:u,className:"schema-name-input",maxLength:48,size:o.ComponentSize.Small,type:o.InputType.Text},v=r.a.createElement(f,{key:`mini-dnd-${e}`,allowedExtensions:".json",allowedTypes:["application/json"],handleFileUpload:(t,n)=>{let a=null;if(t&&(a=JSON.parse(t),!Object(h.a)(a)))throw{message:"column file is not formatted correctly"};s(a,n,e)},setErrorState:(e,t)=>{E(e),e||(t=null),D(t)},alreadySetFileName:i}),O=g?r.a.createElement(o.FormElementError,{style:{wordBreak:"break-word"},message:k}):null;return r.a.createElement(o.Panel,{className:"measurement-schema-panel-container",key:`addMsp-${e}`},r.a.createElement(o.FlexBox,{direction:o.FlexDirection.Column,margin:o.ComponentSize.Large,alignItems:o.AlignItems.FlexStart,testID:`measurement-schema-readOnly-panel-${e}`,className:"measurement-schema-panel",key:`addMsp-column-${e}`},r.a.createElement("div",null," name"),r.a.createElement(o.FlexBox,{direction:o.FlexDirection.Row,className:"schema-row"},(()=>{var e;let t=o.ComponentStatus.Default;const n=!(null==p?void 0:p.valid)||l&&!u;n&&(t=o.ComponentStatus.Error),T.status=t;let a=null;if(n){const t=null!==(e=null==p?void 0:p.message)&&void 0!==e?e:"You must enter a name";a=r.a.createElement(o.FormElementError,{message:t})}return r.a.createElement("span",null,r.a.createElement(o.Input,Object.assign({},T))," ",a)})(),v),O,C))},D=({measurementSchema:e,index:t})=>r.a.createElement(o.Panel,{className:"measurement-schema-panel-container"},r.a.createElement(o.FlexBox,{direction:o.FlexDirection.Column,margin:o.ComponentSize.Large,alignItems:o.AlignItems.FlexStart,testID:`measurement-schema-readOnly-panel-${t}`,className:"measurement-schema-panel",key:`romsp-${t}`},r.a.createElement("div",null," name"),r.a.createElement(o.FlexBox,{direction:o.FlexDirection.Row,className:"schema-row"},r.a.createElement("div",{className:"value-text","data-testid":`measurement-schema-name-${t}`},e.name),r.a.createElement(o.Button,{icon:o.IconFont.Download,color:o.ComponentColor.Secondary,text:"Download Schema",onClick:()=>{const{name:t}=e,n=JSON.stringify(e.columns);Object(p.a)("bucket.download.schema.explicit"),Object(b.b)(n,t||"schema",".json")},testID:"measurement-schema-download-button"})))),C=({measurementSchemaList:e,onUpdateSchemas:t,showSchemaValidation:n})=>{const[s,i]=Object(a.useState)([]),l=null==e?void 0:e.measurementSchemas;let u=null;l&&(u=l.map((e,t)=>r.a.createElement(D,{key:`mss-ep-${t}`,measurementSchema:e,index:t})));const d=Object(c.debounce)(()=>t(s,!1),300),m=e=>{i(e),d()},p=r.a.createElement(o.Button,{onClick:()=>{const e=[...s,{valid:!1}];i(e),t(e,!0)},testID:"measurement-schema-add-file-button",text:"Add New Measurement Schema"}),h=(e="",t,n)=>{const a=s[n],r=e.trim();a.name=r,a.columns&&a.name&&t?a.valid=!0:a.valid=!1,m(s)},b=(e,t,n)=>{const a=s[n];a.columns=e,a.filename=t,a.columns&&a.name&&(a.valid=!0),m(s)},y=e=>{s.splice(e,1),m([...s])},g=Object(a.useMemo)(()=>s.map((e,t)=>r.a.createElement(k,{key:`${e.name}-${t}`,index:t,onAddName:h,onAddContents:b,onDelete:y,filename:e.filename,name:e.name,showSchemaValidation:n||!1})),[s.length,n]);return r.a.createElement(o.FlexBox,{direction:o.FlexDirection.Column,margin:o.ComponentSize.Large,alignItems:o.AlignItems.FlexStart,testID:"measurement-schema-section-parent",className:"schema-section measurement"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"title-text"},"Measurement Schema"),r.a.createElement("div",{className:"subtext"},"Measurement Schemas provide non-conforming validation for data in the bucket. once a measurement schema is saved you cannot delete or modify existing columns. You may only add new columns."," ",r.a.createElement("a",{href:"https://docs.influxdata.com/influxdb/cloud/organizations/buckets/bucket-schema/",target:"_blank",rel:"noopener noreferrer"}," ","Learn more"))),u,p,g)};let T=null,v=null,O=null;i.f&&(O=n(41).MeasurementSchema,v=n(41).MeasurementSchemaCreateRequest,T=n(41).MeasurementSchemaList);class x extends a.PureComponent{constructor(){super(...arguments),this.state={showAdvanced:!1,schemaType:"implicit",newMeasurementSchemas:[]},this.onChangeSchemaTypeInternal=e=>{this.setState({schemaType:e}),this.props.onChangeSchemaType(e)},this.onUpdateSchemasInternal=(e,t)=>{this.props.onUpdateNewMeasurementSchemas(e,t),this.setState({newMeasurementSchemas:e})},this.handleNameValidation=e=>Object(d.e)(e)?"Only system bucket names can begin with _":e?0===e.trim().length||e.length<d.a?`Please enter a name with at least ${d.a} letters or numbers`:null:"This bucket needs a name"}render(){const{name:e,onSubmit:t,ruleType:n,buttonText:a,retentionSeconds:c,isEditing:l,onClose:d,onChangeInput:p,onChangeRuleType:h,onChangeRetentionRule:b,onClickRename:y,testID:g="bucket-form",schemaType:f,measurementSchemaList:E,showSchemaValidation:S}=this.props,{showAdvanced:k,schemaType:D}=this.state,T=l&&o.ComponentStatus.Disabled,v=r.a.createElement(C,{measurementSchemaList:E,key:"measurementSchemaSection",onUpdateSchemas:this.onUpdateSchemasInternal,showSchemaValidation:S}),O=l&&"explicit"===f||"explicit"===D?v:null;return r.a.createElement(o.Form,{onSubmit:t,testID:g},r.a.createElement(o.Grid,null,r.a.createElement(o.Grid.Row,null,r.a.createElement(o.Grid.Column,null,r.a.createElement(o.Form.ValidationElement,{value:e,label:"Name",helpText:this.nameHelpText,validationFunc:this.handleNameValidation,required:!0},t=>r.a.createElement(o.Input,{status:T||t,placeholder:"Give your bucket a name",name:"name",autoFocus:!0,value:e,onChange:p,testID:"bucket-form-name"})),r.a.createElement(o.Form.Element,{label:"Delete Data"},r.a.createElement(s.c,{type:n,retentionSeconds:c,onChangeRuleType:h,onChangeRetentionRule:b})),(()=>{if(Object(m.c)("measurementSchema")&&i.f){let e=r.a.createElement(u,{onChangeSchemaType:this.onChangeSchemaTypeInternal});l&&(e=r.a.createElement(u,{key:"schemaToggleSection",readOnlySchemaType:f}));const t=r.a.createElement(r.a.Fragment,null,e,O);return r.a.createElement(o.Accordion,{expanded:k,testID:"schemaBucketToggle"},r.a.createElement(o.Accordion.AccordionHeader,null,r.a.createElement("span",null,"Advanced Configuration (Optional)")),r.a.createElement(o.Accordion.AccordionBodyItem,null,r.a.createElement("div",null,t)))}})())),r.a.createElement(o.Grid.Row,null,r.a.createElement(o.Grid.Column,null,r.a.createElement(o.Form.Footer,null,r.a.createElement(o.Button,{text:"Cancel",onClick:d,type:o.ButtonType.Button}),"Save Changes"===a&&r.a.createElement(o.Button,{text:"Rename",color:o.ComponentColor.Danger,onClick:y}),r.a.createElement(o.Button,{text:a,testID:"bucket-form-submit",color:this.submitButtonColor,status:this.submitButtonStatus,type:o.ButtonType.Submit}))))))}get nameHelpText(){return this.props.isEditing?"To rename bucket use the RENAME button below":""}get submitButtonColor(){const{buttonText:e}=this.props;return"Save Changes"===e?o.ComponentColor.Success:o.ComponentColor.Primary}get submitButtonStatus(){const{name:e}=this.props;return this.handleNameValidation(e)?o.ComponentStatus.Disabled:o.ComponentStatus.Default}}},324:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(3),s=n(105);class c extends a.PureComponent{render(){var e;return r.a.createElement(o.Dropdown,{testID:null!==(e=this.props.testID)&&void 0!==e?e:"bucket-dropdown",button:(e,t)=>r.a.createElement(o.Dropdown.Button,{testID:"bucket-dropdown--button",active:e,onClick:t,status:this.status},this.selectedBucketName),menu:e=>r.a.createElement(o.Dropdown.Menu,{onCollapse:e},this.dropdownBuckets),style:this.props.style})}get selectedBucketName(){var e,t;const{selectedBucketID:n,buckets:a,emptyOriginal:r}=this.props;return this.isBucketsEmpty?"No buckets found":r?"Choose a bucket":null!==(t=null===(e=a.find(e=>e.id===n))||void 0===e?void 0:e.name)&&void 0!==t?t:""}get status(){return this.isBucketsEmpty?o.ComponentStatus.Disabled:o.ComponentStatus.Default}get isBucketsEmpty(){const{buckets:e}=this.props;return!e||!e.length}get dropdownBuckets(){const{buckets:e,onSelectBucket:t,selectedBucketID:n}=this.props;return this.isBucketsEmpty?[]:e.filter(e=>!Object(s.e)(e.name)).map(e=>r.a.createElement(o.Dropdown.Item,{key:e.name,value:e,id:e.id,onClick:t,selected:e.id===n},e.name))}}t.a=c},325:function(e,t,n){(e.exports=n(17)(!1)).push([e.i,"/*\n   Influx Color Palette\n   -----------------------------------------------------------------------------\n*/\n/*\n   Z Variables\n   -----------------------------------------------------------------------------\n   Might not actually need any of these yet\n*/\n/*\n   Motifs\n   -----------------------------------------------------------------------------\n   Goal is to re-use these variables as much as possible to ensure powerful\n   control over the UI kit proportions\n*/\n/*\n   Typography Variables\n   -----------------------------------------------------------------------------\n*/\n/*\n   Page Layout Variables\n   -----------------------------------------------------------------------------\n   NavMenu + Page components\n*/\n/*\n   Responsive Breakpoints\n   -----------------------------------------------------------------------------\n*/\n/*\n   Form Element Sizing\n   -----------------------------------------------------------------------------\n   These ensure consistent sizing across elements such as Buttons, SelectGroup,\n   Dropdown, Input, etc.\n*/\n/*\n   Empty State\n   -----------------------------------------------------------------------------\n*/\n/*\n   Input Variables\n   -----------------------------------------------------------------------------\n   These ensure consistent appearance across different kinds of inputs\n*/\n/*\n   Card Variables\n   -----------------------------------------------------------------------------\n   These ensure consistent appearance across different kinds of cards\n*/\n/*\n   Label Variables\n   -----------------------------------------------------------------------------\n   Used in both Inputs and Forms\n*/\n/*\n   Overlay Variables\n   -----------------------------------------------------------------------------\n   Used in both Inputs and Forms\n*/\n/*\n   Tree Nav Variables\n   -----------------------------------------------------------------------------\n*/\n/*\n   Mixins\n   -----------------------------------------------------------------------------\n*/\n.dnd {\n  border: 2px dashed gray;\n  border-radius: 3px;\n}\n.dnd.hasError {\n  border-color: #ff8564;\n  color: #ff8564;\n}\n.dnd input[type=file].drag-and-drop--input {\n  display: none;\n}\n.dnd .display-area {\n  min-width: 150px;\n  padding: 10px;\n  text-align: center;\n}\n.dnd .display-area.active {\n  color: black;\n}\n.dnd.active {\n  background: lightgrey;\n}\n\n.schema-section.measurement {\n  margin-top: 15px;\n}\n.schema-section .schema-name-input {\n  margin-right: 10px;\n  width: 205px !important;\n}\n.schema-section .file-name-read-only {\n  width: 100%;\n  height: 40px;\n  font-size: small;\n  padding-top: 12px;\n}\n.schema-section .add-schema-uploader.drag-and-drop {\n  height: 40px;\n  border-color: lightgray;\n  width: 155px;\n}\n.schema-section .add-schema-uploader.drag-and-drop.has-file {\n  border: none;\n}\n.schema-section .add-schema-uploader.drag-and-drop .drag-and-drop--header {\n  font-size: small;\n  padding-top: 12px;\n  color: lightgray;\n}\n.schema-section .header {\n  margin-bottom: 10px;\n}\n.schema-section .header .subtext {\n  margin-top: 6px;\n  font-weight: 300;\n}\n.schema-section .title-text {\n  color: #c6cad3;\n  font-weight: 500;\n}\n.schema-section .value-text {\n  color: #ffffff;\n  font-weight: 500;\n}\n.schema-section .option {\n  margin-bottom: 6px !important;\n}\n.schema-section .measurement-schema-panel-container {\n  width: 100%;\n  padding-left: 8px;\n  border-radius: 10px;\n}\n.schema-section .measurement-schema-panel-container .measurement-schema-panel {\n  width: 93%;\n}\n.schema-section .measurement-schema-panel-container .measurement-schema-panel .schema-row {\n  justify-content: space-between;\n  width: 100%;\n  margin-bottom: 8px;\n}",""])},328:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(3),s=n(87);t.a=()=>r.a.createElement(o.Page.Header,{fullWidth:!1,testID:"load-data--header"},r.a.createElement(o.Page.Title,{title:"Load Data"}),r.a.createElement(s.a,null))},329:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));const a=e=>e.dataLoading.dataLoaders,r=e=>e.dataLoading.steps},331:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(4),s=n(54),c=n(10),i=n(155),l=n(3),u=n(23),d=n(14),m=n(152);let p=class extends a.PureComponent{render(){const{activeTab:e,orgID:t,history:n}=this.props,a=e=>{n.push(`/orgs/${t}/load-data/${e}`)},o=[{text:"Sources",id:"sources",cloudExclude:!1,featureFlag:null},{text:"Buckets",id:"buckets",cloudExclude:!1,featureFlag:null},{text:"Telegraf",id:"telegrafs",cloudExclude:!1,featureFlag:null},{text:"Scrapers",id:"scrapers",cloudExclude:!0,featureFlag:null},{text:"API Tokens",id:"tokens",cloudExclude:!1,featureFlag:null}],s=o.find(t=>t.id===e).text;return r.a.createElement(l.Tabs,{orientation:l.Orientation.Horizontal,size:l.ComponentSize.Large,dropdownBreakpoint:872,dropdownLabel:s},o.map(t=>{let n=r.a.createElement(l.Tabs.Tab,{testID:`${t.id}--tab`,key:t.id,text:t.text,id:t.id,onClick:a,active:t.id===e});return t.cloudExclude&&(n=r.a.createElement(m.a,{key:t.id},n)),t.featureFlag&&(n=r.a.createElement(u.a,{key:t.id,name:t.featureFlag},n)),n}))}};p=Object(c.a)([d.a],p);var h=Object(i.j)(p),b=n(9);const y=e=>("buckets"!==e||!Object(u.c)("fetchAllBuckets"))&&("tokens"!==e||!Object(u.c)("paginatedTokens")),g=Object(o.c)(e=>({orgID:Object(b.a)(e).id}));t.a=g(({activeTab:e,orgID:t,children:n})=>r.a.createElement(l.Page.Contents,{fullWidth:!1,scrollable:y(e)},r.a.createElement(l.Tabs.Container,{orientation:l.Orientation.Horizontal,stretchToFitHeight:!0},r.a.createElement(h,{activeTab:e,orgID:t}),r.a.createElement(s.a,null,r.a.createElement(l.Tabs.TabContents,null,n)))))},373:function(e,t,n){"use strict";var a=n(2),r=n(4),o=n(6);class s extends a.PureComponent{componentDidMount(){o.f&&this.props.getReadWriteCardinalityLimits()}render(){return this.props.children}}const c={getReadWriteCardinalityLimits:n(40).i},i=Object(r.c)(null,c);t.a=i(s)},376:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(4),s=n(40),c=n(3),i=n(6);class l extends a.PureComponent{componentDidMount(){i.f&&this.props.getAssetLimits()}render(){const{status:e}=this.props;return i.f?r.a.createElement(c.SpinnerContainer,{loading:e,spinnerComponent:r.a.createElement(c.TechnoSpinner,null)},this.props.children):this.props.children}}const u={getAssetLimits:s.h},d=Object(o.c)(({cloud:{limits:{status:e}}})=>({status:e}),u);t.a=d(l)},426:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(3),s=n(51),c=n(6);t.a=({limitStatus:e,resourceName:t,className:n})=>c.f&&"exceeded"===e?r.a.createElement(o.GradientBox,{borderGradient:o.Gradients.MiyazakiSky,borderColor:o.InfluxColors.Raven,className:n},r.a.createElement(o.Panel,{backgroundColor:o.InfluxColors.Raven,className:"asset-alert"},r.a.createElement(o.Panel.Header,null,r.a.createElement(o.Heading,{element:o.HeadingElement.H4},"Need more ",t,"?")),r.a.createElement(o.Panel.Body,{className:"asset-alert--contents"},r.a.createElement(o.FlexBox,{justifyContent:o.JustifyContent.FlexEnd,alignItems:o.AlignItems.FlexEnd,stretchToFitHeight:!0},r.a.createElement(s.a,{buttonText:`Get more ${t}`,className:"upgrade-payg--button__asset-alert"}))))):null},515:function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=n(2),i=n(73),l=[],u=[];function d(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then((function(e){return n.loading=!1,n.loaded=e,e})).catch((function(e){throw n.loading=!1,n.error=e,e})),n}function m(e){var t={loading:!1,loaded:{},error:null},n=[];try{Object.keys(e).forEach((function(a){var r=d(e[a]);r.loading?t.loading=!0:(t.loaded[a]=r.loaded,t.error=r.error),n.push(r.promise),r.promise.then((function(e){t.loaded[a]=e})).catch((function(e){t.error=e}))}))}catch(e){t.error=e}return t.promise=Promise.all(n).then((function(e){return t.loading=!1,e})).catch((function(e){throw t.loading=!1,e})),t}function p(e,t){return c.createElement((n=e)&&n.__esModule?n.default:n,t);var n}function h(e,t){var d,m;if(!t.loading)throw new Error("react-loadable requires a `loading` component");var h=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:p,webpack:null,modules:null},t),b=null;function y(){return b||(b=e(h.loader)),b.promise}return l.push(y),"function"==typeof h.webpack&&u.push((function(){if(e=h.webpack,"object"===a(n.m)&&e().every((function(e){return void 0!==e&&void 0!==n.m[e]})))return y();var e})),m=d=function(t){function n(a){r(this,n);var s=o(this,t.call(this,a));return s.retry=function(){s.setState({error:null,loading:!0,timedOut:!1}),b=e(h.loader),s._loadModule()},y(),s.state={error:b.error,pastDelay:!1,timedOut:!1,loading:b.loading,loaded:b.loaded},s}return s(n,t),n.preload=function(){return y()},n.prototype.componentWillMount=function(){this._mounted=!0,this._loadModule()},n.prototype._loadModule=function(){var e=this;if(this.context.loadable&&Array.isArray(h.modules)&&h.modules.forEach((function(t){e.context.loadable.report(t)})),b.loading){"number"==typeof h.delay&&(0===h.delay?this.setState({pastDelay:!0}):this._delay=setTimeout((function(){e.setState({pastDelay:!0})}),h.delay)),"number"==typeof h.timeout&&(this._timeout=setTimeout((function(){e.setState({timedOut:!0})}),h.timeout));var t=function(){e._mounted&&(e.setState({error:b.error,loaded:b.loaded,loading:b.loading}),e._clearTimeouts())};b.promise.then((function(){t()})).catch((function(e){t()}))}},n.prototype.componentWillUnmount=function(){this._mounted=!1,this._clearTimeouts()},n.prototype._clearTimeouts=function(){clearTimeout(this._delay),clearTimeout(this._timeout)},n.prototype.render=function(){return this.state.loading||this.state.error?c.createElement(h.loading,{isLoading:this.state.loading,pastDelay:this.state.pastDelay,timedOut:this.state.timedOut,error:this.state.error,retry:this.retry}):this.state.loaded?h.render(this.state.loaded,this.props):null},n}(c.Component),d.contextTypes={loadable:i.shape({report:i.func.isRequired})},m}function b(e){return h(d,e)}b.Map=function(e){if("function"!=typeof e.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return h(m,e)};var y=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return s(t,e),t.prototype.getChildContext=function(){return{loadable:{report:this.props.report}}},t.prototype.render=function(){return c.Children.only(this.props.children)},t}(c.Component);function g(e){for(var t=[];e.length;){var n=e.pop();t.push(n())}return Promise.all(t).then((function(){if(e.length)return g(e)}))}y.propTypes={report:i.func.isRequired},y.childContextTypes={loadable:i.shape({report:i.func.isRequired}).isRequired},b.Capture=y,b.preloadAll=function(){return new Promise((function(e,t){g(l).then(e,t)}))},b.preloadReady=function(){return new Promise((function(e,t){g(u).then(e,e)}))},e.exports=b},546:function(e,t,n){"use strict";var a=n(10),r=n(2),o=n.n(r),s=n(3),c=n(14);let i=class extends r.PureComponent{render(){return o.a.createElement(s.Form,{onSubmit:this.props.onConfirm},o.a.createElement(s.FlexBox,{alignItems:s.AlignItems.Center,direction:s.FlexDirection.Column,margin:s.ComponentSize.Large},o.a.createElement(s.Alert,{color:s.ComponentColor.Danger,icon:s.IconFont.AlertTriangle},"Bad things could happen if you don't read this!"),o.a.createElement(s.Form.Element,{label:""},o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,this.props.message),o.a.createElement("ul",null,this.props.effectedItems.map(e=>o.a.createElement("li",{key:e},e))))),o.a.createElement(s.Form.Footer,null,o.a.createElement(s.Button,{color:s.ComponentColor.Danger,text:this.props.confirmButtonText,type:s.ButtonType.Submit,testID:"danger-confirmation--button"}))))}};i=Object(a.a)([c.a],i);var l=i;let u=class extends r.PureComponent{constructor(){super(...arguments),this.state={isConfirmed:!1},this.handleCloseOverlay=()=>{this.props.onClose()},this.handleConfirm=()=>{this.setState({isConfirmed:!0})}}render(){return o.a.createElement(s.Overlay.Container,{maxWidth:400},o.a.createElement(s.Overlay.Header,{title:this.overlayTitle,onDismiss:this.handleCloseOverlay}),o.a.createElement(s.Overlay.Body,null,this.overlayContents))}get overlayTitle(){const{title:e}=this.props;return this.state.isConfirmed?e:"Are you sure?"}get overlayContents(){const{message:e,effectedItems:t,confirmButtonText:n}=this.props;return this.state.isConfirmed?this.props.children:o.a.createElement(l,{onConfirm:this.handleConfirm,message:e,effectedItems:t,confirmButtonText:n})}};u=Object(a.a)([c.a],u);t.a=u},741:function(e,t,n){"use strict";var a=n(10),r=n(2),o=n.n(r),s=n(515),c=n.n(s),i=n(4),l=n(155),u=n(14),d=n(3),m=n(11),p=n(304),h=n(174),b=n(5),y=n(13),g=n(9),f=n(105);const E=o.a.createElement("div",null),S=c()({loader:()=>Promise.all([n.e(14),n.e(63)]).then(n.bind(null,1025)),loading:()=>E});let k=class extends r.PureComponent{constructor(){super(...arguments),this.handleDismiss=()=>{const{history:e,org:t}=this.props,{onClearDataLoaders:n,onClearSteps:a}=this.props;n(),a(),e.push(`/orgs/${t.id}/load-data/telegrafs`)}}componentDidMount(){const{bucket:e,buckets:t}=this.props;if(!e&&t&&t.length){const{orgID:e,name:n,id:a}=t[0];this.props.onSetBucketInfo(e,n,a)}this.props.onSetCurrentStepIndex(0)}render(){return o.a.createElement(d.Overlay,{visible:!0},o.a.createElement(d.Overlay.Container,{maxWidth:1200},o.a.createElement(d.Overlay.Header,{title:"Create a Telegraf Configuration",onDismiss:this.handleDismiss}),o.a.createElement(d.Overlay.Body,{className:"data-loading--overlay"},o.a.createElement(S,{stepProps:this.stepProps}))))}get stepProps(){const{notify:e,currentStepIndex:t,onDecrementCurrentStepIndex:n,onIncrementCurrentStepIndex:a}=this.props;return{currentStepIndex:t,onIncrementCurrentStepIndex:a,onDecrementCurrentStepIndex:n,notify:e,onExit:this.handleDismiss}}};k=Object(a.a)([u.a],k);const D={notify:m.c,onSetBucketInfo:p.d,onIncrementCurrentStepIndex:p.c,onDecrementCurrentStepIndex:p.b,onSetCurrentStepIndex:p.e,onClearDataLoaders:h.e,onClearSteps:p.a},C=Object(i.c)(e=>{const{dataLoading:{dataLoaders:{telegrafPlugins:t},steps:{currentStep:n,substep:a,bucket:r}},me:{name:o},telegrafEditor:s}=e,c=Object(y.a)(e,b.ResourceType.Buckets).filter(e=>!Object(f.e)(e.name)),i=Object(g.a)(e);return{telegrafPlugins:t,text:s.text,currentStepIndex:n,substep:a,username:o,bucket:r,buckets:c,org:i}},D);t.a=C(Object(l.j)(k))},764:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(7),s=n(4),c=n(155),i=n(3),l=n(324);class u extends a.PureComponent{constructor(e){super(e),this.handleNameValidation=e=>e?null:"Name cannot be empty",this.handleUrlValidation=e=>{if(!e)return"Target URL cannot be empty";return e.startsWith("http://")||e.startsWith("https://")?null:'Target URL must begin with "http://" or "https://"'}}render(){const{onInputChange:e,url:t,name:n,onSelectBucket:a,buckets:o,selectedBucketID:s,onSubmit:c,onDismiss:u}=this.props;return r.a.createElement(i.Form,{onSubmit:c},r.a.createElement(i.Grid,null,r.a.createElement(i.Grid.Row,null,r.a.createElement(i.Grid.Column,{widthSM:i.Columns.Six},r.a.createElement(i.Form.ValidationElement,{label:"Name",validationFunc:this.handleNameValidation,value:n},t=>r.a.createElement(i.Input,{value:n,name:"name",onChange:e,titleText:"Name",placeholder:"Name this scraper",autoFocus:!0,status:t}))),r.a.createElement(i.Grid.Column,{widthSM:i.Columns.Six},r.a.createElement(i.Form.Element,{label:"Bucket to store scraped metrics"},r.a.createElement(l.a,{selectedBucketID:s,buckets:o,onSelectBucket:a}))),r.a.createElement(i.Grid.Column,{widthSM:i.Columns.Twelve},r.a.createElement(i.Form.ValidationElement,{label:"Target URL",validationFunc:this.handleUrlValidation,value:t},n=>r.a.createElement(i.Input,{value:t,name:"url",placeholder:"http://",onChange:e,titleText:"Target URL",status:n})))),r.a.createElement(i.Grid.Row,null,r.a.createElement(i.Grid.Column,null,r.a.createElement(i.Form.Footer,null,r.a.createElement(i.Button,{text:"Cancel",onClick:u,testID:"create-scraper--cancel"}),r.a.createElement(i.Button,{status:this.submitButtonStatus,text:"Create",color:i.ComponentColor.Success,testID:"create-scraper--submit",type:i.ButtonType.Submit}))))))}get submitButtonStatus(){const{name:e,url:t,selectedBucketID:n}=this.props;return t&&e&&n?i.ComponentStatus.Default:i.ComponentStatus.Disabled}}var d=u,m=n(217),p=n(285),h=n(5),b=n(13);class y extends a.PureComponent{constructor(e){super(e),this.handleInputChange=e=>{const t=e.target.value,n=e.target.name,a=Object.assign(Object.assign({},this.state.scraper),{[n]:t});this.setState({scraper:a})},this.handleSelectBucket=e=>{const{orgID:t,id:n}=e,a=Object.assign(Object.assign({},this.state.scraper),{orgID:t,bucketID:n});this.setState({scraper:a})},this.handleFormSubmit=e=>{const{onCreateScraper:t}=this.props,{scraper:n}=this.state;e.preventDefault(),t(n),this.onDismiss()},this.onDismiss=()=>{this.props.history.goBack()};const{match:{params:{bucketID:t,orgID:n}},buckets:a}=this.props,r=Object(o.get)(a,"2.id","");this.state={scraper:{name:"Name this Scraper",type:p.d.TypeEnum.Prometheus,url:`${this.origin}/metrics`,orgID:n,bucketID:t||r}}}render(){const{scraper:e}=this.state,{buckets:t}=this.props;return r.a.createElement(i.Overlay,{visible:!0},r.a.createElement(i.Overlay.Container,{maxWidth:600},r.a.createElement(i.Overlay.Header,{title:"Create Scraper",onDismiss:this.onDismiss}),r.a.createElement(i.Overlay.Body,null,r.a.createElement("h5",{className:"wizard-step--sub-title"},"Scrapers collect data from multiple targets at regular intervals and to write to a bucket"),r.a.createElement(d,{buckets:t,url:e.url,name:e.name,selectedBucketID:e.bucketID,onInputChange:this.handleInputChange,onSelectBucket:this.handleSelectBucket,onSubmit:this.handleFormSubmit,onDismiss:this.onDismiss}))))}get origin(){return window.location.origin}}const g={onCreateScraper:m.a},f=Object(s.c)(e=>({buckets:Object(b.a)(e,h.ResourceType.Buckets)}),g);t.a=f(Object(c.j)(y))},769:function(e,t,n){"use strict";n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return E}));var a=n(137),r=n(16),o=n(8),s=n(130),c=n(186),i=n(185);const l=e=>({type:"SET_DEMODATA_STATUS",payload:{status:e}});var u=n(9),d=n(11),m=n(12),p=n(291),h=n(39),b=n(668),y=n(5);const g=()=>async(e,t)=>{const{cloud:{demoData:{status:n}}}=t();n===y.RemoteDataState.NotStarted&&e(l(y.RemoteDataState.Loading));try{e((e=>({type:"SET_DEMODATA_BUCKETS",payload:{buckets:e}}))(await Object(a.d)()))}catch(t){console.error(t),Object(s.b)(t,{name:"getDemoDataBuckets function"}),e(l(y.RemoteDataState.Error))}},f=({name:e,id:t})=>async(n,r)=>{const l=r(),{id:y}=Object(u.a)(l);try{await Object(a.c)(t);const e=await Object(a.e)(t);n(Object(i.e)(e))}catch(t){return n(Object(d.c)(Object(m.Bb)(e,Object(h.b)(t)))),void Object(s.b)(t,{name:"addDemoDataBucket failed in getDemoDataBucketMembership"})}try{const t=await p.c[e];if(!t)throw new Error("dashboard template was not found");const a=await Object(c.a)(t,y),r=e=>Object(b.d)(`/orgs/${y}/dashboards/${a.id}`,e);n(Object(d.c)(Object(m.Eb)(e,r))),Object(o.a)("demoData_bucketAdded",{demo_dataset:e})}catch(t){const a=Object(h.b)(t);n(Object(d.c)(Object(m.Bb)(e,a))),"creating dashboard would exceed quota"!=a&&Object(s.b)(t,{name:"addDemoDataDashboard failed in getDemoDataBucketMembership"})}},E=e=>async t=>{try{if(await Object(a.a)(e.id),200===(await Object(r.getBucket)({bucketID:e.id})).status)throw new Error("Request to remove demo data bucket did not succeed");t(Object(i.g)(e.id)),Object(o.a)("demoData_bucketDeleted",{demo_dataset:e.name})}catch(n){const a=Object(h.b)(n);t(Object(d.c)(Object(m.Db)(e.name,a))),Object(s.b)(n,{name:"deleteDemoDataBucket failed in deleteDemoDataBucketMembership"})}}},95:function(e,t,n){"use strict";var a=n(299).CopyToClipboard;a.CopyToClipboard=a,e.exports=a},954:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(155),s=n(95),c=n.n(s),i=n(4),l=n(12),u=n(3),d=n(82),m=n(769),p=n(11),h=n(23);const b={removeBucket:m.a,notify:p.c},y=Object(i.c)(null,b);t.a=y(Object(o.j)(({bucket:e,history:t,match:{params:{orgID:n}},removeBucket:a,notify:o})=>r.a.createElement(u.ResourceCard,{testID:`bucket-card ${e.name}`,contextMenu:r.a.createElement(d.e,{align:u.Alignment.Center},r.a.createElement(u.FlexBox,{alignItems:u.AlignItems.Center,direction:u.FlexDirection.Row,margin:u.ComponentSize.Small},r.a.createElement(d.e.Menu,{icon:u.IconFont.Trash,color:u.ComponentColor.Danger,shape:u.ButtonShape.Default,text:"Delete Bucket",testID:`context-delete-menu ${e.name}`},r.a.createElement(d.e.Item,{label:"Confirm",action:a,value:e,testID:`context-delete-bucket ${e.name}`}))))},r.a.createElement(u.ResourceCard.Name,{testID:`bucket--card--name ${e.name}`,onClick:()=>{Object(h.c)("exploreWithFlows")?t.push(`/notebook/from/bucket/${e.name}`):t.push(`/orgs/${n}/data-explorer?bucket=${e.name}`)},name:e.name}),r.a.createElement(u.ResourceCard.Meta,null,r.a.createElement("span",{className:"system-bucket",key:`system-bucket-indicator-${e.name}`},"Demo Data Bucket"),r.a.createElement(r.a.Fragment,null,"Retention: ",e.readableRetention),r.a.createElement(c.a,{text:e.id,onCopy:(e,t)=>{const n=`${e.slice(0,30).trimRight()}...`;o(t?Object(l.X)(n,"Bucket ID"):Object(l.W)(n,"Bucket ID"))}},r.a.createElement("span",{className:"copy-bucket-id",title:"Click to Copy to Clipboard"},"ID: ",e.id,r.a.createElement("span",{className:"copy-bucket-id--helper"},"Copy to Clipboard")))),r.a.createElement(u.FlexBox,{direction:u.FlexDirection.Row,margin:u.ComponentSize.Small,style:{marginTop:"4px"}},r.a.createElement(u.Label,{id:"1",key:"1",name:"No Cost",color:"#757888",description:"",onDelete:null,onClick:null})))))},955:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(3),s=n(72);t.a=()=>r.a.createElement(o.Panel,{gradient:o.Gradients.PolarExpress,border:!0},r.a.createElement(o.Panel.Header,null,r.a.createElement("h5",null,"What is a Bucket?")),r.a.createElement(o.Panel.Body,null,r.a.createElement("p",null,"A bucket is a named location where time series data is stored. All buckets have a ",r.a.createElement("b",null,"Retention Policy"),", a duration of time that each data point persists.",r.a.createElement("br",null),r.a.createElement("br",null),"Here's"," ",r.a.createElement("a",{href:`https://docs.influxdata.com/influxdb/${s.a}/write-data/`,target:"_blank",rel:"noreferrer"},"how to write data")," ","into your bucket.")))},956:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(4),s=n(7),c=n(769),i=n(3),l=n(5);const u={getDemoDataBucketMembership:c.b},d=Object(o.c)(e=>({ownBucketsByID:e.resources[l.ResourceType.Buckets].byID,demoDataBuckets:Object(s.get)(e,"cloud.demoData.buckets",[])}),u);t.a=d(({ownBucketsByID:e,demoDataBuckets:t,getDemoDataBucketMembership:n})=>{const l=Object(o.d)();if(Object(a.useEffect)(()=>{l(Object(c.c)())},[l]),!t.length)return null;const u=Object(s.sortBy)(t,e=>e.name.toLocaleLowerCase()).map(t=>e[t.id]?r.a.createElement(i.Dropdown.Item,{testID:`dropdown-item--demodata-${t.name}`,className:"demodata-dropdown--item__added",id:t.id,key:t.id,value:t,selected:!0},r.a.createElement("div",{className:"demodata-dropdown--item-contents"},r.a.createElement(i.Icon,{glyph:i.IconFont.Checkmark,className:"demodata-dropdown--item-icon"}),t.name)):r.a.createElement(i.Dropdown.Item,{testID:`dropdown-item--demodata-${t.name}`,className:"demodata-dropdown--item",id:t.id,key:t.id,value:t,onClick:n,selected:!1},r.a.createElement("div",{className:"demodata-dropdown--item-contents"},r.a.createElement(i.Icon,{glyph:i.IconFont.Checkmark,className:"demodata-dropdown--item-icon"}),t.name)));return r.a.createElement(i.Dropdown,{testID:"dropdown--demodata",style:{width:"220px"},className:"demodata-dropdown",button:(e,t)=>r.a.createElement(i.Dropdown.Button,{active:e,onClick:t,icon:i.IconFont.Plus,color:i.ComponentColor.Secondary,testID:"dropdown-button--demodata"},"Add Demo Data"),menu:e=>r.a.createElement(i.Dropdown.Menu,{onCollapse:e},u)})})},957:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(155),s=n(4),c=n(7),i=n(3),l=n(307),u=n(110),d=n(11),m=n(16),p=n(209),h=n(12),b=n(6),y=n(8),g=n(239);let f=null,E=null;b.f&&(f=n(41).MeasurementSchema,E=n(41).MeasurementSchemaCreateRequest);const S={onUpdateBucket:u.j,getSchema:u.g,onAddMeasurementSchemaToBucket:u.b};Object(s.c)(null,S);t.a=Object(s.c)(null,S)(Object(o.j)(({onUpdateBucket:e,getSchema:t,onAddMeasurementSchemaToBucket:n,match:o,history:u})=>{const{orgID:b,bucketID:f}=o.params,E=Object(s.d)(),[S,k]=Object(a.useState)(null),[D,C]=Object(a.useState)(i.RemoteDataState.Loading),[T,v]=Object(a.useState)(p.a),[O,x]=Object(a.useState)("implicit"),[I,w]=Object(a.useState)(null),[j,B]=Object(a.useState)(null),[A,N]=Object(a.useState)(!1),R=Object(a.useCallback)(()=>{u.push(`/orgs/${b}/load-data/buckets`)},[b,u]);Object(a.useEffect)(()=>{(async()=>{const e=await m.getBucket({bucketID:f});if(200!==e.status)return E(Object(d.c)(Object(h.Nb)(f,e.data.message))),void R();if(k(e.data),x(e.data.schemaType),"explicit"===e.data.schemaType){const e=await t(f);w(e)}const n=Object(c.get)(e.data,"retentionRules",[]).find(e=>"expire"===e.type);n&&v(n.everySeconds),C(i.RemoteDataState.Done)})()},[f,R,E]);const F=Object(c.get)(S,"retentionRules",[]).find(e=>"expire"===e.type),_=F?F.everySeconds:T,L=F?"expire":null;return r.a.createElement(i.Overlay,{visible:!0},r.a.createElement(i.Overlay.Container,{maxWidth:500},r.a.createElement(i.Overlay.Header,{title:"Edit Bucket",onDismiss:R}),r.a.createElement(i.SpinnerContainer,{spinnerComponent:r.a.createElement(i.TechnoSpinner,null),loading:D},r.a.createElement(i.Overlay.Body,null,r.a.createElement(l.a,{name:S?S.name:"",buttonText:"Save Changes",ruleType:L,onClose:R,onSubmit:t=>{t.preventDefault(),(()=>{const e=Object(g.b)(j);return e||(N(!0),!1)})()&&(e(S),(null==j?void 0:j.length)&&j.map(e=>{const t={columns:e.columns,name:e.name};Object(y.a)("bucket.schema.explicit.editing.uploadSchema"),n(S.id,S.orgID,S.name,t)}),R())},isEditing:!0,onChangeInput:e=>{const t=e.target.name,n=e.target.value;k(Object.assign(Object.assign({},S),{[t]:n}))},retentionSeconds:_,onChangeRuleType:e=>{k(e?Object.assign(Object.assign({},S),{retentionRules:[{type:"expire",everySeconds:T}]}):Object.assign(Object.assign({},S),{retentionRules:[]}))},onChangeRetentionRule:e=>{k(Object.assign(Object.assign({},S),{retentionRules:[{type:"expire",everySeconds:e}]})),v(e)},onClickRename:()=>{u.push(`/orgs/${b}/load-data/buckets/${f}/rename`)},onChangeSchemaType:e=>{k(Object.assign(Object.assign({},S),{schemaType:e}))},schemaType:O,measurementSchemaList:I,onUpdateNewMeasurementSchemas:(e,t)=>{B(e),t&&N(!1)},showSchemaValidation:A})))))}))}}]);
//# sourceMappingURL=38.55c62d8494.js.map