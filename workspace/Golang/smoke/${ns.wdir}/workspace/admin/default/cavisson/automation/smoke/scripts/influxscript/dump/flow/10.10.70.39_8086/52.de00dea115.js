(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{105:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return l}));var r=n(6);const o=e=>e.startsWith("_"),a=()=>r.f?650:450,s=1,i="create-a-bucket",l={id:i,name:"+ Create A Bucket"}},110:function(e,t,n){"use strict";var r=n(306).CopyToClipboard;r.CopyToClipboard=r,e.exports=r},116:function(e,t,n){"use strict";var r=n(14),o=n(2),a=n.n(o),s=n(8),i=n(3),l=n(15),c=n(42);let u=class extends o.Component{constructor(e){super(e),this.handleSearch=()=>{this.props.onSearch(this.state.searchTerm)},this.handleBlur=e=>{this.setState({searchTerm:e.target.value},this.handleSearch)},this.handleChange=e=>{this.setState({searchTerm:e.target.value},this.handleSearch)},this.clear=()=>{this.setState({searchTerm:""},this.handleSearch)},this.state={searchTerm:this.props.searchTerm}}componentDidUpdate(e){this.props.searchTerm!==e.searchTerm&&this.setState({searchTerm:this.props.searchTerm})}UNSAFE_componentWillMount(){this.handleSearch=Object(s.debounce)(this.handleSearch,50)}render(){const{placeholderText:e,testID:t,tabIndex:n=0,autoFocus:r,size:o}=this.props,{searchTerm:s}=this.state;return a.a.createElement(c.a,null,a.a.createElement(i.Input,{icon:i.IconFont.Search_New,placeholder:e,value:s,onChange:this.handleChange,onBlur:this.handleBlur,testID:t,className:"search-widget-input",tabIndex:n,onClear:this.clear,autoFocus:r,size:o}))}};u.defaultProps={widthPixels:440,placeholderText:"Search...",searchTerm:"",testID:"search-widget",autoFocus:!1,tabIndex:0,size:i.ComponentSize.Small},u=Object(r.a)([l.a,Object(r.b)("design:paramtypes",[Object])],u),t.a=u},123:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return p}));var r=n(2),o=n.n(r),a=n(4),s=n(3),i=n(145),l=n(13),c=n(10);const u=Object(r.createContext)({variables:{},update:e=>{},transform:e=>e}),d=(e,t)=>new Function("vars","var output="+JSON.stringify(e).replace(/<%=(.+?)%>/g,'"+(vars["$1".trim()])+"')+";return output;")(t),p=({variables:e,children:t})=>{const[n,a]=Object(r.useState)(e||{});return Object(r.useEffect)((()=>{e&&a(e)}),[e]),o.a.createElement(u.Provider,{value:{variables:n,update:a,transform:e=>d(e,n)}},t)};t.c=({text:e,label:t,testID:n,type:d,onCopy:p})=>{const{transform:m}=Object(r.useContext)(u),g=Object(a.d)(),f=m(e);return o.a.createElement("div",{className:"code-snippet","data-testid":n||"code-snippet"},o.a.createElement(s.DapperScrollbars,{autoHide:!1,autoSizeHeight:!0,className:"code-snippet--scroll"},o.a.createElement("div",{className:"code-snippet--text"},o.a.createElement("pre",null,o.a.createElement("code",null,f)))),o.a.createElement("div",{className:"code-snippet--footer"},o.a.createElement(i.a,{text:f,onCopy:()=>{"function"==typeof p&&p(),g(Object(c.c)(Object(l.Y)(`${f.slice(0,30).trimRight()}...`,null!=d?d:"Script")))}}),t&&o.a.createElement("label",{className:"code-snippet--label"},t)))}},145:function(e,t,n){"use strict";var r=n(2),o=n.n(r),a=n(110),s=n.n(a),i=n(3);class l extends r.PureComponent{constructor(){super(...arguments),this.handleClickCopy=e=>{e.stopPropagation(),e.preventDefault()},this.handleCopyAttempt=()=>{const{onCopy:e}=this.props;e&&e()}}render(){const{text:e,testID:t,size:n}=this.props;return o.a.createElement(s.a,{text:e,onCopy:this.handleCopyAttempt},o.a.createElement(i.Button,{shape:i.ButtonShape.Default,size:n||i.ComponentSize.ExtraSmall,color:i.ComponentColor.Secondary,titleText:"Copy to Clipboard",text:"Copy to Clipboard",onClick:this.handleClickCopy,testID:null!=t?t:"button-copy"}))}}t.a=l},161:function(e,t,n){"use strict";var r=n(2),o=n(6);t.a=class extends r.PureComponent{render(){const{children:e}=this.props;return o.f?null:e}}},169:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(5),o=n(11);const a=(e,t)=>Object(o.a)(e,r.ResourceType.Buckets).find((e=>e.name===t)),s=(e,t)=>{const n=`${e.name}`.toLowerCase(),r=`${t.name}`.toLowerCase();return n===r?0:n<r?-1:n>r?1:0},i=e=>{const t=[],n=[];return Object(o.a)(e,r.ResourceType.Buckets).forEach((e=>{"system"===e.type?t.push(e):n.push(e)})),t.sort(s),n.sort(s),n.concat(t)}},178:function(e,t,n){"use strict";n.d(t,"l",(function(){return O})),n.d(t,"e",(function(){return v})),n.d(t,"p",(function(){return I})),n.d(t,"n",(function(){return x})),n.d(t,"q",(function(){return j})),n.d(t,"a",(function(){return w})),n.d(t,"h",(function(){return k})),n.d(t,"k",(function(){return A})),n.d(t,"o",(function(){return N})),n.d(t,"d",(function(){return _})),n.d(t,"b",(function(){return R})),n.d(t,"c",(function(){return L})),n.d(t,"i",(function(){return F})),n.d(t,"f",(function(){return K})),n.d(t,"g",(function(){return U})),n.d(t,"j",(function(){return B})),n.d(t,"m",(function(){return G}));var r=n(8),o=n(25),a=n(323),s=n(55),i=n(294),l=n(693),c=n(342),u=n(169),d=n(11),p=n(9),m=n(7),g=n(553),f=n(290),y=n(5),h=n(315),b=n(322),S=n(10),C=n(13),D=n(12);let E,T;n(6).f||(E=n(12).postScraper,T=n(12).patchScraper);const O=e=>({type:"SET_DATA_LOADERS_TYPE",payload:{type:e}}),v=()=>({type:"CLEAR_DATA_LOADERS"}),I=e=>({type:"SET_TELEGRAF_CONFIG_NAME",payload:{name:e}}),x=e=>({type:"SET_TELEGRAF_CONFIG_DESCRIPTION",payload:{description:e}}),j=(e,t,n)=>({type:"UPDATE_TELEGRAF_PLUGIN_CONFIG",payload:{name:e,field:t,value:n}}),w=(e,t,n)=>({type:"ADD_TELEGRAF_PLUGIN_CONFIG_VALUE",payload:{pluginName:e,fieldName:t,value:n}}),k=(e,t,n)=>({type:"REMOVE_TELEGRAF_PLUGIN_CONFIG_VALUE",payload:{pluginName:e,fieldName:t,value:n}}),A=(e,t,n,r)=>({type:"SET_TELEGRAF_PLUGIN_CONFIG_VALUE",payload:{pluginName:e,field:t,valueIndex:n,value:r}}),N=e=>({type:"SET_TELEGRAF_CONFIG_ID",payload:{id:e}}),_=e=>({type:"ADD_TELEGRAF_PLUGINS",payload:{telegrafPlugins:e}}),P=e=>({type:"SET_TOKEN",payload:{token:e}}),R=e=>t=>{t((e=>({type:"ADD_PLUGIN_BUNDLE",payload:{bundle:e}}))(e));const n=g.d[e];t(_(n.map((e=>({name:e,active:!1,configured:g.e[e].fields?f.d.Unconfigured:f.d.Configured,templateID:g.e[e].templateID})))))},L=e=>t=>{t((e=>({type:"ADD_TELEGRAF_telegrafUiRefresh",payload:{plugin:e}}))(e)),t({type:"ADD_TELEGRAF_PLUGINS_telegrafUiRefresh",payload:{telegrafPlugins:e}})},F=e=>t=>{t((e=>({type:"REMOVE_PLUGIN_BUNDLE",payload:{bundle:e}}))(e)),t((e=>({type:"REMOVE_BUNDLE_PLUGINS",payload:{bundle:e}}))(e))},K=()=>async(e,t)=>{const{telegrafPlugins:n,telegrafConfigID:r,telegrafConfigName:a,telegrafConfigDescription:s}=Object(c.a)(t()),{name:u}=Object(p.a)(t()),{bucket:d}=Object(c.b)(t()),g={name:"influxdb_v2",type:"output",config:{urls:[`${window.location.origin}`],token:"$INFLUX_TOKEN",organization:u,bucket:d}},y=n.reduce(((e,t)=>t.configured===f.d.Configured?[...e,t.plugin||Object(l.a)(t)]:e),[g]);if(r){const t=await Object(D.putTelegraf)({telegrafID:r,data:{name:a,description:s,plugins:y}});if(200!==t.status)throw new Error(t.data.message);const n=t.data,l=Object(o.a)(n,i.b);return e(Object(h.g)(l)),e(N(r)),void Object(m.a)(`telegraf.config.${Object(m.c)(a)}.edit.success`,{id:null==n?void 0:n.id})}$(e,t,y)},U=e=>async(t,n)=>{let o="",s="";try{const i=n(),l=Object(p.a)(i).id,c=Object(d.f)(i,y.ResourceType.Telegrafs,e);if(o=c.name,s=Object(r.get)(c,"metadata.buckets[0]",""),""===s)throw new Error("An API token cannot be generated without a corresponding bucket; no buckets are assigned");const g=Object(u.a)(i,s);if(!g||!g.id)throw new Error(`there is no bucket present with name ${s}`);const f=[{action:"write",resource:{type:"buckets",id:g.id,orgID:l}},{action:"read",resource:{type:"telegrafs",id:e,orgID:l}}],h={name:`${c.name} token`,orgID:l,description:`WRITE ${s} bucket / READ ${c.name} telegraf config`,permissions:f},b=await Object(a.a)(h);Object(m.a)("token.create.success",{name:o,bucket:s}),t(P(b.token))}catch(e){if(console.error(e),Object(m.a)("token.create.failure",{name:o,bucket:s}),e.message){const n=Object.assign(Object.assign({},C.l),{message:`${C.l.message}: ${e.message}`});t(Object(S.c)(n))}else t(Object(S.c)(C.l))}},$=async(e,t,n)=>{let r="",l="";try{const u=t(),{telegrafConfigName:d,telegrafConfigDescription:g}=Object(c.a)(u);r=d;const{bucket:f,bucketID:y}=Object(c.b)(u);l=f;const E=Object(p.a)(t()),T={name:d,description:g,agent:{collectionInterval:1e4},orgID:E.id,plugins:n},O=await Object(D.postTelegraf)({data:T});if(201!==O.status)throw new Error(O.data.message);const v=O.data,I=[{action:"write",resource:{type:"buckets",id:y,orgID:E.id}},{action:"read",resource:{type:"telegrafs",id:v.id,orgID:E.id}}],x={name:`${d} token`,orgID:E.id,description:`WRITE ${f} bucket / READ ${d} telegraf config`,permissions:I},j=await Object(a.a)(x);e(P(j.token));const w=Object(o.a)(j,s.h);e(Object(b.g)(w));const k=Object(o.a)(v,i.b);e(N(v.id)),e(Object(h.f)(k)),e(Object(S.c)(C.i)),Object(m.a)(`telegraf.config.${Object(m.c)(r)}.create.success`,{id:v.id,bucket:l})}catch(t){Object(m.a)(`telegraf.config.${Object(m.c)(r)}.create.failure`,{bucket:l}),console.error(t.message),e(Object(S.c)(C.h))}},B=e=>({type:"SET_ACTIVE_TELEGRAF_PLUGIN",payload:{telegrafPlugin:e}}),G=e=>({type:"SET_PLUGIN_CONFIGURATION_STATE",payload:{telegrafPlugin:e}})},182:function(e,t,n){"use strict";var r=n(2),o=n.n(r),a=n(3),s=n(109),i=n(5);t.a=function({sortDirection:e,sortKey:t,sortType:n,onSelect:r,resourceType:l,width:c=210}){const u=(e=>{switch(e){case i.ResourceType.Dashboards:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:a.Sort.Descending},{label:"Modified (Oldest)",sortKey:"meta.updatedAt",sortType:s.a.Date,sortDirection:a.Sort.Ascending},{label:"Modified (Newest)",sortKey:"meta.updatedAt",sortType:s.a.Date,sortDirection:a.Sort.Descending}];case i.ResourceType.Tasks:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:a.Sort.Descending},{label:"Active",sortKey:"status",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Inactive",sortKey:"status",sortType:s.a.String,sortDirection:a.Sort.Descending},{label:"Completed (Oldest)",sortKey:"latestCompleted",sortType:s.a.Date,sortDirection:a.Sort.Ascending},{label:"Completed (Newest)",sortKey:"latestCompleted",sortType:s.a.Date,sortDirection:a.Sort.Descending},{label:"Schedule (Most Often)",sortKey:"every",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Schedule (Least Often)",sortKey:"every",sortType:s.a.String,sortDirection:a.Sort.Descending}];case i.ResourceType.Variables:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:a.Sort.Descending},{label:"Type (A → Z)",sortKey:"arguments.type",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Type (Z → A)",sortKey:"arguments.type",sortType:s.a.String,sortDirection:a.Sort.Descending}];case i.ResourceType.Secrets:return[{label:"Name (A → Z)",sortKey:"id",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Name (Z → A)",sortKey:"id",sortType:s.a.String,sortDirection:a.Sort.Descending}];case i.ResourceType.Labels:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:a.Sort.Descending},{label:"Description (A → Z)",sortKey:"properties.description",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Description (Z → A)",sortKey:"properties.description",sortType:s.a.String,sortDirection:a.Sort.Descending}];case i.ResourceType.Templates:return[{label:"Name (A → Z)",sortKey:"meta.name",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Name (Z → A)",sortKey:"meta.name",sortType:s.a.String,sortDirection:a.Sort.Descending},{label:"Description (A → Z)",sortKey:"meta.description",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Description (Z → A)",sortKey:"meta.description",sortType:s.a.String,sortDirection:a.Sort.Descending}];case i.ResourceType.Buckets:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:a.Sort.Descending},{label:"Retention (Ascending)",sortKey:"retentionRules[0].everySeconds",sortType:s.a.Float,sortDirection:a.Sort.Ascending},{label:"Retention (Descending)",sortKey:"retentionRules[0].everySeconds",sortType:s.a.Float,sortDirection:a.Sort.Descending}];case i.ResourceType.Telegrafs:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:a.Sort.Descending},{label:"Description (Ascending)",sortKey:"description",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Description (Descending)",sortKey:"description",sortType:s.a.String,sortDirection:a.Sort.Descending}];case i.ResourceType.Scrapers:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:a.Sort.Descending},{label:"URL (Ascending)",sortKey:"url",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"URL (Descending)",sortKey:"url",sortType:s.a.String,sortDirection:a.Sort.Descending},{label:"Bucket (Ascending)",sortKey:"bucket",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Bucket (Descending)",sortKey:"bucket",sortType:s.a.String,sortDirection:a.Sort.Descending}];case i.ResourceType.Authorizations:return[{label:"Description (A → Z)",sortKey:"description",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Description (Z → A)",sortKey:"description",sortType:s.a.String,sortDirection:a.Sort.Descending},{label:"Status (Active)",sortKey:"status",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Status (Inactive)",sortKey:"status",sortType:s.a.String,sortDirection:a.Sort.Descending},{label:"Date Created (Oldest)",sortKey:"createdAt",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Date Created (Newest)",sortKey:"createdAt",sortType:s.a.String,sortDirection:a.Sort.Descending}];case i.ResourceType.Flows:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:a.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:a.Sort.Descending},{label:"Created (Oldest)",sortKey:"createdAt",sortType:s.a.Date,sortDirection:a.Sort.Ascending},{label:"Created (Newest)",sortKey:"createdAt",sortType:s.a.Date,sortDirection:a.Sort.Descending}]}})(l),{label:d}=u.find((r=>r.sortKey===t&&r.sortDirection===e&&r.sortType===n)),p=e=>{const{sortKey:t,sortDirection:n,sortType:o}=e;r(t,n,o)};return o.a.createElement(a.Dropdown,{button:(e,t)=>o.a.createElement(a.Dropdown.Button,{onClick:t,active:e,testID:"resource-sorter--button"},`Sort by ${d}`),menu:r=>o.a.createElement(a.Dropdown.Menu,{onCollapse:r},u.map((r=>o.a.createElement(a.Dropdown.Item,{key:`${r.sortKey}${r.sortDirection}`,value:r,onClick:p,testID:`resource-sorter--${r.sortKey}-${r.sortDirection}`,selected:r.sortKey===t&&r.sortType===n&&r.sortDirection===e},r.label)))),style:{flexBasis:`${c}px`,width:`${c}px`},testID:"resource-sorter"})}},240:function(e,t,n){"use strict";var r=n(2),o=n.n(r);t.a=({childrenLeft:e,childrenRight:t,width:n})=>{let r=o.a.createElement(o.a.Fragment,null),a=o.a.createElement(o.a.Fragment,null);return e&&(r=o.a.createElement("div",{className:"tabbed-page--header-left"},e)),t&&(a=o.a.createElement("div",{className:"tabbed-page--header-right"},t)),n?o.a.createElement("div",{className:"tabbed-page--header","data-testid":"tabbed-page--header",style:{width:n}},r,a):o.a.createElement("div",{className:"tabbed-page--header","data-testid":"tabbed-page--header"},r,a)}},2538:function(e,t,n){"use strict";n.r(t);var r=n(14),o=n(2),a=n.n(o),s=n(184),i=n(15),l=n(350),c=n(341),u=n(8),d=n(4),p=n(3),m=n(116),g=n(240),f=n(351),y=n(21),h=n(348),b=n(146),S=n(9),C=n(128),D=n(62);class E extends o.PureComponent{constructor(){super(...arguments),this.handleUpdateName=e=>{const{onUpdate:t,collector:n}=this.props;t(Object.assign(Object.assign({},n),{name:e}))},this.handleUpdateDescription=e=>{const{onUpdate:t,collector:n}=this.props;t(Object.assign(Object.assign({},n),{description:e}))},this.handleAddLabel=async e=>{const{collector:t,onAddLabel:n}=this.props;await n(t.id,e)},this.handleRemoveLabel=async e=>{const{collector:t,onRemoveLabel:n}=this.props;await n(t.id,e)},this.handleNameClick=e=>{e.preventDefault(),this.handleOpenConfig()},this.handleOpenConfig=()=>{const{collector:e,history:t,org:n}=this.props;t.push(`/orgs/${n.id}/load-data/telegrafs/${e.id}/view`)},this.cloneTelegraf=()=>{const e=Object.values(this.props.telegrafs).map((e=>e.name));this.props.onCloneTelegraf(Object.assign(Object.assign({},this.props.collector),{name:Object(D.a)(e,this.props.collector.name)}))},this.handleDeleteConfig=()=>{this.props.onDelete(this.props.collector)}}render(){const{collector:e,org:t}=this.props;return a.a.createElement(p.ResourceCard,{key:`telegraf-id--${e.id}`,testID:"resource-card",contextMenu:this.contextMenu},a.a.createElement(p.ResourceCard.EditableName,{onUpdate:this.handleUpdateName,onClick:this.handleNameClick,name:e.name,noNameString:C.d,testID:"collector-card--name",buttonTestID:"collector-card--name-button",inputTestID:"collector-card--input"}),a.a.createElement(p.ResourceCard.EditableDescription,{onUpdate:this.handleUpdateDescription,description:e.description,placeholder:`Describe ${e.name}`}),a.a.createElement(p.ResourceCard.Meta,null,a.a.createElement("span",{key:`bucket-key--${e.id}`,"data-testid":"bucket-name"},"Bucket: ",e.metadata.buckets.join(", ")),a.a.createElement(y.a,{to:`/orgs/${t.id}/load-data/telegrafs/${e.id}/instructions`,"data-testid":"setup-instructions-link"},"Setup Instructions")),this.labels)}get contextMenu(){const e=Object(o.createRef)();return a.a.createElement(p.FlexBox,{margin:p.ComponentSize.ExtraSmall},a.a.createElement(p.ConfirmationButton,{color:p.ComponentColor.Colorless,icon:p.IconFont.Trash_New,shape:p.ButtonShape.Square,size:p.ComponentSize.ExtraSmall,confirmationLabel:"Yes, delete this configuration",onConfirm:this.handleDeleteConfig,confirmationButtonText:"Confirm",testID:"context-delete-menu"}),a.a.createElement(p.SquareButton,{ref:e,size:p.ComponentSize.ExtraSmall,icon:p.IconFont.CogSolid_New,color:p.ComponentColor.Colorless,testID:"context-menu-telegraf"}),a.a.createElement(p.Popover,{appearance:p.Appearance.Outline,enableDefaultStyles:!1,style:{minWidth:"80px"},contents:()=>a.a.createElement(p.List,null,a.a.createElement(p.List.Item,{onClick:this.cloneTelegraf,size:p.ComponentSize.Small,style:{fontWeight:500},testID:"context-clone-telegraf"},"Clone")),triggerRef:e}))}get labels(){const{collector:e,onFilterChange:t}=this.props;return a.a.createElement(h.a,{selectedLabelIDs:e.labels,onFilterChange:t,onAddLabel:this.handleAddLabel,onRemoveLabel:this.handleRemoveLabel})}}const T={onCloneTelegraf:b.b,onAddLabel:b.a,onRemoveLabel:b.f};var O=Object(d.c)((e=>({org:Object(S.a)(e),telegrafs:e.resources.telegrafs.byID})),T)(Object(s.j)(E)),v=n(136),I=n(109),x=n(5),j=n(11);class w extends o.PureComponent{constructor(){super(...arguments),this.memGetSortedResources=Object(f.a)(I.b)}render(){const{emptyState:e}=this.props;return a.a.createElement(p.ResourceList,null,a.a.createElement(p.ResourceList.Body,{emptyState:e},this.collectorsList))}get collectorsList(){const{collectors:e,sortKey:t,sortDirection:n,sortType:r,onDeleteTelegraf:o,onUpdateTelegraf:s,onFilterChange:i}=this.props,l=this.memGetSortedResources(e,t,n,r);if(void 0!==e)return l.map((e=>a.a.createElement(O,{key:e.id,collector:e,onDelete:e=>o(e.id,e.name),onUpdate:s,onFilterChange:i})))}}const k={onUpdateTelegraf:b.g,onDeleteTelegraf:b.c},A=Object(v.a)();class N extends o.PureComponent{render(){const{searchTerm:e,collectors:t,emptyState:n,onFilterChange:r,sortKey:o,sortDirection:s,sortType:i,onUpdateTelegraf:l,onDeleteTelegraf:c}=this.props;return a.a.createElement(A,{searchTerm:e,searchKeys:["metadata.buckets[]","name","labels[].name"],list:t},(e=>a.a.createElement(w,{collectors:e,emptyState:n,onFilterChange:r,sortKey:o,sortDirection:s,sortType:i,onUpdateTelegraf:l,onDeleteTelegraf:c})))}}const _=Object(d.c)((e=>({collectors:Object(j.a)(e,x.ResourceType.Telegrafs)})),k)(N);var P=n(76);var R=({hasNoTelegrafs:e=!1,textAlign:t="inherit",bodySize:n})=>a.a.createElement(p.Panel,{gradient:p.Gradients.PolarExpress,border:!0,style:{textAlign:t}},e&&a.a.createElement(p.EmptyState.Text,{style:{color:p.InfluxColors.Grey85,marginTop:16}},"What is Telegraf?"),!e&&a.a.createElement(p.Panel.Header,null,a.a.createElement("h5",null,"What is Telegraf?")),a.a.createElement(p.Panel.Body,{size:n},"Telegraf is an agent written in Go for collecting metrics and writing them into ",a.a.createElement("strong",null,"InfluxDB")," or other possible outputs.",a.a.createElement("br",null),a.a.createElement("br",null),"Here's a handy guide for"," ",a.a.createElement("a",{href:`https://docs.influxdata.com/influxdb/${P.a}/write-data/no-code/use-telegraf/`,target:"_blank",rel:"noreferrer"},"Getting Started with Telegraf"))),L=n(987),F=n(98),K=n(182),U=n(178),$=n(7);let B=class extends o.PureComponent{constructor(e){super(e),this.handleSort=(e,t,n)=>{this.setState({sortKey:e,sortDirection:t,sortType:n})},this.handleAddCollector=()=>{const{history:e,match:{params:{orgID:t}}}=this.props;e.push(`/orgs/${t}/load-data/telegrafs/new`),Object($.a)("load_data.telegrafs.create_new_configuration.clicked")},this.handleJustTheOutput=()=>{const{history:e,match:{params:{orgID:t}}}=this.props;e.push(`/orgs/${t}/load-data/telegrafs/output`),Object($.a)("load_data.telegrafs.influxdb_output_plugin_button.clicked")},this.handleFilterChange=e=>{this.handleFilterUpdate(e)},this.handleFilterUpdate=e=>{this.setState({searchTerm:e})},this.state={dataLoaderOverlay:x.OverlayState.Closed,searchTerm:"",instructionsOverlay:x.OverlayState.Closed,collectorID:null,sortKey:"name",sortDirection:p.Sort.Ascending,sortType:I.a.String}}render(){const{hasTelegrafs:e}=this.props,{searchTerm:t,sortKey:n,sortDirection:r,sortType:o}=this.state,s=a.a.createElement(a.a.Fragment,null,a.a.createElement(m.a,{placeholderText:"Filter telegraf configurations...",searchTerm:t,onSearch:this.handleFilterChange}),a.a.createElement(K.a,{resourceType:x.ResourceType.Telegrafs,sortDirection:r,sortKey:n,sortType:o,onSelect:this.handleSort})),i=a.a.createElement(a.a.Fragment,null,a.a.createElement(p.Button,{text:"InfluxDB Output Plugin",icon:p.IconFont.Eye_New,color:p.ComponentColor.Secondary,onClick:this.handleJustTheOutput,titleText:"Output section of telegraf.conf for V2",testID:"button--output-only"}),this.createButton);return a.a.createElement(a.a.Fragment,null,a.a.createElement(L.a,{visible:this.hasNoBuckets,resourceName:"Telegraf Configurations"}),a.a.createElement(g.a,{childrenLeft:s,childrenRight:i}),a.a.createElement(p.Grid,null,a.a.createElement(p.Grid.Row,null,a.a.createElement(p.Grid.Column,{widthXS:p.Columns.Twelve,widthSM:e?p.Columns.Eight:p.Columns.Twelve,widthMD:e?p.Columns.Ten:p.Columns.Twelve},a.a.createElement(F.a,{resources:[x.ResourceType.Labels]},a.a.createElement(_,{searchTerm:t,emptyState:this.emptyState,onFilterChange:this.handleFilterUpdate,sortKey:n,sortDirection:r,sortType:o}))),e&&a.a.createElement(p.Grid.Column,{widthXS:p.Columns.Twelve,widthSM:p.Columns.Four,widthMD:p.Columns.Two},a.a.createElement(R,null)))))}get hasNoBuckets(){const{buckets:e}=this.props;return!e||!e.length}get createButton(){let e=p.ComponentStatus.Default,t="Create a new Telegraf Configuration";return this.hasNoBuckets&&(e=p.ComponentStatus.Disabled,t="You need at least 1 bucket in order to create a Telegraf Configuration"),a.a.createElement(p.Button,{text:"Create Configuration",icon:p.IconFont.Plus_New,color:p.ComponentColor.Primary,onClick:this.handleAddCollector,status:e,titleText:t,testID:"create-telegraf-configuration-button"})}get emptyState(){const{orgName:e}=this.props,{searchTerm:t}=this.state;return Object(u.isEmpty)(t)?a.a.createElement(p.EmptyState,{size:p.ComponentSize.Medium},a.a.createElement(p.EmptyState.Text,null,`${e}`," does not own any ",a.a.createElement("b",null,"Telegraf Configurations"),", why not create one?"),this.createButton,a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(R,{hasNoTelegrafs:!0,textAlign:"center",bodySize:p.ComponentSize.Medium})):a.a.createElement(p.EmptyState,{size:p.ComponentSize.Medium},a.a.createElement(p.EmptyState.Text,null,"No ",a.a.createElement("b",null,"Telegraf Configurations")," match your query"))}};B=Object(r.a)([i.a,Object(r.b)("design:paramtypes",[Object])],B);const G={onSetTelegrafConfigID:U.o,onSetTelegrafConfigName:U.p,onClearDataLoaders:U.e,onUpdateTelegraf:b.g,onDeleteTelegraf:b.c};var M=Object(d.c)((e=>{const{telegrafs:t}=e.resources,n=Object(S.a)(e).name,r=Object(j.a)(e,x.ResourceType.Buckets);return{hasTelegrafs:!!t.allIDs.length,orgName:n,buckets:r}}),G)(Object(s.j)(B)),z=n(386),Z=n(686);let V=class extends o.PureComponent{constructor(){super(...arguments),this.handleDismiss=()=>{const{history:e,match:{params:{orgID:t}},onClearDataLoaders:n}=this.props;this.setState({collectorID:null}),n(),e.push(`/orgs/${t}/load-data/telegrafs/`)}}render(){const{token:e}=this.props;return a.a.createElement(p.Overlay,{visible:!0},a.a.createElement(p.Overlay.Container,{maxWidth:700},a.a.createElement(p.Overlay.Header,{title:"Telegraf Setup Instructions",onDismiss:this.handleDismiss}),a.a.createElement(p.Overlay.Body,null,a.a.createElement(F.a,{resources:[x.ResourceType.Authorizations]},a.a.createElement(Z.a,{token:e,configID:Object(u.get)(this.collector,"id","")})))))}get collector(){const{match:{params:{id:e}},collectors:t}=this.props;return t.find((t=>t.id===e))}};V=Object(r.a)([i.a],V);const W={onClearDataLoaders:U.e};var H=Object(d.c)((e=>{const{me:{name:t}}=e;return{username:t,token:Object(j.i)(e),collectors:Object(j.a)(e,x.ResourceType.Telegrafs)}}),W)(Object(s.j)(V)),q=n(762),X=n(545),Y=n.n(X),J=n(292),Q=n(988),ee=n(10),te=n(311),ne=n(105);const re=Y()({loader:()=>Promise.all([n.e(13),n.e(18),n.e(71)]).then(n.bind(null,2647)),loading:()=>a.a.createElement(J.a,null)});let oe=class extends o.PureComponent{constructor(){super(...arguments),this.state={pluginConfig:"",isValidConfiguration:!1,isVisible:!0},this.handleDismiss=()=>{const{history:e,org:t}=this.props,{clearDataLoaders:n,onClearSteps:r}=this.props;n(),r(),this.setState({isVisible:!1}),e.push(`/orgs/${t.id}/load-data/telegrafs`)},this.handleSetIsValidConfiguration=e=>{this.setState({isValidConfiguration:e})},this.handleSetPluginConfig=e=>{this.setState({pluginConfig:e})}}componentDidMount(){this.props.clearDataLoaders(),this.props.onSetCurrentStepIndex(0),this.props.onSetSubstepIndex(0,0),this.props.setBucketInfo("","","")}render(){const{currentStepIndex:e,substepIndex:t}=this.props;let n="data-loading--overlay",r=1200;return 0===e&&1===t&&(r=Object(ne.d)()),(0===e&&1===t||1===e)&&(n=""),a.a.createElement(p.Overlay,{visible:this.state.isVisible},a.a.createElement(p.Overlay.Container,{maxWidth:r},a.a.createElement(p.Overlay.Header,{title:"Create a Telegraf Configuration",onDismiss:this.handleDismiss}),a.a.createElement(p.Overlay.Body,{className:n},a.a.createElement(re,{stepProps:this.stepProps})),a.a.createElement(Q.a,Object.assign({},this.stepProps))))}get stepProps(){const{currentStepIndex:e,notify:t,onDecrementCurrentStepIndex:n,onIncrementCurrentStepIndex:r,onSetSubstepIndex:o,substepIndex:a,telegrafPlugins:s}=this.props,i=(null==s?void 0:s.length)?s[0].name:"";return{currentStepIndex:e,isValidConfiguration:this.state.isValidConfiguration,notify:t,onDecrementCurrentStepIndex:n,onExit:this.handleDismiss,onIncrementCurrentStepIndex:r,onSetSubstepIndex:o,pluginConfig:this.state.pluginConfig,pluginConfigName:i,setIsValidConfiguration:this.handleSetIsValidConfiguration,setPluginConfig:this.handleSetPluginConfig,substepIndex:a}}};oe=Object(r.a)([i.a],oe);const ae={notify:ee.c,clearDataLoaders:U.e,onClearSteps:te.a,onDecrementCurrentStepIndex:te.b,onIncrementCurrentStepIndex:te.c,onSetCurrentStepIndex:te.e,onSetSubstepIndex:te.f,setBucketInfo:te.d};var se=Object(d.c)((e=>{const{dataLoading:{dataLoaders:{telegrafPlugins:t},steps:{currentStep:n,substep:r=0,bucket:o}},me:{name:a},telegrafEditor:s}=e,i=Object(j.a)(e,x.ResourceType.Buckets).filter((e=>!Object(ne.e)(e.name))),l=Object(S.a)(e);return{telegrafPlugins:t,text:s.text,currentStepIndex:n,substepIndex:"number"==typeof r?r:0,username:a,bucket:o,buckets:i,org:l}}),ae)(Object(s.j)(oe)),ie=n(337),le=n(63),ce=n(24),ue=n(193);const de=Object(ie.a)(ie.b,"telegraf-config",((e,t)=>{e.push(`/orgs/${t.orgID}/load-data/telegrafs`)})),pe=Object(ie.a)(ie.b,"telegraf-output",((e,t)=>{e.push(`/orgs/${t.orgID}/load-data/telegrafs`)})),me=`/${ue.m}/${ue.n}/load-data/${ue.s}`;let ge=class extends o.PureComponent{render(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(p.Page,{titleTag:Object(le.a)(["Telegraf","Load Data"])},a.a.createElement(z.a,null,a.a.createElement(c.a,null),a.a.createElement(l.a,{activeTab:"telegrafs"},a.a.createElement(F.a,{resources:[x.ResourceType.Buckets,x.ResourceType.Telegrafs]},a.a.createElement(M,null))))),a.a.createElement(s.c,null,a.a.createElement(s.a,{path:`${me}/:id/view`,component:de}),a.a.createElement(s.a,{path:`${me}/:id/instructions`,component:H}),a.a.createElement(s.a,{path:`${me}/output`,component:pe}),a.a.createElement(s.a,{path:`${me}/new`,component:Object(ce.c)("telegrafUiRefresh")?se:q.a})))}};ge=Object(r.a)([i.a],ge);t.default=ge},306:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var r=a(n(2)),o=a(n(307));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?m(e):t}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){function t(){var e,n;c(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return f(m(n=d(this,(e=p(t)).call.apply(e,[this].concat(s)))),"onClick",(function(e){var t=n.props,a=t.text,s=t.onCopy,i=t.children,l=t.options,c=r.default.Children.only(i),u=(0,o.default)(a,l);s&&s(a,u),c&&c.props&&"function"==typeof c.props.onClick&&c.props.onClick(e)})),n}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,a=[{key:"render",value:function(){var e=this.props,t=(e.text,e.onCopy,e.options,e.children),n=l(e,["text","onCopy","options","children"]),o=r.default.Children.only(t);return r.default.cloneElement(o,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{onClick:this.onClick}))}}],a&&u(n.prototype,a),s&&u(n,s),t}(r.default.PureComponent);t.CopyToClipboard=y,f(y,"defaultProps",{onCopy:void 0,options:void 0})},307:function(e,t,n){"use strict";var r=n(308),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,a,s,i,l,c,u=!1;t||(t={}),n=t.debug||!1;try{if(s=r(),i=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var a=o[t.format]||o.default;window.clipboardData.setData(a,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(c),i.selectNodeContents(c),l.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),a=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(a,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(i):l.removeAllRanges()),c&&document.body.removeChild(c),s()}return u}},308:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},311:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return l}));const r=()=>({type:"CLEAR_STEPS"}),o=()=>({type:"INCREMENT_CURRENT_STEP_INDEX"}),a=()=>({type:"DECREMENT_CURRENT_STEP_INDEX"}),s=e=>({type:"SET_CURRENT_STEP_INDEX",payload:{index:e}}),i=(e,t)=>({type:"SET_SUBSTEP_INDEX",payload:{stepIndex:e,substep:t}}),l=(e,t,n)=>({type:"SET_BUCKET_INFO",payload:{orgID:e,bucket:t,bucketID:n}})},337:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),o=n.n(r),a=n(184),s=n(4),i=n(34);const l=Object(a.j)((e=>{const{overlayID:t,onClose:n,match:o,history:a}=e,l=Object(s.d)();return Object(r.useEffect)((()=>(l(Object(i.d)(t,o.params,(()=>{n(a,o.params)}))),()=>{l(Object(i.b)())})),[t]),null}));function c(e,t,n){return class extends r.Component{render(){return o.a.createElement(e,Object.assign({},this.props,{onClose:n,overlayID:t}))}}}t.b=l},341:function(e,t,n){"use strict";var r=n(2),o=n.n(r),a=n(3),s=n(89);t.a=()=>o.a.createElement(a.Page.Header,{fullWidth:!1,testID:"load-data--header"},o.a.createElement(a.Page.Title,{title:"Load Data"}),o.a.createElement(s.a,null))},342:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));const r=e=>e.dataLoading.dataLoaders,o=e=>e.dataLoading.steps},350:function(e,t,n){"use strict";var r=n(2),o=n.n(r),a=n(4),s=n(42),i=n(14),l=n(184),c=n(3),u=n(24),d=n(15),p=n(161);let m=class extends r.PureComponent{render(){const{activeTab:e,orgID:t,history:n}=this.props,r=e=>{n.push(`/orgs/${t}/load-data/${e}`)},a=[{text:"Sources",id:"sources",cloudExclude:!1,featureFlag:null},{text:"Buckets",id:"buckets",cloudExclude:!1,featureFlag:null},{text:"Telegraf",id:"telegrafs",cloudExclude:!1,featureFlag:null},{text:"Scrapers",id:"scrapers",cloudExclude:!0,featureFlag:null},{text:"API Tokens",id:"tokens",cloudExclude:!1,featureFlag:null}],s=a.find((t=>t.id===e)).text;return o.a.createElement(c.Tabs,{orientation:c.Orientation.Horizontal,size:c.ComponentSize.Large,dropdownBreakpoint:872,dropdownLabel:s},a.map((t=>{let n=o.a.createElement(c.Tabs.Tab,{testID:`${t.id}--tab`,key:t.id,text:t.text,id:t.id,onClick:r,active:t.id===e});return t.cloudExclude&&(n=o.a.createElement(p.a,{key:t.id},n)),t.featureFlag&&(n=o.a.createElement(u.a,{key:t.id,name:t.featureFlag},n)),n})))}};m=Object(i.a)([d.a],m);var g=Object(l.j)(m),f=n(9);const y=e=>("buckets"!==e||!Object(u.c)("fetchAllBuckets"))&&("tokens"!==e||!Object(u.c)("paginatedTokens")),h=Object(a.c)((e=>({orgID:Object(f.a)(e).id})));t.a=h((({activeTab:e,orgID:t,children:n})=>o.a.createElement(c.Page.Contents,{fullWidth:!1,scrollable:y(e),scrollbarSize:c.ComponentSize.Large,autoHideScrollbar:!0},o.a.createElement(c.Tabs.Container,{orientation:c.Orientation.Horizontal,stretchToFitHeight:!0},o.a.createElement(g,{activeTab:e,orgID:t}),o.a.createElement(s.a,null,o.a.createElement(c.Tabs.TabContents,null,n))))))},386:function(e,t,n){"use strict";var r=n(2),o=n(4),a=n(6),s=n(36);class i extends r.PureComponent{componentDidMount(){a.f&&this.props.getReadWriteCardinalityLimits()}render(){return this.props.children}}const l={getReadWriteCardinalityLimits:s.i},c=Object(o.c)(null,l);t.a=c(i)},545:function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(2),l=n(61),c=[],u=[];function d(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then((function(e){return n.loading=!1,n.loaded=e,e})).catch((function(e){throw n.loading=!1,n.error=e,e})),n}function p(e){var t={loading:!1,loaded:{},error:null},n=[];try{Object.keys(e).forEach((function(r){var o=d(e[r]);o.loading?t.loading=!0:(t.loaded[r]=o.loaded,t.error=o.error),n.push(o.promise),o.promise.then((function(e){t.loaded[r]=e})).catch((function(e){t.error=e}))}))}catch(e){t.error=e}return t.promise=Promise.all(n).then((function(e){return t.loading=!1,e})).catch((function(e){throw t.loading=!1,e})),t}function m(e,t){return i.createElement((n=e)&&n.__esModule?n.default:n,t);var n}function g(e,t){var d,p;if(!t.loading)throw new Error("react-loadable requires a `loading` component");var g=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:m,webpack:null,modules:null},t),f=null;function y(){return f||(f=e(g.loader)),f.promise}return c.push(y),"function"==typeof g.webpack&&u.push((function(){if(e=g.webpack,"object"===r(n.m)&&e().every((function(e){return void 0!==e&&void 0!==n.m[e]})))return y();var e})),p=d=function(t){function n(r){o(this,n);var s=a(this,t.call(this,r));return s.retry=function(){s.setState({error:null,loading:!0,timedOut:!1}),f=e(g.loader),s._loadModule()},y(),s.state={error:f.error,pastDelay:!1,timedOut:!1,loading:f.loading,loaded:f.loaded},s}return s(n,t),n.preload=function(){return y()},n.prototype.componentWillMount=function(){this._mounted=!0,this._loadModule()},n.prototype._loadModule=function(){var e=this;if(this.context.loadable&&Array.isArray(g.modules)&&g.modules.forEach((function(t){e.context.loadable.report(t)})),f.loading){"number"==typeof g.delay&&(0===g.delay?this.setState({pastDelay:!0}):this._delay=setTimeout((function(){e.setState({pastDelay:!0})}),g.delay)),"number"==typeof g.timeout&&(this._timeout=setTimeout((function(){e.setState({timedOut:!0})}),g.timeout));var t=function(){e._mounted&&(e.setState({error:f.error,loaded:f.loaded,loading:f.loading}),e._clearTimeouts())};f.promise.then((function(){t()})).catch((function(e){t()}))}},n.prototype.componentWillUnmount=function(){this._mounted=!1,this._clearTimeouts()},n.prototype._clearTimeouts=function(){clearTimeout(this._delay),clearTimeout(this._timeout)},n.prototype.render=function(){return this.state.loading||this.state.error?i.createElement(g.loading,{isLoading:this.state.loading,pastDelay:this.state.pastDelay,timedOut:this.state.timedOut,error:this.state.error,retry:this.retry}):this.state.loaded?g.render(this.state.loaded,this.props):null},n}(i.Component),d.contextTypes={loadable:l.shape({report:l.func.isRequired})},p}function f(e){return g(d,e)}f.Map=function(e){if("function"!=typeof e.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return g(p,e)};var y=function(e){function t(){return o(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.getChildContext=function(){return{loadable:{report:this.props.report}}},t.prototype.render=function(){return i.Children.only(this.props.children)},t}(i.Component);function h(e){for(var t=[];e.length;){var n=e.pop();t.push(n())}return Promise.all(t).then((function(){if(e.length)return h(e)}))}y.propTypes={report:l.func.isRequired},y.childContextTypes={loadable:l.shape({report:l.func.isRequired}).isRequired},f.Capture=y,f.preloadAll=function(){return new Promise((function(e,t){h(c).then(e,t)}))},f.preloadReady=function(){return new Promise((function(e,t){h(u).then(e,e)}))},e.exports=f},686:function(e,t,n){"use strict";var r=n(14),o=n(2),a=n.n(o),s=n(15),i=n(123),l=n(4),c=n(3),u=n(145),d=n(13),p=n(178),m=n(10);var g=({configID:e,label:t="Code Snippet",testID:n,token:r})=>{const o=Object(l.d)();return a.a.createElement("div",{className:"code-snippet","data-testid":n},a.a.createElement(c.DapperScrollbars,{autoHide:!1,autoSizeHeight:!0,className:"code-snippet--scroll"},a.a.createElement("div",{className:"code-snippet--text"},a.a.createElement("pre",null,r))),a.a.createElement("div",{className:"code-snippet--footer"},a.a.createElement("div",null,a.a.createElement(u.a,{text:r,onCopy:()=>{o(Object(m.c)(Object(d.Y)(`${r.slice(0,30).trimRight()}...`,"Script")))}}),a.a.createElement(c.Button,{size:c.ComponentSize.ExtraSmall,status:r.includes("<INFLUX_TOKEN>")?c.ComponentStatus.Default:c.ComponentStatus.Disabled,text:"Generate New API Token",titleText:"Generate New API Token",icon:c.IconFont.Refresh_New,color:c.ComponentColor.Success,onClick:()=>{o(Object(p.g)(e))},className:"new-token--btn"})),a.a.createElement("label",{className:"code-snippet--label"},t)))},f=n(7);let y=class extends o.PureComponent{componentDidMount(){Object(f.a)("telegrafs_page.telegraf_instructions.page_viewed")}render(){const{token:e,configID:t}=this.props,n=`telegraf --config ${this.origin}/api/v2/telegrafs/${t||""}`,r=`export INFLUX_TOKEN=${e||"<INFLUX_TOKEN>"}`;return a.a.createElement("div",{"data-testid":"setup-instructions",className:"telegraf-instructions",style:{textAlign:"left"}},a.a.createElement("h5",null,"1. Install the Latest Telegraf"),a.a.createElement("p",null,"You can install the latest Telegraf by visiting the"," ",a.a.createElement("a",{href:"https://portal.influxdata.com/downloads/",target:"_blank",rel:"noreferrer"},"InfluxData Downloads "),"page. If you already have Telegraf installed on your system, make sure it's up to date. You will need version 1.9.2 or higher."),a.a.createElement("h5",null,"2. Configure your API Token"),a.a.createElement("p",null,"Your API token is required for pushing data into InfluxDB. You can copy the following command to your terminal window to set an environment variable with your API token."),a.a.createElement(g,{token:r,configID:t,label:"CLI"}),a.a.createElement("h5",null,"3. Start Telegraf"),a.a.createElement("p",null,"Finally, you can run the following command to start the Telegraf agent running on your machine."),a.a.createElement(i.c,{text:n,label:"CLI"}))}get origin(){return window.location.origin}};y=Object(r.a)([s.a],y);t.a=y},762:function(e,t,n){"use strict";var r=n(14),o=n(2),a=n.n(o),s=n(545),i=n.n(s),l=n(4),c=n(184),u=n(15),d=n(3),p=n(10),m=n(311),g=n(178),f=n(5),y=n(11),h=n(9),b=n(105);const S=a.a.createElement("div",null),C=i()({loader:()=>Promise.all([n.e(22),n.e(9),n.e(66)]).then(n.bind(null,1042)),loading:()=>S});let D=class extends o.PureComponent{constructor(){super(...arguments),this.handleDismiss=()=>{const{history:e,org:t}=this.props,{onClearDataLoaders:n,onClearSteps:r}=this.props;n(),r(),e.push(`/orgs/${t.id}/load-data/telegrafs`)}}componentDidMount(){const{bucket:e,buckets:t}=this.props;if(!e&&t&&t.length){const{orgID:e,name:n,id:r}=t[0];this.props.onSetBucketInfo(e,n,r)}this.props.onSetCurrentStepIndex(0)}render(){return a.a.createElement(d.Overlay,{visible:!0},a.a.createElement(d.Overlay.Container,{maxWidth:1200},a.a.createElement(d.Overlay.Header,{title:"Create a Telegraf Configuration",onDismiss:this.handleDismiss}),a.a.createElement(d.Overlay.Body,{className:"data-loading--overlay"},a.a.createElement(C,{stepProps:this.stepProps}))))}get stepProps(){const{notify:e,currentStepIndex:t,onDecrementCurrentStepIndex:n,onIncrementCurrentStepIndex:r}=this.props;return{currentStepIndex:t,onIncrementCurrentStepIndex:r,onDecrementCurrentStepIndex:n,notify:e,onExit:this.handleDismiss}}};D=Object(r.a)([u.a],D);const E={notify:p.c,onSetBucketInfo:m.d,onIncrementCurrentStepIndex:m.c,onDecrementCurrentStepIndex:m.b,onSetCurrentStepIndex:m.e,onClearDataLoaders:g.e,onClearSteps:m.a},T=Object(l.c)((e=>{const{dataLoading:{dataLoaders:{telegrafPlugins:t},steps:{currentStep:n,substep:r,bucket:o}},me:{name:a},telegrafEditor:s}=e,i=Object(y.a)(e,f.ResourceType.Buckets).filter((e=>!Object(b.e)(e.name))),l=Object(h.a)(e);return{telegrafPlugins:t,text:s.text,currentStepIndex:n,substep:r,username:a,bucket:o,buckets:i,org:l}}),E);t.a=T(Object(c.j)(D))},987:function(e,t,n){"use strict";var r=n(2),o=n.n(r),a=n(3);t.a=({visible:e,resourceName:t})=>e&&o.a.createElement(a.Alert,{color:a.ComponentColor.Primary,icon:a.IconFont.AlertTriangle,className:"no-buckets-warning"},"You don't currently have any buckets. Any"," ",o.a.createElement("strong",null,t)," you have will not be able to write data until a bucket is created and they are directed to that bucket.")},988:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(2),o=n.n(r),a=n(4),s=n(3),i=n(178),l=n(146),c=n(5),u=n(342),d=n(11),p=n(29),m=n(6);const g={onSaveTelegrafConfig:i.f,onUpdateTelegraf:l.g},f=Object(a.c)((e=>{var t,n;const{telegrafConfigID:r}=Object(u.a)(e),o=null!==(n=null===(t=Object(p.b)(e))||void 0===t?void 0:t.accountType)&&void 0!==n?n:"free";let a=null;if(r){a=Object(d.a)(e,c.ResourceType.Telegrafs).find((e=>e.id===r))}return{accountType:o,telegrafConfig:a}}),g)((e=>{const{accountType:t,currentStepIndex:n,isValidConfiguration:a,onDecrementCurrentStepIndex:i,onExit:l,onIncrementCurrentStepIndex:c,onSaveTelegrafConfig:u,onUpdateTelegraf:d,pluginConfig:p,pluginConfigName:g,setIsValidConfiguration:f,substepIndex:y,telegrafConfig:h}=e,b=Object(r.useMemo)((()=>Boolean(h)),[h]);Object(r.useEffect)((()=>{if(h){let{config:e}=h;m.f&&"free"===t&&(e=e.replace('[agent]\n  ## Default data collection interval for all inputs\n  interval = "10s"','[agent]\n  ## Default data collection interval for all inputs\n  interval = "20s"'));const n="string"==typeof e?e.indexOf(`[[inputs.${g}]]`):-1,r=n>=0?`${e.substring(0,n)}${p}`:`${e}${p}`;d(Object.assign(Object.assign({},h),{config:r}))}}),[b]);const S=()=>{f(!1),c()};return 1===y||2===n?null:0===n?o.a.createElement(s.Overlay.Footer,null,o.a.createElement(s.Button,{color:s.ComponentColor.Tertiary,onClick:l,tabIndex:1,testID:"plugin-create-configuration-cancel",text:"Cancel"}),o.a.createElement(s.Button,{color:s.ComponentColor.Primary,onClick:S,status:a?s.ComponentStatus.Valid:s.ComponentStatus.Disabled,tabIndex:0,testID:"plugin-create-configuration-continue-configuring",text:"Continue Configuring"})):o.a.createElement(s.Overlay.Footer,null,o.a.createElement(s.Button,{color:s.ComponentColor.Default,onClick:i,tabIndex:1,testID:"plugin-create-configuration-previous",text:"Previous"}),o.a.createElement(s.Button,{color:s.ComponentColor.Primary,onClick:()=>{u(),c()},status:a?s.ComponentStatus.Valid:s.ComponentStatus.Disabled,tabIndex:0,testID:"plugin-create-configuration-save-and-test",text:"Save and Test"}))}))}}]);
//# sourceMappingURL=52.de00dea115.js.map