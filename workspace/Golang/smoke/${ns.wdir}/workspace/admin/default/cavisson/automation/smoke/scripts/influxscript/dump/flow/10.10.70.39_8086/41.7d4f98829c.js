(window.webpackJsonp=window.webpackJsonp||[]).push([[41,14],{100:function(e,t,a){var n=a(101);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};a(17)(n,r);n.locals&&(e.exports=n.locals)},101:function(e,t,a){(t=a(16)(!1)).push([e.i,".flex-upgrade-content{display:flex;align-items:center}",""]),e.exports=t},1047:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(184),s=a(3),i=a(125);class l extends n.PureComponent{render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.FlexBox,{margin:i.b.ExtraSmall},this.deleteButton))}get deleteButton(){const{bucket:e,onDeleteBucket:t}=this.props;return"user"===e.type?r.a.createElement(s.ConfirmationButton,{color:s.ComponentColor.Colorless,icon:s.IconFont.Trash_New,shape:s.ButtonShape.Square,size:i.b.ExtraSmall,confirmationLabel:"Yes, delete this bucket",onConfirm:()=>{t(e)},confirmationButtonText:"Confirm",testID:`context-delete-menu ${e.name}`}):null}}var c=a(110),u=a.n(c),d=a(8),m=a(4),p=a(6),h=a(13);const b={notify:a(10).c};var g=Object(m.c)(null,b)((({bucket:e,notify:t})=>{const a=r.a.createElement("span",{"data-testid":"bucket-retention",key:"bucket-retention"},"Retention: ",Object(d.capitalize)(e.readableRetention)),n=(null==e?void 0:e.schemaType)||"implicit",o=`Schema Type: ${Object(d.capitalize)(n)}`,i=r.a.createElement("span",{"data-testid":"bucket-schemaType",key:"bucket-schemaType"},o),l=r.a.createElement(u.a,{text:e.id,onCopy:(e,a)=>{const n=`${e.slice(0,30).trimRight()}...`;t(a?Object(h.Y)(n,"Bucket ID"):Object(h.X)(n,"Bucket ID"))},key:e.id},r.a.createElement("span",{className:"copy-bucket-id",title:"Click to Copy to Clipboard"},"ID: ",e.id,r.a.createElement("span",{className:"copy-bucket-id--helper"},"Copy to Clipboard"))),c=p.f?[a,i,l]:[a,l];return"system"===e.type?r.a.createElement(s.ResourceCard.Meta,{testID:`resourceCard-buckets-${e.id}`},r.a.createElement("span",{className:"system-bucket",key:`system-bucket-indicator-${e.id}`},"System Bucket"),c):r.a.createElement(s.ResourceCard.Meta,{testID:`resourceCard-buckets-${e.id}`},c)})),y=a(161);class f extends n.PureComponent{constructor(){super(...arguments),this.triggerRef=Object(n.createRef)()}render(){const{onAddCollector:e,onAddCsv:t,onAddLineProtocol:a,onAddClientLibrary:n,onAddScraper:o}=this.props;return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.Popover,{color:s.ComponentColor.Secondary,appearance:s.Appearance.Outline,position:s.PopoverPosition.ToTheRight,triggerRef:this.triggerRef,distanceFromTrigger:8,contents:s=>r.a.createElement("div",{className:"bucket-add-data",onClick:s},r.a.createElement("div",{className:"bucket-add-data--option",onClick:e},r.a.createElement("div",{className:"bucket-add-data--option-header"},"Configure Telegraf Agent"),r.a.createElement("div",{className:"bucket-add-data--option-desc"},"Configure a Telegraf agent to push data into your bucket.")),r.a.createElement("div",{className:"bucket-add-data--option",onClick:a},r.a.createElement("div",{className:"bucket-add-data--option-header","data-testid":"bucket-add-line-protocol"},"Line Protocol"),r.a.createElement("div",{className:"bucket-add-data--option-desc"},"Quickly load an existing line protocol file.")),r.a.createElement("div",{className:"bucket-add-data--option",onClick:t},r.a.createElement("div",{className:"bucket-add-data--option-header","data-testid":"bucket-add-csv"},"CSV Upload"),r.a.createElement("div",{className:"bucket-add-data--option-desc"},"Quickly load an existing csv file.")),r.a.createElement("div",{className:"bucket-add-data--option",onClick:n},r.a.createElement("div",{className:"bucket-add-data--option-header","data-testid":"bucket-add-client-library"},"Client Library"),r.a.createElement("div",{className:"bucket-add-data--option-desc"},"Write data easily from your own application.")),r.a.createElement(y.a,null,r.a.createElement("div",{className:"bucket-add-data--option",onClick:o},r.a.createElement("div",{className:"bucket-add-data--option-header"},"Scrape Metrics"),r.a.createElement("div",{className:"bucket-add-data--option-desc"},"Add a scrape target to pull data into your bucket."))))}),r.a.createElement(s.Button,{ref:this.triggerRef,text:"Add Data",testID:"add-data--button",icon:s.IconFont.Plus_New,size:s.ComponentSize.ExtraSmall,color:s.ComponentColor.Primary}))}}var S=a(348),E=a(103),C=a(311),v=a(178),D=a(7),k=a(290);const x={onAddBucketLabel:E.a,onDeleteBucketLabel:E.f,onSetDataLoadersBucket:C.d,onSetDataLoadersType:v.l};var O=Object(m.c)(null,x)(Object(o.j)((({bucket:e,bucketType:t,orgID:a,onFilterChange:n,onGetSchema:o,onAddBucketLabel:i,onDeleteBucketLabel:l,history:c,onSetDataLoadersBucket:u,onSetDataLoadersType:d})=>{if("system"===t)return null;const m=()=>{Object(D.a)("bucket.view.schema.explicit"),o(e)};return r.a.createElement(s.FlexBox,{direction:s.FlexDirection.Row,margin:s.ComponentSize.Medium,style:{marginTop:"4px"}},r.a.createElement(S.a,{selectedLabelIDs:e.labels,onFilterChange:n,onAddLabel:t=>{i(e.id,t)},onRemoveLabel:t=>{l(e.id,t)}}),r.a.createElement(f,{onAddCollector:()=>{u(a,e.name,e.id),d(k.e.Streaming),c.push(`/orgs/${a}/load-data/buckets/${e.id}/telegrafs/new`)},onAddLineProtocol:()=>{u(a,e.name,e.id),c.push(`/orgs/${a}/load-data/file-upload/lp`)},onAddCsv:()=>{u(a,e.name,e.id),c.push(`/orgs/${a}/load-data/file-upload/annotated_csv`)},onAddClientLibrary:()=>{u(a,e.name,e.id),d(k.e.ClientLibrary),c.push(`/orgs/${a}/load-data/`)},onAddScraper:()=>{u(a,e.name,e.id),d(k.e.Scraping),c.push(`/orgs/${a}/load-data/buckets/${e.id}/scrapers/new`)}}),r.a.createElement(s.Button,{text:"Settings",testID:"bucket-settings",size:s.ComponentSize.ExtraSmall,onClick:()=>{Object(D.a)("bucket.view.settings"),c.push(`/orgs/${a}/load-data/buckets/${e.id}/edit`)}}),(()=>{if(p.f&&"explicit"===(null==e?void 0:e.schemaType))return r.a.createElement(s.Button,{text:"Show Schema",testID:"bucket-showSchema",size:s.ComponentSize.ExtraSmall,onClick:m})})())}))),T=a(105),I=a(24);t.a=Object(o.j)((({bucket:e,onDeleteBucket:t,onFilterChange:a,onGetBucketSchema:n,history:o,match:{params:{orgID:i}}})=>r.a.createElement(s.ResourceCard,{testID:`bucket-card ${e.name}`,contextMenu:!Object(T.e)(e.name)&&r.a.createElement(l,{bucket:e,onDeleteBucket:t})},r.a.createElement(s.ResourceCard.Name,{testID:`bucket--card--name ${e.name}`,onClick:()=>{Object(I.c)("exploreWithFlows")?o.push(`/notebook/from/bucket/${e.name}`):o.push(`/orgs/${i}/data-explorer?bucket=${e.name}`)},name:e.name}),r.a.createElement(g,{bucket:e}),r.a.createElement(O,{bucket:e,orgID:i,bucketType:e.type,onFilterChange:a,onGetSchema:n}))))},105:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return l}));var n=a(6);const r=e=>e.startsWith("_"),o=()=>n.f?650:450,s=1,i="create-a-bucket",l={id:i,name:"+ Create A Bucket"}},1056:function(e,t,a){"use strict";var n=a(14),r=a(2),o=a.n(r),s=a(184),i=a(593),l=a(4),c=a(125),u=a(3),d=a(103),m=a(5),p=a(11);class h extends r.PureComponent{constructor(){super(...arguments),this.state={bucket:this.props.startBucket},this.saveButtonStatus=e=>this.state.bucket.name===this.props.startBucket.name||e===c.c.Error?c.c.Disabled:e,this.handleValidation=e=>e?this.props.buckets.find((t=>t.name===e))?"This bucket name is taken":void 0:"Name is required",this.handleSubmit=()=>{const{startBucket:e,onRenameBucket:t}=this.props,{bucket:a}=this.state;t(e.name,a),this.handleClose()},this.handleChangeInput=e=>{const t=e.target.value,a=Object.assign(Object.assign({},this.state.bucket),{name:t});this.setState({bucket:a})},this.handleClose=()=>{const{history:e,match:t}=this.props;e.push(`/orgs/${t.params.orgID}/load-data/buckets`)}}render(){const{bucket:e}=this.state;return o.a.createElement(u.Form,{onSubmit:this.handleSubmit},o.a.createElement(u.Form.ValidationElement,{label:"Name",validationFunc:this.handleValidation,value:e.name},(t=>o.a.createElement(o.a.Fragment,null,o.a.createElement(u.FlexBox,{alignItems:u.AlignItems.Center,direction:u.FlexDirection.Column,margin:u.ComponentSize.Large},o.a.createElement(u.Input,{placeholder:"Give your bucket a name",name:"name",autoFocus:!0,value:e.name,onChange:this.handleChangeInput,status:t}),o.a.createElement(u.FlexBox,{alignItems:u.AlignItems.Center,direction:u.FlexDirection.Row,margin:u.ComponentSize.Small},o.a.createElement(u.Button,{text:"Cancel",color:u.ComponentColor.Tertiary,onClick:this.handleClose,type:u.ButtonType.Button}),o.a.createElement(u.Button,{text:"Change Bucket Name",color:u.ComponentColor.Danger,status:this.saveButtonStatus(t),type:u.ButtonType.Submit})))))))}}const b={onRenameBucket:d.i},g=Object(l.c)(((e,t)=>{const{bucketID:a}=t.match.params;return{startBucket:Object(p.f)(e,m.ResourceType.Buckets,a),buckets:Object(p.a)(e,m.ResourceType.Buckets).filter((e=>e.id!==a))}}),b);var y=Object(s.j)(g(h)),f=a(15);let S=class extends r.PureComponent{constructor(){super(...arguments),this.handleClose=()=>{const{history:e,match:t}=this.props;e.push(`/orgs/${t.params.orgID}/load-data/buckets`)}}render(){return o.a.createElement(u.Overlay,{visible:!0},o.a.createElement(i.a,{title:"Rename Bucket",message:this.message,effectedItems:this.effectedItems,onClose:this.handleClose,confirmButtonText:"I understand, let's rename my Bucket"},o.a.createElement(y,null)))}get message(){return"Updating the name of a Bucket can have unintended consequences. Anything that references this Bucket by name will stop working including:"}get effectedItems(){return["Queries","Dashboards","Tasks","Telegraf Configurations","Templates"]}};S=Object(n.a)([f.a],S);t.a=Object(s.j)(S)},106:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));const n=(e,t,a,n="text/plain")=>{const r=((e,t)=>`${e.trim().toLowerCase().replace(/\s/g,"_")}${t}`)(t,a),o=new Blob([e],{type:n}),s=document.createElement("a");s.href=window.URL.createObjectURL(o),s.target="_blank",s.download=r,document.body.appendChild(s),s.click(),s.parentNode.removeChild(s)},r=(e,t)=>{const a=document.createElement("a");"string"==typeof a.download?(a.href=e,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)):window.open(e)}},110:function(e,t,a){"use strict";var n=a(306).CopyToClipboard;n.CopyToClipboard=n,e.exports=n},116:function(e,t,a){"use strict";var n=a(14),r=a(2),o=a.n(r),s=a(8),i=a(3),l=a(15),c=a(42);let u=class extends r.Component{constructor(e){super(e),this.handleSearch=()=>{this.props.onSearch(this.state.searchTerm)},this.handleBlur=e=>{this.setState({searchTerm:e.target.value},this.handleSearch)},this.handleChange=e=>{this.setState({searchTerm:e.target.value},this.handleSearch)},this.clear=()=>{this.setState({searchTerm:""},this.handleSearch)},this.state={searchTerm:this.props.searchTerm}}componentDidUpdate(e){this.props.searchTerm!==e.searchTerm&&this.setState({searchTerm:this.props.searchTerm})}UNSAFE_componentWillMount(){this.handleSearch=Object(s.debounce)(this.handleSearch,50)}render(){const{placeholderText:e,testID:t,tabIndex:a=0,autoFocus:n,size:r}=this.props,{searchTerm:s}=this.state;return o.a.createElement(c.a,null,o.a.createElement(i.Input,{icon:i.IconFont.Search_New,placeholder:e,value:s,onChange:this.handleChange,onBlur:this.handleBlur,testID:t,className:"search-widget-input",tabIndex:a,onClear:this.clear,autoFocus:n,size:r}))}};u.defaultProps={widthPixels:440,placeholderText:"Search...",searchTerm:"",testID:"search-widget",autoFocus:!1,tabIndex:0,size:i.ComponentSize.Small},u=Object(n.a)([l.a,Object(n.b)("design:paramtypes",[Object])],u),t.a=u},136:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(4),r=a(2),o=a(8);const s=/\w+\[\]/g,i=/\[\]?\./;class l extends r.PureComponent{constructor(e){super(e),this.createIndex=e=>Object(o.flatMap)(e,this.extractSuffixes).sort(),this.checkIndex=(e,t)=>{const a=e[Object(o.sortedIndex)(e,t)];return!(!a||!a.includes(t))},this.extractSuffixes=e=>{const t=new Array(e.length),a=e.toLocaleLowerCase();for(let e=0;e<t.length;e++)t[e]=a.slice(e);return t},this.collator=new Intl.Collator("en-us",{numeric:!0})}render(){return this.props.children(this.sorted)}get sorted(){return this.filtered.sort(((e,t)=>this.props.sortByKey?this.collator.compare(Object(o.get)(e,this.props.sortByKey),Object(o.get)(t,this.props.sortByKey)):this.collator.compare(e.name,t.name)))}get filtered(){const{list:e,labels:t,searchKeys:a}=this.props,{formattedSearchTerm:n}=this;if(Object(o.isEmpty)(n))return e;return e.filter((e=>{const r=Object.assign(Object.assign({},e),{labels:Object(o.get)(e,"labels",[]).map((e=>t[e]))});return a.some((e=>{const t=this.getKey(r,e),a=this.isStringArray(t);if(!a&&"object"==typeof t)throw new Error(`The value at key "${e}" is an object.  Take a look at "searchKeys" and\n             make sure you're indexing onto a primitive value`);if(a){const e=this.createIndex(t);return this.checkIndex(e,n)}return String(t).toLocaleLowerCase().includes(n)}))}))}isStringArray(e){return!!Array.isArray(e)&&!(!Object(o.isEmpty)(e)&&"string"!=typeof e[0])}get formattedSearchTerm(){return this.props.searchTerm.trimLeft().toLocaleLowerCase()}getKey(e,t){return t.match(s)?this.getInExactKey(e,t):Object(o.get)(e,t,"")}getInExactKey(e,t){return t.split(i).reduce(((e,t)=>Object(o.flatMap)(e,(e=>Object(o.get)(e,t,[])))),[e])}}const c=e=>({labels:e.resources.labels.byID});function u(){return Object(n.c)(c)(l)}},161:function(e,t,a){"use strict";var n=a(2),r=a(6);t.a=class extends n.PureComponent{render(){const{children:e}=this.props;return r.f?null:e}}},169:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return i}));var n=a(5),r=a(11);const o=(e,t)=>Object(r.a)(e,n.ResourceType.Buckets).find((e=>e.name===t)),s=(e,t)=>{const a=`${e.name}`.toLowerCase(),n=`${t.name}`.toLowerCase();return a===n?0:a<n?-1:a>n?1:0},i=e=>{const t=[],a=[];return Object(r.a)(e,n.ResourceType.Buckets).forEach((e=>{"system"===e.type?t.push(e):a.push(e)})),t.sort(s),a.sort(s),a.concat(t)}},178:function(e,t,a){"use strict";a.d(t,"l",(function(){return k})),a.d(t,"e",(function(){return x})),a.d(t,"p",(function(){return O})),a.d(t,"n",(function(){return T})),a.d(t,"q",(function(){return I})),a.d(t,"a",(function(){return w})),a.d(t,"h",(function(){return j})),a.d(t,"k",(function(){return N})),a.d(t,"o",(function(){return L})),a.d(t,"d",(function(){return B})),a.d(t,"b",(function(){return F})),a.d(t,"c",(function(){return R})),a.d(t,"i",(function(){return P})),a.d(t,"f",(function(){return _})),a.d(t,"g",(function(){return U})),a.d(t,"j",(function(){return M})),a.d(t,"m",(function(){return K}));var n=a(8),r=a(25),o=a(323),s=a(55),i=a(294),l=a(693),c=a(342),u=a(169),d=a(11),m=a(9),p=a(7),h=a(553),b=a(290),g=a(5),y=a(315),f=a(322),S=a(10),E=a(13),C=a(12);let v,D;a(6).f||(v=a(12).postScraper,D=a(12).patchScraper);const k=e=>({type:"SET_DATA_LOADERS_TYPE",payload:{type:e}}),x=()=>({type:"CLEAR_DATA_LOADERS"}),O=e=>({type:"SET_TELEGRAF_CONFIG_NAME",payload:{name:e}}),T=e=>({type:"SET_TELEGRAF_CONFIG_DESCRIPTION",payload:{description:e}}),I=(e,t,a)=>({type:"UPDATE_TELEGRAF_PLUGIN_CONFIG",payload:{name:e,field:t,value:a}}),w=(e,t,a)=>({type:"ADD_TELEGRAF_PLUGIN_CONFIG_VALUE",payload:{pluginName:e,fieldName:t,value:a}}),j=(e,t,a)=>({type:"REMOVE_TELEGRAF_PLUGIN_CONFIG_VALUE",payload:{pluginName:e,fieldName:t,value:a}}),N=(e,t,a,n)=>({type:"SET_TELEGRAF_PLUGIN_CONFIG_VALUE",payload:{pluginName:e,field:t,valueIndex:a,value:n}}),L=e=>({type:"SET_TELEGRAF_CONFIG_ID",payload:{id:e}}),B=e=>({type:"ADD_TELEGRAF_PLUGINS",payload:{telegrafPlugins:e}}),A=e=>({type:"SET_TOKEN",payload:{token:e}}),F=e=>t=>{t((e=>({type:"ADD_PLUGIN_BUNDLE",payload:{bundle:e}}))(e));const a=h.d[e];t(B(a.map((e=>({name:e,active:!1,configured:h.e[e].fields?b.d.Unconfigured:b.d.Configured,templateID:h.e[e].templateID})))))},R=e=>t=>{t((e=>({type:"ADD_TELEGRAF_telegrafUiRefresh",payload:{plugin:e}}))(e)),t({type:"ADD_TELEGRAF_PLUGINS_telegrafUiRefresh",payload:{telegrafPlugins:e}})},P=e=>t=>{t((e=>({type:"REMOVE_PLUGIN_BUNDLE",payload:{bundle:e}}))(e)),t((e=>({type:"REMOVE_BUNDLE_PLUGINS",payload:{bundle:e}}))(e))},_=()=>async(e,t)=>{const{telegrafPlugins:a,telegrafConfigID:n,telegrafConfigName:o,telegrafConfigDescription:s}=Object(c.a)(t()),{name:u}=Object(m.a)(t()),{bucket:d}=Object(c.b)(t()),h={name:"influxdb_v2",type:"output",config:{urls:[`${window.location.origin}`],token:"$INFLUX_TOKEN",organization:u,bucket:d}},g=a.reduce(((e,t)=>t.configured===b.d.Configured?[...e,t.plugin||Object(l.a)(t)]:e),[h]);if(n){const t=await Object(C.putTelegraf)({telegrafID:n,data:{name:o,description:s,plugins:g}});if(200!==t.status)throw new Error(t.data.message);const a=t.data,l=Object(r.a)(a,i.b);return e(Object(y.g)(l)),e(L(n)),void Object(p.a)(`telegraf.config.${Object(p.c)(o)}.edit.success`,{id:null==a?void 0:a.id})}$(e,t,g)},U=e=>async(t,a)=>{let r="",s="";try{const i=a(),l=Object(m.a)(i).id,c=Object(d.f)(i,g.ResourceType.Telegrafs,e);if(r=c.name,s=Object(n.get)(c,"metadata.buckets[0]",""),""===s)throw new Error("An API token cannot be generated without a corresponding bucket; no buckets are assigned");const h=Object(u.a)(i,s);if(!h||!h.id)throw new Error(`there is no bucket present with name ${s}`);const b=[{action:"write",resource:{type:"buckets",id:h.id,orgID:l}},{action:"read",resource:{type:"telegrafs",id:e,orgID:l}}],y={name:`${c.name} token`,orgID:l,description:`WRITE ${s} bucket / READ ${c.name} telegraf config`,permissions:b},f=await Object(o.a)(y);Object(p.a)("token.create.success",{name:r,bucket:s}),t(A(f.token))}catch(e){if(console.error(e),Object(p.a)("token.create.failure",{name:r,bucket:s}),e.message){const a=Object.assign(Object.assign({},E.l),{message:`${E.l.message}: ${e.message}`});t(Object(S.c)(a))}else t(Object(S.c)(E.l))}},$=async(e,t,a)=>{let n="",l="";try{const u=t(),{telegrafConfigName:d,telegrafConfigDescription:h}=Object(c.a)(u);n=d;const{bucket:b,bucketID:g}=Object(c.b)(u);l=b;const v=Object(m.a)(t()),D={name:d,description:h,agent:{collectionInterval:1e4},orgID:v.id,plugins:a},k=await Object(C.postTelegraf)({data:D});if(201!==k.status)throw new Error(k.data.message);const x=k.data,O=[{action:"write",resource:{type:"buckets",id:g,orgID:v.id}},{action:"read",resource:{type:"telegrafs",id:x.id,orgID:v.id}}],T={name:`${d} token`,orgID:v.id,description:`WRITE ${b} bucket / READ ${d} telegraf config`,permissions:O},I=await Object(o.a)(T);e(A(I.token));const w=Object(r.a)(I,s.h);e(Object(f.g)(w));const j=Object(r.a)(x,i.b);e(L(x.id)),e(Object(y.f)(j)),e(Object(S.c)(E.i)),Object(p.a)(`telegraf.config.${Object(p.c)(n)}.create.success`,{id:x.id,bucket:l})}catch(t){Object(p.a)(`telegraf.config.${Object(p.c)(n)}.create.failure`,{bucket:l}),console.error(t.message),e(Object(S.c)(E.h))}},M=e=>({type:"SET_ACTIVE_TELEGRAF_PLUGIN",payload:{telegrafPlugin:e}}),K=e=>({type:"SET_PLUGIN_CONFIGURATION_STATE",payload:{telegrafPlugin:e}})},182:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(3),s=a(109),i=a(5);t.a=function({sortDirection:e,sortKey:t,sortType:a,onSelect:n,resourceType:l,width:c=210}){const u=(e=>{switch(e){case i.ResourceType.Dashboards:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Modified (Oldest)",sortKey:"meta.updatedAt",sortType:s.a.Date,sortDirection:o.Sort.Ascending},{label:"Modified (Newest)",sortKey:"meta.updatedAt",sortType:s.a.Date,sortDirection:o.Sort.Descending}];case i.ResourceType.Tasks:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Active",sortKey:"status",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Inactive",sortKey:"status",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Completed (Oldest)",sortKey:"latestCompleted",sortType:s.a.Date,sortDirection:o.Sort.Ascending},{label:"Completed (Newest)",sortKey:"latestCompleted",sortType:s.a.Date,sortDirection:o.Sort.Descending},{label:"Schedule (Most Often)",sortKey:"every",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Schedule (Least Often)",sortKey:"every",sortType:s.a.String,sortDirection:o.Sort.Descending}];case i.ResourceType.Variables:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Type (A → Z)",sortKey:"arguments.type",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Type (Z → A)",sortKey:"arguments.type",sortType:s.a.String,sortDirection:o.Sort.Descending}];case i.ResourceType.Secrets:return[{label:"Name (A → Z)",sortKey:"id",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"id",sortType:s.a.String,sortDirection:o.Sort.Descending}];case i.ResourceType.Labels:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Description (A → Z)",sortKey:"properties.description",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Description (Z → A)",sortKey:"properties.description",sortType:s.a.String,sortDirection:o.Sort.Descending}];case i.ResourceType.Templates:return[{label:"Name (A → Z)",sortKey:"meta.name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"meta.name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Description (A → Z)",sortKey:"meta.description",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Description (Z → A)",sortKey:"meta.description",sortType:s.a.String,sortDirection:o.Sort.Descending}];case i.ResourceType.Buckets:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Retention (Ascending)",sortKey:"retentionRules[0].everySeconds",sortType:s.a.Float,sortDirection:o.Sort.Ascending},{label:"Retention (Descending)",sortKey:"retentionRules[0].everySeconds",sortType:s.a.Float,sortDirection:o.Sort.Descending}];case i.ResourceType.Telegrafs:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Description (Ascending)",sortKey:"description",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Description (Descending)",sortKey:"description",sortType:s.a.String,sortDirection:o.Sort.Descending}];case i.ResourceType.Scrapers:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"URL (Ascending)",sortKey:"url",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"URL (Descending)",sortKey:"url",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Bucket (Ascending)",sortKey:"bucket",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Bucket (Descending)",sortKey:"bucket",sortType:s.a.String,sortDirection:o.Sort.Descending}];case i.ResourceType.Authorizations:return[{label:"Description (A → Z)",sortKey:"description",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Description (Z → A)",sortKey:"description",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Status (Active)",sortKey:"status",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Status (Inactive)",sortKey:"status",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Date Created (Oldest)",sortKey:"createdAt",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Date Created (Newest)",sortKey:"createdAt",sortType:s.a.String,sortDirection:o.Sort.Descending}];case i.ResourceType.Flows:return[{label:"Name (A → Z)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Ascending},{label:"Name (Z → A)",sortKey:"name",sortType:s.a.String,sortDirection:o.Sort.Descending},{label:"Created (Oldest)",sortKey:"createdAt",sortType:s.a.Date,sortDirection:o.Sort.Ascending},{label:"Created (Newest)",sortKey:"createdAt",sortType:s.a.Date,sortDirection:o.Sort.Descending}]}})(l),{label:d}=u.find((n=>n.sortKey===t&&n.sortDirection===e&&n.sortType===a)),m=e=>{const{sortKey:t,sortDirection:a,sortType:r}=e;n(t,a,r)};return r.a.createElement(o.Dropdown,{button:(e,t)=>r.a.createElement(o.Dropdown.Button,{onClick:t,active:e,testID:"resource-sorter--button"},`Sort by ${d}`),menu:n=>r.a.createElement(o.Dropdown.Menu,{onCollapse:n},u.map((n=>r.a.createElement(o.Dropdown.Item,{key:`${n.sortKey}${n.sortDirection}`,value:n,onClick:m,testID:`resource-sorter--${n.sortKey}-${n.sortDirection}`,selected:n.sortKey===t&&n.sortType===a&&n.sortDirection===e},n.label)))),style:{flexBasis:`${c}px`,width:`${c}px`},testID:"resource-sorter"})}},218:function(e,t,a){var n=a(335);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};a(17)(n,r);n.locals&&(e.exports=n.locals)},221:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return p}));var n=a(2),r=a.n(n),o=a(4),s=a(3),i=a(75);const l=e=>e?s.ComponentStatus.Disabled:s.ComponentStatus.Default;var c=({selectedDuration:e,onSelectDuration:t,durations:a,disabled:n=!1})=>{let o=a,c=a.find((t=>e===t.duration||Object(i.a)(e,t.duration)));return c||(c={duration:e,displayText:e},o=[c,...o]),r.a.createElement(s.Dropdown,{testID:"duration-selector",button:(e,t)=>r.a.createElement(s.Dropdown.Button,{testID:"duration-selector--button",active:e,onClick:t,status:l(n)},c.displayText),menu:a=>r.a.createElement(s.Dropdown.Menu,{onCollapse:a,testID:"duration-selector--menu"},o.map((({duration:a,displayText:n})=>r.a.createElement(s.Dropdown.Item,{id:a,key:a,value:a,testID:`duration-selector--${a}`,selected:a===e,onClick:t},n))))})},u=a(43),d=a(475);const m=2592e3,p=Object(d.a)(m),h=[{duration:"1h",displayText:"1 hour"},{duration:"6h",displayText:"6 hours"},{duration:"12h",displayText:"12 hours"},{duration:"24h",displayText:"24 hours"},{duration:"48h",displayText:"48 hours"},{duration:"72h",displayText:"72 hours"},{duration:"7d",displayText:"7 days"},{duration:"14d",displayText:"14 days"},{duration:"30d",displayText:"30 days"},{duration:"90d",displayText:"90 days"},{duration:"1y",displayText:"1 year"}];class b extends n.PureComponent{constructor(){super(...arguments),this.handleRadioClick=e=>{this.props.onChangeRuleType(e)},this.handleSelectDuration=e=>{const t=Object(i.c)(Object(i.h)(e))/1e3;this.props.onChangeRetentionRule(t)}}render(){const{retentionSeconds:e,maxRetentionSeconds:t,type:a}=this.props;return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.SelectGroup,{shape:s.ButtonShape.StretchToFit,className:"retention--radio"},r.a.createElement(s.SelectGroup.Option,{name:"bucket-retention",id:"never",testID:"retention-never--button",active:null===a,onClick:this.handleRadioClick,value:null,titleText:"Never delete data",disabled:!!t},"Never"),r.a.createElement(s.SelectGroup.Option,{name:"bucket-retention",id:"intervals",active:"expire"===a,onClick:this.handleRadioClick,value:"expire",testID:"retention-intervals--button",titleText:"Delete data older than a duration"},"Older Than")),"expire"===a&&r.a.createElement(c,{selectedDuration:`${e}s`,onSelectDuration:this.handleSelectDuration,durations:this.durations}))}get durations(){const{maxRetentionSeconds:e}=this.props;return e?h.filter((({duration:t})=>Object(i.c)(Object(i.h)(t))<=1e3*e)):h}}t.c=Object(o.c)((e=>({maxRetentionSeconds:Object(u.c)(e)})))(b)},240:function(e,t,a){"use strict";var n=a(2),r=a.n(n);t.a=({childrenLeft:e,childrenRight:t,width:a})=>{let n=r.a.createElement(r.a.Fragment,null),o=r.a.createElement(r.a.Fragment,null);return e&&(n=r.a.createElement("div",{className:"tabbed-page--header-left"},e)),t&&(o=r.a.createElement("div",{className:"tabbed-page--header-right"},t)),a?r.a.createElement("div",{className:"tabbed-page--header","data-testid":"tabbed-page--header",style:{width:a}},n,o):r.a.createElement("div",{className:"tabbed-page--header","data-testid":"tabbed-page--header"},n,o)}},247:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return u}));const n=["timestamp","tag","field"],r=["integer","float","boolean","string","unsigned"],o=(e="")=>(e=e.trim()).startsWith("_")||/^[0-9]/.test(e)?{valid:!1,message:"cannot start with '_' or a number"}:e.length>128?{valid:!1,message:"too long, max length is 128 characters"}:{valid:!0,message:null},s=e=>!(Array.isArray(e)&&e.length)||e.every((e=>e.valid)),i=e=>!(Array.isArray(e)&&e.length)||e.every((e=>!e.hasUpdate||e.hasUpdate&&e.valid)),l=(e,t)=>{let a=null;if(e&&(a="csv"===t?c(e):JSON.parse(e),!(e=>!!Array.isArray(e)&&e.every((e=>"name"in e&&"string"==typeof e.name&&(!(!("type"in e)||!n.includes(e.type))&&("dataType"in e?r.includes(e.dataType):"field"!==e.type)))))(a)))throw{message:"column file is not formatted correctly"};return a},c=(e,t=",")=>{const a=e.slice(0,e.indexOf("\n")).split(t);if("name"!==a[0]||"type"!==a[1]||"dataType"!==a[2])throw{message:'csv headers are not correct; they need to be : "name, type, dataType"'};return e.slice(e.indexOf("\n")+1).split("\n").map((function(e){const n=e.split(t);return a.reduce((function(e,t,a){const r=n[a];return r&&(e[t]=r.trim()),e}),{})}))},u=e=>[["name","type","dataType"],...e.map((e=>{const t=[e.name,e.type];return e.dataType?t.push(e.dataType):t.push(""),t}))].map((e=>e.join(","))).join("\n")},2553:function(e,t,a){"use strict";a.r(t);var n=a(14),r=a(2),o=a.n(r),s=a(184),i=a(15),l=a(350),c=a(341),u=a(8),d=a(4),m=a(3),p=a(116),h=a(240),b=a(136),g=a(351),y=a(1047),f=a(109);class S extends r.PureComponent{constructor(){super(...arguments),this.memGetSortedResources=Object(g.a)(f.b)}render(){return o.a.createElement(m.ResourceList,null,o.a.createElement(m.ResourceList.Body,{emptyState:this.props.emptyState},this.listBuckets))}get listBuckets(){const{buckets:e,sortKey:t,sortDirection:a,sortType:n,onDeleteBucket:r,onFilterChange:s,onUpdateBucket:i,onGetBucketSchema:l}=this.props,c=this.memGetSortedResources(e,t,a,n),u=[],d=[];c.forEach((e=>{"user"===e.type?u.push(e):d.push(e)}));return[...u,...d].map((e=>o.a.createElement(y.a,{key:e.id,bucket:e,onDeleteBucket:r,onUpdateBucket:i,onFilterChange:s,onGetBucketSchema:l})))}}var E,C=Object(s.j)(S),v=a(442),D=a(978),k=a(182),x=a(309),O=a(103),T=a(34),I=a(36),w=a(43),j=a(11),N=a(5);const L=Object(b.a)();let B=class extends r.PureComponent{constructor(e){super(e),this.handleSort=(e,t,a)=>{this.setState({sortKey:e,sortDirection:t,sortType:a})},this.handleDeleteBucket=({id:e,name:t})=>{this.props.deleteBucket(e,t)},this.handleShowBucketSchema=async({id:e,name:t})=>{const a=await this.props.getBucketSchema(e),n=null==a?void 0:a.measurementSchemas;this.props.showOverlay("bucket-schema-show",{schema:n,bucketName:t},this.props.dismissOverlay)},this.handleFilterUpdate=e=>{this.setState({searchTerm:e})},this.state={searchTerm:"",sortKey:"name",sortDirection:m.Sort.Ascending,sortType:f.a.String}}componentDidMount(){this.props.checkBucketLimits()}render(){const{buckets:e,limitStatus:t}=this.props,{searchTerm:a,sortKey:n,sortDirection:r,sortType:s}=this.state,i=o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{placeholderText:"Filter buckets...",searchTerm:a,onSearch:this.handleFilterUpdate}),o.a.createElement(k.a,{resourceType:N.ResourceType.Buckets,sortDirection:r,sortKey:n,sortType:s,onSelect:this.handleSort,width:238})),l=o.a.createElement(o.a.Fragment,null,o.a.createElement(x.a,null));return o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,{childrenLeft:i,childrenRight:l}),o.a.createElement(m.Grid,null,o.a.createElement(m.Grid.Row,null,o.a.createElement(m.Grid.Column,{widthXS:m.Columns.Twelve,widthSM:m.Columns.Eight,widthMD:m.Columns.Nine,widthLG:m.Columns.Ten},o.a.createElement(L,{searchTerm:a,searchKeys:["name","readableRetention","labels[].name"],list:e},(e=>o.a.createElement(C,{buckets:e,emptyState:this.emptyState,onUpdateBucket:this.props.updateBucket,onDeleteBucket:this.handleDeleteBucket,onFilterChange:this.handleFilterUpdate,onGetBucketSchema:this.handleShowBucketSchema,sortKey:n,sortDirection:r,sortType:s}))),o.a.createElement(v.a,{resourceName:"buckets",limitStatus:t,className:"load-data--asset-alert"})),o.a.createElement(m.Grid.Column,{widthXS:m.Columns.Twelve,widthSM:m.Columns.Four,widthMD:m.Columns.Three,widthLG:m.Columns.Two},o.a.createElement(D.a,null)))))}get emptyState(){const{searchTerm:e}=this.state;return Object(u.isEmpty)(e)?o.a.createElement(m.EmptyState,{size:m.ComponentSize.Large},o.a.createElement(m.EmptyState.Text,null,"Looks like there aren't any ",o.a.createElement("b",null,"Buckets"),", why not create one?"),o.a.createElement(x.a,null)):o.a.createElement(m.EmptyState,{size:m.ComponentSize.Large},o.a.createElement(m.EmptyState.Text,null,"No Buckets match your query"))}};B=Object(n.a)([i.a,Object(n.b)("design:paramtypes",["function"==typeof(E="undefined"!=typeof Props&&Props)?E:Object])],B);const A={createBucket:O.c,updateBucket:O.j,deleteBucket:O.e,getBucketSchema:O.g,showOverlay:T.d,dismissOverlay:T.b,checkBucketLimits:I.b};var F=Object(d.c)((e=>({buckets:Object(j.a)(e,N.ResourceType.Buckets),limitStatus:Object(w.p)(e)})),A)(B),R=a(98),P=a(391),_=a(386),U=a(762),$=a(979),M=a(1056),K=a(790),z=a(63),G=a(193);const V=`/${G.m}/${G.n}/load-data/${G.a}/${G.b}`;let H=class extends r.Component{render(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.Page,{titleTag:Object(z.a)(["Buckets","Load Data"])},o.a.createElement(_.a,null,o.a.createElement(c.a,null),o.a.createElement(l.a,{activeTab:"buckets"},o.a.createElement(R.a,{resources:[N.ResourceType.Buckets,N.ResourceType.Labels,N.ResourceType.Telegrafs]},o.a.createElement(P.a,null,o.a.createElement(F,null)))))),o.a.createElement(s.c,null,o.a.createElement(s.a,{path:`${V}/telegrafs/new`,component:U.a}),o.a.createElement(s.a,{path:`${V}/scrapers/new`,component:K.a}),o.a.createElement(s.a,{path:`${V}/edit`,component:$.a}),o.a.createElement(s.a,{path:`${V}/rename`,component:M.a})))}};H=Object(n.a)([i.a],H);t.default=H},272:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(4),s=a(3),i=a(34);const l={onShowOverlay:i.d,onDismissOverlay:i.b},c=Object(o.c)(null,l);t.a=c((({color:e=s.ComponentColor.Primary,buttonText:t,resourceName:a,onShowOverlay:n,onDismissOverlay:o})=>r.a.createElement(s.Button,{icon:s.IconFont.Plus_New,text:t||`Create ${a}`,color:e,titleText:`Click to create ${a}`,onClick:()=>{n("asset-limit",{asset:`${a}s`},o)},testID:`create-${a.toLowerCase()}`})))},29:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o}));const n=e=>e.me,r=e=>e.me.quartzMe,o=e=>{var t,a;const{quartzMe:n}=e.me,r=null!==(t=null==n?void 0:n.isRegionBeta)&&void 0!==t&&t;return"free"===(null!==(a=null==n?void 0:n.accountType)&&void 0!==a?a:"free")&&!1===r}},306:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var n=o(a(2)),r=o(a(307));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?p(e):t}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var g=function(e){function t(){var e,a;c(this,t);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return b(p(a=d(this,(e=m(t)).call.apply(e,[this].concat(s)))),"onClick",(function(e){var t=a.props,o=t.text,s=t.onCopy,i=t.children,l=t.options,c=n.default.Children.only(i),u=(0,r.default)(o,l);s&&s(o,u),c&&c.props&&"function"==typeof c.props.onClick&&c.props.onClick(e)})),a}var a,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),a=t,o=[{key:"render",value:function(){var e=this.props,t=(e.text,e.onCopy,e.options,e.children),a=l(e,["text","onCopy","options","children"]),r=n.default.Children.only(t);return n.default.cloneElement(r,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(a,!0).forEach((function(t){b(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,{onClick:this.onClick}))}}],o&&u(a.prototype,o),s&&u(a,s),t}(n.default.PureComponent);t.CopyToClipboard=g,b(g,"defaultProps",{onCopy:void 0,options:void 0})},307:function(e,t,a){"use strict";var n=a(308),r={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var a,o,s,i,l,c,u=!1;t||(t={}),a=t.debug||!1;try{if(s=n(),i=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),void 0===n.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=r[t.format]||r.default;window.clipboardData.setData(o,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(c),i.selectNodeContents(c),l.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(n){a&&console.error("unable to copy using execCommand: ",n),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(n){a&&console.error("unable to copy using clipboardData: ",n),a&&console.error("falling back to prompt"),o=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(o,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(i):l.removeAllRanges()),c&&document.body.removeChild(c),s()}return u}},308:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],n=0;n<e.rangeCount;n++)a.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},309:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(4),s=a(3),i=a(272),l=a(36),c=a(34),u=a(43),d=a(6);const m={onShowOverlay:c.d,onDismissOverlay:c.b},p=Object(o.c)((e=>({limitStatus:Object(u.p)(e)})),m);t.a=p((({limitStatus:e,onShowOverlay:t,onDismissOverlay:a})=>{const c=Object(o.d)();Object(n.useEffect)((()=>{c(Object(l.b)())}),[c]);return d.f&&"exceeded"===e?r.a.createElement(i.a,{resourceName:"Bucket"}):r.a.createElement(s.Button,{icon:s.IconFont.Plus_New,color:s.ComponentColor.Primary,text:"Create Bucket",titleText:"Click to create a bucket",onClick:()=>{t("create-bucket",null,a)},testID:"Create Bucket"})}))},311:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"e",(function(){return s})),a.d(t,"f",(function(){return i})),a.d(t,"d",(function(){return l}));const n=()=>({type:"CLEAR_STEPS"}),r=()=>({type:"INCREMENT_CURRENT_STEP_INDEX"}),o=()=>({type:"DECREMENT_CURRENT_STEP_INDEX"}),s=e=>({type:"SET_CURRENT_STEP_INDEX",payload:{index:e}}),i=(e,t)=>({type:"SET_SUBSTEP_INDEX",payload:{stepIndex:e,substep:t}}),l=(e,t,a)=>({type:"SET_BUCKET_INFO",payload:{orgID:e,bucket:t,bucketID:a}})},313:function(e,t,a){"use strict";a.d(t,"a",(function(){return w}));var n=a(2),r=a.n(n),o=a(3),s=a(221),i=a(8),l=(a(218),a(6));let c=null;l.f&&(c=a(31).MeasurementSchema);const u=({onChangeSchemaType:e,readOnlySchemaType:t})=>{const[a,s]=Object(n.useState)("implicit"),l=t=>{e(t),s(t)},c=r.a.createElement(r.a.Fragment,null,r.a.createElement(o.Toggle,{tabIndex:1,value:"implicit",id:"implicit-bucket-schema-choice",name:"implicit-bucket-schema-choice",className:"option",checked:"implicit"===a,onChange:l,type:o.InputToggleType.Radio,size:o.ComponentSize.ExtraSmall,color:o.ComponentColor.Primary,testID:"implicit-bucket-schema-choice-ID"},r.a.createElement(o.InputLabel,{htmlFor:"implicit-bucket-schema-choice",active:"implicit"===a},"Implicit")),r.a.createElement(o.Toggle,{tabIndex:2,value:"explicit",id:"explicit-bucket-schema-choice",name:"explicit-bucket-schema-choice",testID:"explicit-bucket-schema-choice-ID",checked:"explicit"===a,className:"option",onChange:l,type:o.InputToggleType.Radio,size:o.ComponentSize.ExtraSmall,color:o.ComponentColor.Primary},r.a.createElement(o.InputLabel,{htmlFor:"explicit-bucket-schema-choice",active:"explicit"===a},"Explicit"))),u=r.a.createElement("span",{className:"value-text","data-testid":"bucket-readonly-schema-label"},": ",Object(i.capitalize)(t)),d=t?null:c,m=t?u:null;return r.a.createElement(o.FlexBox,{direction:o.FlexDirection.Column,margin:o.ComponentSize.Large,alignItems:o.AlignItems.FlexStart,testID:"create-bucket-schema-type-toggle-box",className:"schema-section"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"title-text"},"Bucket Schema Type ",m),r.a.createElement("div",{className:"subtext"},"By default, buckets have an implicit schema that conforms to your data. Use explicit schemas to enforce specific data types and columns. Bucket Schema type cannot be changed after creation."," ",r.a.createElement("a",{href:"https://docs.influxdata.com/influxdb/cloud/organizations/buckets/bucket-schema/",target:"_blank",rel:"noopener noreferrer"}," ","Learn more"))),d)};var d=a(105),m=a(7),p=a(247),h=a(106),b=a(19),g=a.n(b);const y=({allowedExtensions:e,allowedTypes:t,handleFileUpload:a,setErrorState:s,alreadySetFileName:i,defaultText:l,preFileUpload:c,onCancel:u})=>{const[d,m]=Object(n.useState)(i),[p,h]=Object(n.useState)(!1),[b,y]=Object(n.useState)(null),[f,S]=Object(n.useState)(!1);const E=(e,t)=>{y(e),s(e,t)},C=(e,t)=>{const n=new FileReader;n.readAsText(e),n.onload=()=>{const r=e.name;S(!0),c&&c();try{a(n.result,t,r),m(r),E(!1)}catch(e){E(!0,e.message)}}},v=Object(n.useRef)(null),D=r.a.createElement("input",{type:"file","data-testid":"drag-and-drop--input",ref:v,className:"drag-and-drop--input",accept:e,onChange:e=>{const t=e.currentTarget.files[0];if(!t)return;const a=t.name.split(".").pop();C(t,a)}}),k=null!=d?d:null!=l?l:"Add schema file",x=g()("dnd",{active:p,hasError:b}),O=g()("display-area",{active:p}),T=r.a.createElement(o.SquareButton,{icon:o.IconFont.Undo,onClick:()=>{m(null),y(!1),S(!1),u()},titleText:"cancel update",color:o.ComponentColor.Secondary,size:o.ComponentSize.ExtraSmall,testID:"dndContainer-cancel-update"}),I=f&&u?T:null;return r.a.createElement("div",{className:"dnd-container"},r.a.createElement("div",{id:"drop_zone",className:x,onDrop:e=>{const a=e.dataTransfer.files[0];if(!a)return;e.preventDefault(),e.stopPropagation();const n=a.type;if(t.includes(n)){C(a,"text/csv"===n?"csv":"json")}else{const e=(e=>{const t=e.length;if(1===t)return e[0];const a=()=>{const t=e.length-1,a=e[t];return e[t]=`or ${a}`,e};return 2===t?a().join(" "):a().join(", ")})(t);E(!0,`Disallowed file type${n?` (${n})`:""}, you can only upload files with the type of ${e}.`)}h(!1)},onDragOver:function(e){h(!0),e.preventDefault()},onDragLeave:function(e){h(!1),e.preventDefault()},onClick:()=>{v.current.click()},"data-testid":"dndContainer"},r.a.createElement("div",{"data-testid":"displayArea",className:O},k),D),I)};let f=null,S=null,E=null;l.f&&(S=a(31).MeasurementSchema,f=a(31).MeasurementSchemaList,E=a(31).MeasurementSchemaColumn);const C=["application/json","text/csv"],v=".json,.csv",D=({index:e,name:t,onAddName:a,onAddContents:s,onDelete:i,filename:l,showSchemaValidation:c})=>{const[u,d]=Object(n.useState)(t);let m={valid:!0,message:null};t&&(m=Object(p.d)(t));const[h,b]=Object(n.useState)(m),g=c&&!l,[f,S]=Object(n.useState)(g);let E=null;g&&(E="You must upload a file");const[D,k]=Object(n.useState)(E),x=r.a.createElement(o.DismissButton,{onClick:()=>i(e),size:o.ComponentSize.ExtraSmall,color:o.ComponentColor.Default}),O={placeholder:"Give your schema a name",onChange:t=>{const n=t.target.value,r=Object(p.d)(n);b(r),d(n),a(n,r.valid,e)},value:u,className:"schema-name-input",maxLength:48,size:o.ComponentSize.Small,type:o.InputType.Text},T=r.a.createElement(y,{key:`mini-dnd-${e}`,allowedExtensions:v,allowedTypes:C,handleFileUpload:(t,a,n)=>{const r=Object(p.c)(t,a);s(r,n,e)},setErrorState:(e,t)=>{S(e),e||(t=null),k(t)},alreadySetFileName:l}),I=f?r.a.createElement(o.FormElementError,{style:{wordBreak:"break-word"},message:D}):null;return r.a.createElement(o.Panel,{className:"measurement-schema-panel-container",key:`addMsp-${e}`},r.a.createElement(o.FlexBox,{direction:o.FlexDirection.Column,margin:o.ComponentSize.Large,alignItems:o.AlignItems.FlexStart,testID:`measurement-schema-readOnly-panel-${e}`,className:"measurement-schema-panel",key:`addMsp-column-${e}`},r.a.createElement("div",{className:"value-text"}," name"),r.a.createElement(o.FlexBox,{direction:o.FlexDirection.Row,className:"schema-row"},(()=>{var e;let t=o.ComponentStatus.Default;const a=!(null==h?void 0:h.valid)||c&&!u;a&&(t=o.ComponentStatus.Error),O.status=t;let n=null;if(a){const t=null!==(e=null==h?void 0:h.message)&&void 0!==e?e:"You must enter a name";n=r.a.createElement(o.FormElementError,{message:t})}return r.a.createElement("span",null,r.a.createElement(o.Input,Object.assign({},O))," ",n)})(),T),I,x))},k=({index:e,measurementSchema:t,onAddUpdate:a,toggleUpdate:s,downloadFormat:i="json"})=>{const[l,c]=Object(n.useState)(null),[u,d]=Object(n.useState)(!1),[b,f]=Object(n.useState)(!1),S=u?r.a.createElement(o.FormElementError,{style:{wordBreak:"break-word"},message:l}):null,E=g()("schema-row",{hasCancelBtn:b});return r.a.createElement(o.Panel,{className:"measurement-schema-panel-container"},r.a.createElement(o.FlexBox,{direction:o.FlexDirection.Column,margin:o.ComponentSize.Large,alignItems:o.AlignItems.FlexStart,testID:`measurement-schema-readOnly-panel-${e}`,className:"measurement-schema-panel",key:`romsp-${e}`},r.a.createElement("div",{"data-testid":`measurement-schema-name-${e}`,className:"value-text"},t.name),r.a.createElement(o.FlexBox,{direction:o.FlexDirection.Row,className:E},r.a.createElement(o.Button,{icon:o.IconFont.Download_New,color:o.ComponentColor.Secondary,text:"Download Schema",onClick:()=>{const{name:e}=t;let a=JSON.stringify(t.columns),n=".json";"csv"===i&&(a=Object(p.e)(t.columns),n=".csv"),Object(m.a)("bucket.download.schema.explicit"),Object(h.b)(a,e||"schema",n)},testID:"measurement-schema-download-button",className:"download-button"}),r.a.createElement(y,{key:`update-mini-dnd-${e}`,allowedExtensions:v,allowedTypes:C,handleFileUpload:(t,n)=>{const r=Object(p.c)(t,n);a(r,e)},setErrorState:(e,t)=>{d(e),e||(t=null),c(t)},defaultText:"Update schema file",preFileUpload:()=>{s(!0,e),f(!0)},onCancel:()=>{s(!1,e),d(!1),c(null),f(!1)}})),S))},x=({measurementSchemaList:e,onUpdateSchemas:t,onAddSchemas:a,showSchemaValidation:s})=>{var l;const[c,u]=Object(n.useState)([]),d=(null===(l=null==e?void 0:e.measurementSchemas)||void 0===l?void 0:l.map((e=>({currentSchema:e,hasUpdate:!1}))))||[],[m,p]=Object(n.useState)(d),[h,b]=Object(n.useState)("json"),g=e=>{t(e),p(e)},y=(e,t)=>{const a=m[t]||{};a.columns=e,a.hasUpdate=!0,a.valid=!0,m[t]=a,g(m)},f=(e,t)=>{const a=m[t]||{};e?(a.hasUpdate=!0,a.valid=!1):a.hasUpdate=!1,m[t]=a,g(m)},S=null==e?void 0:e.measurementSchemas;let E=null;if(S){const e=e=>{b(e)},t=S.map(((e,t)=>r.a.createElement(k,{key:`mss-ep-${t}`,measurementSchema:e,index:t,onAddUpdate:y,toggleUpdate:f,downloadFormat:h}))),a={marginRight:10},n=r.a.createElement(o.FlexBox,{direction:o.FlexDirection.Row},r.a.createElement(o.InputLabel,{style:a}," Download File Format: "),r.a.createElement(o.Toggle,{tabIndex:1,value:"json",id:"json-download-flavor-choice",name:"json-download-flavor-choice",className:"option",checked:"json"===h,onChange:e,type:o.InputToggleType.Radio,size:o.ComponentSize.ExtraSmall,color:o.ComponentColor.Primary,testID:"json-download-flavor-choice"},r.a.createElement(o.InputLabel,{htmlFor:"json-download-flavor-choice",active:"json"===h},"json")),r.a.createElement(o.Toggle,{tabIndex:2,value:"csv",id:"csv-download-flavor-choice",name:"csv-download-flavor-choice",className:"option",checked:"csv"===h,onChange:e,type:o.InputToggleType.Radio,size:o.ComponentSize.ExtraSmall,color:o.ComponentColor.Primary,testID:"csv-download-flavor-choice"},r.a.createElement(o.InputLabel,{htmlFor:"csv-download-flavor-choice",active:"csv"===h},"csv")));E=r.a.createElement(r.a.Fragment,null,n," ",t," ")}const C=e=>{u(e),a(e,!1)},v=r.a.createElement(o.Button,{onClick:()=>{const e=[...c,{valid:!1}];u(e),a(e,!0)},testID:"measurement-schema-add-file-button",text:"Add New Measurement Schema"}),x=(e="",t,a)=>{const n=c[a],r=Object(i.trim)(e);n.name=r,n.columns&&n.name&&t?n.valid=!0:n.valid=!1,n.validName=t,C(c)},O=(e,t,a)=>{const n=c[a];n.columns=e,n.filename=t,n.columns&&n.name&&n.validName&&(n.valid=!0),C(c)},T=e=>{c.splice(e,1),C([...c])},I=Object(n.useMemo)((()=>c.map(((e,t)=>r.a.createElement(D,{key:`${e.name}-${t}`,index:t,onAddName:x,onAddContents:O,onDelete:T,filename:e.filename,name:e.name,showSchemaValidation:s||!1})))),[c.length,s]);return r.a.createElement(o.FlexBox,{direction:o.FlexDirection.Column,margin:o.ComponentSize.Large,alignItems:o.AlignItems.FlexStart,testID:"measurement-schema-section-parent",className:"measurement-section measurement"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"title-text"},"Measurement Schema"),r.a.createElement("div",{className:"subtext"},"Measurement Schemas provide non-conforming validation for data in the bucket. once a measurement schema is saved you cannot delete or modify existing columns. You may only add new columns."," ",r.a.createElement("a",{href:"https://docs.influxdata.com/influxdb/cloud/organizations/buckets/bucket-schema/",target:"_blank",rel:"noopener noreferrer"}," ","Learn more"))),E,v,I)};let O=null,T=null,I=null;l.f&&(I=a(31).MeasurementSchema,T=a(31).MeasurementSchemaCreateRequest,O=a(31).MeasurementSchemaList);class w extends n.PureComponent{constructor(){super(...arguments),this.state={showAdvanced:!1,schemaType:"implicit",newMeasurementSchemas:[],measurementSchemaUpdates:[]},this.onChangeSchemaTypeInternal=e=>{this.setState({schemaType:e}),this.props.onChangeSchemaType(e)},this.onAddSchemasInternal=(e,t)=>{this.props.onAddNewMeasurementSchemas(e,t),this.setState({newMeasurementSchemas:e})},this.onUpdateSchemasInternal=e=>{this.props.onUpdateMeasurementSchemas(e),this.setState({measurementSchemaUpdates:e})},this.handleNameValidation=e=>Object(d.e)(e)?"Only system bucket names can begin with _":e?0===e.trim().length||e.length<d.a?`Please enter a name with at least ${d.a} letters or numbers`:null:"This bucket needs a name"}render(){const{name:e,onSubmit:t,ruleType:a,buttonText:n,retentionSeconds:i,isEditing:c,onClose:d,onChangeInput:m,onChangeRuleType:p,onChangeRetentionRule:h,onClickRename:b,testID:g="bucket-form",schemaType:y,measurementSchemaList:f,showSchemaValidation:S}=this.props,{showAdvanced:E,schemaType:C}=this.state,v=c&&o.ComponentStatus.Disabled,D=r.a.createElement(x,{measurementSchemaList:f,key:"measurementSchemaSection",onAddSchemas:this.onAddSchemasInternal,showSchemaValidation:S,onUpdateSchemas:this.onUpdateSchemasInternal}),k=c&&"explicit"===y||"explicit"===C?D:null;return r.a.createElement(o.Form,{onSubmit:t,testID:g},r.a.createElement(o.Overlay.Body,null,r.a.createElement(o.Form.ValidationElement,{value:e,label:"Name",helpText:this.nameHelpText,validationFunc:this.handleNameValidation,required:!0},(t=>r.a.createElement(o.Input,{status:v||t,placeholder:"Give your bucket a name",name:"name",autoFocus:!0,value:e,onChange:m,testID:"bucket-form-name"}))),r.a.createElement(o.Form.Element,{label:"Delete Data"},r.a.createElement(s.c,{type:a,retentionSeconds:i,onChangeRuleType:p,onChangeRetentionRule:h})),(()=>{if(l.f){let e=r.a.createElement(u,{onChangeSchemaType:this.onChangeSchemaTypeInternal});c&&(e=r.a.createElement(u,{key:"schemaToggleSection",readOnlySchemaType:y}));const t=r.a.createElement(r.a.Fragment,null,e,k);return r.a.createElement(o.Accordion,{expanded:E,testID:"schemaBucketToggle"},r.a.createElement(o.Accordion.AccordionHeader,null,r.a.createElement("span",null,"Advanced Configuration (Optional)")),r.a.createElement(o.Accordion.AccordionBodyItem,{testID:"accordion--advanced-section"},r.a.createElement("div",null,t)))}})()),r.a.createElement(o.Overlay.Footer,null,r.a.createElement(o.Button,{text:"Cancel",color:o.ComponentColor.Tertiary,onClick:d,type:o.ButtonType.Button}),"Save Changes"===n&&r.a.createElement(o.Button,{text:"Rename",color:o.ComponentColor.Danger,onClick:b}),r.a.createElement(o.Button,{text:n,testID:"bucket-form-submit",color:this.submitButtonColor,status:this.submitButtonStatus,type:o.ButtonType.Submit})))}get nameHelpText(){return this.props.isEditing?"To rename bucket use the RENAME button below":""}get submitButtonColor(){const{buttonText:e}=this.props;return"Save Changes"===e?o.ComponentColor.Success:o.ComponentColor.Primary}get submitButtonStatus(){const{name:e}=this.props;return this.handleNameValidation(e)?o.ComponentStatus.Disabled:o.ComponentStatus.Default}}},334:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(3),s=a(105);class i extends n.PureComponent{render(){var e;return r.a.createElement(o.Dropdown,{testID:null!==(e=this.props.testID)&&void 0!==e?e:"bucket-dropdown",button:(e,t)=>r.a.createElement(o.Dropdown.Button,{testID:"bucket-dropdown--button",active:e,onClick:t,status:this.status},this.selectedBucketName),menu:e=>r.a.createElement(o.Dropdown.Menu,{onCollapse:e},this.dropdownBuckets),style:this.props.style})}get selectedBucketName(){var e,t;const{selectedBucketID:a,buckets:n,emptyOriginal:r}=this.props;return this.isBucketsEmpty?"No buckets found":r?"Choose a bucket":null!==(t=null===(e=n.find((e=>e.id===a)))||void 0===e?void 0:e.name)&&void 0!==t?t:""}get status(){return this.isBucketsEmpty?o.ComponentStatus.Disabled:o.ComponentStatus.Default}get isBucketsEmpty(){const{buckets:e}=this.props;return!e||!e.length}get dropdownBuckets(){const{buckets:e,onSelectBucket:t,selectedBucketID:a}=this.props;if(this.isBucketsEmpty)return[];return e.filter((e=>!Object(s.e)(e.name))).map((e=>r.a.createElement(o.Dropdown.Item,{key:e.name,value:e,id:e.id,onClick:t,selected:e.id===a},e.name)))}}t.a=i},335:function(e,t,a){(t=a(16)(!1)).push([e.i,".dnd-container{display:flex;align-items:center}.dnd-container .dnd{border:2px dashed gray;border-radius:3px}.dnd-container .dnd.hasError{border-color:#dc4e58;color:#dc4e58}.dnd-container .dnd input[type=file].drag-and-drop--input{display:none}.dnd-container .dnd .display-area{min-width:150px;padding:10px;text-align:center}.dnd-container .dnd .display-area.active{color:#000}.dnd-container .dnd.active{background:#d3d3d3}.schema-section .option{margin-bottom:6px !important}.measurement-section .option:nth-child(3){margin-left:10px}.schema-section.measurement,.measurement-section.measurement{margin-top:15px}.schema-section .schema-name-input,.measurement-section .schema-name-input{margin-right:10px;width:205px !important}.schema-section .file-name-read-only,.measurement-section .file-name-read-only{width:100%;height:40px;font-size:small;padding-top:12px}.schema-section .add-schema-uploader.drag-and-drop,.measurement-section .add-schema-uploader.drag-and-drop{height:40px;border-color:#d3d3d3;width:155px}.schema-section .add-schema-uploader.drag-and-drop.has-file,.measurement-section .add-schema-uploader.drag-and-drop.has-file{border:none}.schema-section .add-schema-uploader.drag-and-drop .drag-and-drop--header,.measurement-section .add-schema-uploader.drag-and-drop .drag-and-drop--header{font-size:small;padding-top:12px;color:#d3d3d3}.schema-section .header,.measurement-section .header{margin-bottom:10px}.schema-section .header .subtext,.measurement-section .header .subtext{margin-top:6px;font-weight:300}.schema-section .title-text,.measurement-section .title-text{color:#b9b9c5;font-weight:500}.schema-section .value-text,.measurement-section .value-text{color:#fff;font-weight:500;margin-top:8px}.schema-section .measurement-schema-panel-container,.measurement-section .measurement-schema-panel-container{width:100%;padding-left:8px;border-radius:10px}.schema-section .measurement-schema-panel-container .measurement-schema-panel,.measurement-section .measurement-schema-panel-container .measurement-schema-panel{width:100%;margin-right:5px;margin-left:5px}.schema-section .measurement-schema-panel-container .measurement-schema-panel .download-button,.measurement-section .measurement-schema-panel-container .measurement-schema-panel .download-button{margin-right:9px}.schema-section .measurement-schema-panel-container .measurement-schema-panel .schema-row,.measurement-section .measurement-schema-panel-container .measurement-schema-panel .schema-row{justify-content:space-between;width:93%;margin-bottom:8px}.schema-section .measurement-schema-panel-container .measurement-schema-panel .schema-row.hasCancelBtn,.measurement-section .measurement-schema-panel-container .measurement-schema-panel .schema-row.hasCancelBtn{width:98%}",""]),e.exports=t},341:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(3),s=a(89);t.a=()=>r.a.createElement(o.Page.Header,{fullWidth:!1,testID:"load-data--header"},r.a.createElement(o.Page.Title,{title:"Load Data"}),r.a.createElement(s.a,null))},342:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));const n=e=>e.dataLoading.dataLoaders,r=e=>e.dataLoading.steps},348:function(e,t,a){"use strict";var n=a(14),r=a(2),o=a.n(r),s=a(4),i=a(3),l=a(8),c=a(19),u=a.n(c),d=a(15);let m=class extends r.Component{constructor(){super(...arguments),this.handleMouseOver=()=>{const{onMouseOver:e,id:t}=this.props;e(t)},this.handleClick=e=>{e.stopPropagation();const{onClick:t,id:a}=this.props;t(a)}}render(){const{name:e,colorHex:t,description:a,id:n}=this.props;return o.a.createElement("div",{className:this.className,onMouseOver:this.handleMouseOver,onClick:this.handleClick,"data-testid":`label-list--item ${e}`},o.a.createElement(i.Label,{name:e,description:a,id:n,color:t}))}get className(){const{active:e}=this.props;return u()("inline-labels--list-item",{active:e})}};m=Object(n.a)([d.a],m);var p=m;let h=class extends r.Component{constructor(){super(...arguments),this.handleMouseOver=()=>{const{onMouseOver:e,id:t}=this.props;e(t)},this.handleClick=e=>{e.stopPropagation(),this.props.onClick()}}render(){const{name:e}=this.props;return o.a.createElement("div",{className:this.className,onMouseOver:this.handleMouseOver,onClick:this.handleClick,"data-testid":"inline-labels--create-new"},'Create "',o.a.createElement("strong",null,`${e}`),'"')}get className(){const{active:e}=this.props;return u()("inline-labels--list-item inline-labels--create-new",{active:e})}};h=Object(n.a)([d.a],h);var b=h;let g=class extends r.Component{render(){return o.a.createElement("div",{className:"inline-labels--list-container"},o.a.createElement(i.DapperScrollbars,{autoSizeHeight:!0,autoHide:!1,style:{width:"100%",maxHeight:"300px"},noScrollX:!0},o.a.createElement("div",{className:"inline-labels--list","data-testid":"inline-labels--list"},this.menuItems)))}get menuItems(){const{filteredLabels:e,onItemClick:t,onUpdateSelectedItemID:a,selectedItemID:n,allLabelsUsed:r,searchTerm:s,onStartCreatingLabel:l}=this.props;return e.length?e.map((e=>e.id===O?o.a.createElement(b,{active:n===e.id,key:e.id,name:e.name,id:e.id,onClick:l,onMouseOver:a}):o.a.createElement(p,{active:n===e.id,key:e.id,name:e.name,id:e.id,description:e.properties.description,colorHex:e.properties.color,onClick:t,onMouseOver:a}))):r?o.a.createElement(i.EmptyState,{size:i.ComponentSize.ExtraSmall,testID:"inline-labels-list--used-all"},o.a.createElement(i.EmptyState.Text,null,"This resource has all available labels,",o.a.createElement("br",null),"start typing to create a new label")):s?void 0:o.a.createElement(i.EmptyState,{size:i.ComponentSize.ExtraSmall,testID:"inline-labels-list--none-exist"},o.a.createElement(i.EmptyState.Text,null,"Start typing to create a new label"))}};g=Object(n.a)([d.a],g);var y,f=g;!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(y||(y={}));let S=class extends r.PureComponent{constructor(){super(...arguments),this.handleKeyDown=e=>{const{selectedItemID:t,onAddLabel:a,onStartCreatingLabel:n,onEscapePress:r}=this.props;switch(e.key){case"Enter":if(e.preventDefault(),e.stopPropagation(),t===O){n();break}if(t){a(t);break}case"ArrowUp":this.handleHighlightAdjacentItem(y.Up);break;case"ArrowDown":this.handleHighlightAdjacentItem(y.Down);break;case"Escape":r()}},this.handleHighlightAdjacentItem=e=>{const{selectedItemID:t,filteredLabels:a,onUpdateSelectedItemID:n}=this.props;if(!a.length||!t)return null;const r=a.findIndex((e=>e.id===t));n(a[Math.min(Math.max(r+e,0),a.length-1)].id)},this.handleRefocusInput=e=>{e.target.focus()}}render(){const{searchTerm:e,allLabelsUsed:t,selectedItemID:a,onAddLabel:n,triggerRef:r,onStartCreatingLabel:s,onUpdateSelectedItemID:l,onInputChange:c,filteredLabels:u,visible:d}=this.props;return o.a.createElement(i.Popover,{appearance:i.Appearance.Outline,position:i.PopoverPosition.Below,triggerRef:r,distanceFromTrigger:8,visible:d,showEvent:i.PopoverInteraction.None,hideEvent:i.PopoverInteraction.None,testID:"inline-labels--popover",className:"inline-labels--popover",contents:()=>o.a.createElement(o.a.Fragment,null,o.a.createElement("h5",{className:"inline-labels--popover-heading"},"Add Labels"),o.a.createElement(i.Input,{icon:i.IconFont.Search_New,placeholder:"Filter labels...",value:e,onKeyDown:this.handleKeyDown,onChange:c,autoFocus:!0,onBlur:this.handleRefocusInput,testID:"inline-labels--popover-field",maxLength:30}),o.a.createElement(f,{searchTerm:e,allLabelsUsed:t,filteredLabels:u,selectedItemID:a,onItemClick:n,onUpdateSelectedItemID:l,onStartCreatingLabel:s}))})}};S=Object(n.a)([d.a],S);var E=S,C=a(390),v=a(300),D=a(5),k=a(599),x=a(164);const O="add-new-label",T={id:O,name:"",properties:{color:"#000000",description:""},status:D.RemoteDataState.NotStarted};let I=class extends r.Component{constructor(e){super(e),this.popoverTrigger=Object(r.createRef)(),this.handleAddPopoverEventListener=()=>{this.popoverTrigger.current&&this.popoverTrigger.current.addEventListener("click",(()=>{this.setState({isPopoverVisible:!0})}))},this.onClickOutside=e=>{e.target!==this.popoverTrigger.current&&this.hidePopover()},this.handleAddLabel=async e=>{const{onAddLabel:t,labels:a}=this.props,n=a.find((t=>t.id===e));n&&(this.selectAvailableItem(),await t(n))},this.selectAvailableItem=()=>{const{searchTerm:e}=this.state,t=this.filterLabels(e);t.length&&this.handleUpdateSelectedItemID(t[0].id)},this.handleUpdateSelectedItemID=e=>{this.setState({selectedItemID:e})},this.handleInputChange=e=>{const t=e.target.value,a=this.filterLabels(t);if(a.length){const e=a[0].id;this.setState({searchTerm:t,selectedItemID:e})}else this.setState({searchTerm:t})},this.filterLabels=e=>{const t=this.availableLabels.filter((t=>{const a=t.name.toLowerCase(),n=e.toLowerCase();return a.includes(n)}));return!t.reduce(((t,a)=>!0===t||a.name===e),!1)&&e?this.filteredLabelsWithAddButton(t):this.filteredLabelsWithoutAddButton(t)},this.filteredLabelsWithAddButton=e=>{const{searchTerm:t}=this.state,a=Object.assign(Object.assign({},T),{name:t});return e.find((e=>e.id===a.id))?e.map((e=>e.id===a.id?a:e)):[a,...e]},this.filteredLabelsWithoutAddButton=e=>e.filter((e=>e.id!==O)),this.handleCreateLabel=async e=>{const{onCreateLabel:t,onAddLabel:a}=this.props,{name:n,properties:r}=e;await t(n,r);a(this.props.labels.find((t=>t.name===e.name)))},this.handleStartCreatingLabel=()=>{this.setState({isCreatingLabel:k.a.Open,isPopoverVisible:!1})},this.hidePopover=()=>{this.setState({isPopoverVisible:!1})},this.handleStopCreatingLabel=()=>{this.setState({isCreatingLabel:k.a.Closed,searchTerm:""})},this.handleEnsureUniqueLabelName=e=>{const{labels:t}=this.props,a=t.map((e=>e.name));return Object(v.c)(a,e)},this.state={selectedItemID:null,searchTerm:"",isCreatingLabel:k.a.Closed,isPopoverVisible:!1}}componentDidMount(){this.handleAddPopoverEventListener()}render(){const{isCreatingLabel:e,searchTerm:t}=this.state;return o.a.createElement(o.a.Fragment,null,this.popover,o.a.createElement("div",{className:"inline-labels--editor"},o.a.createElement(i.ButtonBase,{color:i.ComponentColor.Secondary,titleText:"Add labels",shape:i.ButtonShape.Square,className:"inline-labels--add",testID:"inline-labels--add",ref:this.popoverTrigger},o.a.createElement("div",{className:"inline-labels--add-icon"})),this.noLabelsIndicator),o.a.createElement(C.a,{isVisible:e===k.a.Open,onDismiss:this.handleStopCreatingLabel,overrideDefaultName:t,onCreateLabel:this.handleCreateLabel,onNameValidation:this.handleEnsureUniqueLabelName}))}get popover(){const{labels:e,selectedLabels:t}=this.props,{searchTerm:a,selectedItemID:n,isPopoverVisible:r}=this.state,s=e.length>0&&e.length===t.length;return o.a.createElement(i.ClickOutside,{onClickOutside:this.onClickOutside},o.a.createElement(E,{searchTerm:a,triggerRef:this.popoverTrigger,selectedItemID:n,onUpdateSelectedItemID:this.handleUpdateSelectedItemID,allLabelsUsed:s,onStartCreatingLabel:this.handleStartCreatingLabel,onInputChange:this.handleInputChange,filteredLabels:this.filterLabels(a),onAddLabel:this.handleAddLabel,visible:r,onEscapePress:this.hidePopover}))}get noLabelsIndicator(){const{selectedLabels:e}=this.props;if(e.length)return;return o.a.createElement("div",{className:"cf-label cf-label--xs cf-label--colorless",onClick:()=>{this.popoverTrigger.current&&this.popoverTrigger.current.click()},"data-testid":"inline-labels--empty"},o.a.createElement("span",{className:"cf-label--name"},"Add a label"))}get availableLabels(){const{selectedLabels:e,labels:t}=this.props;return Object(l.differenceBy)(t,e,(e=>e.name))}};I=Object(n.a)([d.a,Object(n.b)("design:paramtypes",[Object])],I);const w={onCreateLabel:x.a};var j,N=Object(s.c)(null,w)(I),L=a(11);!function(e){e.Editable="editable",e.Readonly="readonly"}(j||(j={}));let B=class extends r.Component{constructor(){super(...arguments),this.handleLabelClick=e=>{const{onFilterChange:t}=this.props;t(e)},this.handleDeleteLabel=e=>{const{onRemoveLabel:t,selectedLabels:a}=this.props;t(a.find((t=>t.id===e)))}}render(){return o.a.createElement("div",{className:"inline-labels"},this.selectedLabels)}get selectedLabels(){const{selectedLabels:e,labels:t,onAddLabel:a}=this.props;return o.a.createElement("div",{className:"inline-labels--container"},this.isEditable&&o.a.createElement(N,{labels:t,selectedLabels:e,onAddLabel:a}),this.currentLabels)}get currentLabels(){const{selectedLabels:e}=this.props,t=this.isEditable?this.handleDeleteLabel:null;if(e.length)return e.map((e=>{const a=Object.assign({},e);return a.hasOwnProperty("properties")||(a.properties={color:"#FF0000",description:""}),o.a.createElement(i.Label,{id:a.id,key:a.id,name:a.name,color:a.properties.color,description:a.properties.description,onDelete:t,onClick:this.handleLabelClick.bind(this,a.name)})}))}get isEditable(){return this.props.editMode===j.Editable}};B.defaultProps={editMode:j.Editable},B=Object(n.a)([d.a],B);t.a=Object(s.c)(((e,t)=>({labels:Object(L.a)(e,D.ResourceType.Labels),selectedLabels:Object(L.g)(e,t.selectedLabelIDs)})))(B)},350:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(4),s=a(42),i=a(14),l=a(184),c=a(3),u=a(24),d=a(15),m=a(161);let p=class extends n.PureComponent{render(){const{activeTab:e,orgID:t,history:a}=this.props,n=e=>{a.push(`/orgs/${t}/load-data/${e}`)},o=[{text:"Sources",id:"sources",cloudExclude:!1,featureFlag:null},{text:"Buckets",id:"buckets",cloudExclude:!1,featureFlag:null},{text:"Telegraf",id:"telegrafs",cloudExclude:!1,featureFlag:null},{text:"Scrapers",id:"scrapers",cloudExclude:!0,featureFlag:null},{text:"API Tokens",id:"tokens",cloudExclude:!1,featureFlag:null}],s=o.find((t=>t.id===e)).text;return r.a.createElement(c.Tabs,{orientation:c.Orientation.Horizontal,size:c.ComponentSize.Large,dropdownBreakpoint:872,dropdownLabel:s},o.map((t=>{let a=r.a.createElement(c.Tabs.Tab,{testID:`${t.id}--tab`,key:t.id,text:t.text,id:t.id,onClick:n,active:t.id===e});return t.cloudExclude&&(a=r.a.createElement(m.a,{key:t.id},a)),t.featureFlag&&(a=r.a.createElement(u.a,{key:t.id,name:t.featureFlag},a)),a})))}};p=Object(i.a)([d.a],p);var h=Object(l.j)(p),b=a(9);const g=e=>("buckets"!==e||!Object(u.c)("fetchAllBuckets"))&&("tokens"!==e||!Object(u.c)("paginatedTokens")),y=Object(o.c)((e=>({orgID:Object(b.a)(e).id})));t.a=y((({activeTab:e,orgID:t,children:a})=>r.a.createElement(c.Page.Contents,{fullWidth:!1,scrollable:g(e),scrollbarSize:c.ComponentSize.Large,autoHideScrollbar:!0},r.a.createElement(c.Tabs.Container,{orientation:c.Orientation.Horizontal,stretchToFitHeight:!0},r.a.createElement(h,{activeTab:e,orgID:t}),r.a.createElement(s.a,null,r.a.createElement(c.Tabs.TabContents,null,a))))))},365:function(e,t,a){"use strict";var n=a(14),r=a(2),o=a.n(r),s=a(3),i=a(185),l=a(300),c=a(15);let u=class extends r.PureComponent{constructor(){super(...arguments),this.handleNameValidation=e=>this.props.onNameValidation(e)}render(){const{id:e,name:t,color:a,onSubmit:n,buttonText:r,description:i,onCloseModal:l,onInputChange:c,onLabelPropertyChange:u,onColorChange:d,isFormValid:m}=this.props;return o.a.createElement(s.Form,{onSubmit:n,testID:"label-overlay-form"},o.a.createElement(s.Overlay.Body,null,o.a.createElement(s.Grid,null,o.a.createElement(s.Grid.Row,null,o.a.createElement(s.Grid.Column,{widthXS:s.Columns.Twelve},o.a.createElement(s.Form.Element,{label:"Preview"},o.a.createElement(s.Form.Box,{className:"label-overlay--preview"},o.a.createElement(s.Label,{size:s.ComponentSize.Small,name:this.placeholderLabelName,description:i,color:this.validatedColor,id:e})))),o.a.createElement(s.Grid.Column,{widthSM:s.Columns.Twelve},o.a.createElement(s.Form.ValidationElement,{label:"Name",value:t,required:!0,validationFunc:this.handleNameValidation},(e=>o.a.createElement(s.Input,{type:s.InputType.Text,placeholder:"Name this Label",name:"name",autoFocus:!0,value:t,onChange:c,status:e,maxLength:50,testID:"create-label-form--name"})))),o.a.createElement(s.Grid.Column,{widthXS:s.Columns.Twelve},o.a.createElement(s.Form.Element,{label:"Description"},o.a.createElement(s.Input,{type:s.InputType.Text,placeholder:"Add a optional description",name:"description",value:i,onChange:u,testID:"create-label-form--description"}))),o.a.createElement(s.Grid.Column,{widthSM:s.Columns.Twelve},o.a.createElement(s.Form.Element,{label:"Color"},o.a.createElement(s.ColorPicker,{color:a,onChange:d})))))),o.a.createElement(s.Overlay.Footer,null,o.a.createElement(s.Button,{text:"Cancel",color:s.ComponentColor.Tertiary,onClick:l,titleText:"Cancel creation of Label and return to list",type:s.ButtonType.Button,testID:"create-label-form--cancel"}),o.a.createElement(s.Button,{text:r,color:s.ComponentColor.Success,type:s.ButtonType.Submit,testID:"create-label-form--submit",status:m?s.ComponentStatus.Default:s.ComponentStatus.Disabled})))}get placeholderLabelName(){const{name:e}=this.props;return e||"Name this Label"}get validatedColor(){const{color:e}=this.props;return Object(l.b)(e)?i.d:e}};u=Object(n.a)([c.a],u),t.a=u},386:function(e,t,a){"use strict";var n=a(2),r=a(4),o=a(6),s=a(36);class i extends n.PureComponent{componentDidMount(){o.f&&this.props.getReadWriteCardinalityLimits()}render(){return this.props.children}}const l={getReadWriteCardinalityLimits:s.i},c=Object(r.c)(null,l);t.a=c(i)},390:function(e,t,a){"use strict";var n=a(14),r=a(2),o=a.n(r),s=a(365),i=a(3),l=a(185),c=a(15),u=a(42);let d=class extends r.Component{constructor(e){super(e),this.handleSubmit=()=>{const{onCreateLabel:e,onDismiss:t}=this.props;try{e(this.state.label)}finally{t(),this.resetForm()}},this.handleInputChange=e=>{const{value:t,name:a}=e.target;this.setState((e=>({label:Object.assign(Object.assign({},e.label),{[a]:t})})))},this.handleLabelPropertyChange=e=>{const{value:t,name:a}=e.target;this.setState((e=>({label:Object.assign(Object.assign({},e.label),{properties:Object.assign(Object.assign({},e.label.properties),{[a]:t})})})))},this.handleColorChange=(e,t)=>{const a=Object.assign(Object.assign({},this.state.label.properties),{color:e}),n=Object.assign(Object.assign({},this.state.label),{properties:a});this.setState({label:n,colorStatus:t})},this.state={label:Object.assign(Object.assign({},l.a),{name:this.props.overrideDefaultName}),colorStatus:i.ComponentStatus.Default}}componentDidUpdate(e){if(e.overrideDefaultName!==this.props.overrideDefaultName&&!1===this.props.isVisible){const e=this.props.overrideDefaultName,t=Object.assign(Object.assign({},this.state.label),{name:e});this.setState({label:t})}}render(){const{isVisible:e,onDismiss:t,onNameValidation:a}=this.props,{label:n}=this.state;return o.a.createElement(i.Overlay,{visible:e},o.a.createElement(i.Overlay.Container,{maxWidth:400},o.a.createElement(i.Overlay.Header,{title:"Create Label",onDismiss:t}),o.a.createElement(u.a,null,o.a.createElement(s.a,{"data-testid":"create-label--overlay",id:n.id,name:n.name,onCloseModal:t,buttonText:"Create Label",onSubmit:this.handleSubmit,isFormValid:this.isFormValid,color:n.properties.color,onNameValidation:a,onInputChange:this.handleInputChange,onLabelPropertyChange:this.handleLabelPropertyChange,onColorChange:this.handleColorChange,description:n.properties.description}))))}get isFormValid(){const{label:e,colorStatus:t}=this.state,{onNameValidation:a}=this.props,n=null===a(e.name)&&!!e.name,r=t===i.ComponentStatus.Default||t===i.ComponentStatus.Valid;return n&&r}resetForm(){this.setState({label:l.a})}};d=Object(n.a)([c.a,Object(n.b)("design:paramtypes",[Object])],d),t.a=d},391:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(4),s=a(36),i=a(3),l=a(6);class c extends n.PureComponent{componentDidMount(){l.f&&this.props.getAssetLimits()}render(){const{status:e}=this.props;return l.f?r.a.createElement(i.SpinnerContainer,{loading:e,spinnerComponent:r.a.createElement(i.TechnoSpinner,null)},this.props.children):this.props.children}}const u={getAssetLimits:s.h},d=Object(o.c)((({cloud:{limits:{status:e}}})=>({status:e})),u);t.a=d(c)},442:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(3),s=a(50),i=a(6);t.a=({limitStatus:e,resourceName:t,className:a})=>i.f&&"exceeded"===e?r.a.createElement(o.GradientBox,{borderGradient:o.Gradients.MiyazakiSky,borderColor:o.InfluxColors.Grey5,className:a},r.a.createElement(o.Panel,{backgroundColor:o.InfluxColors.Grey5,className:"asset-alert"},r.a.createElement(o.Panel.Header,null,r.a.createElement(o.Heading,{element:o.HeadingElement.H4},"Need more ",t,"?")),r.a.createElement(o.Panel.Body,{className:"asset-alert--contents"},r.a.createElement(o.FlexBox,{justifyContent:o.JustifyContent.FlexEnd,alignItems:o.AlignItems.FlexEnd,stretchToFitHeight:!0},r.a.createElement(s.a,{buttonText:`Get more ${t}`,className:"upgrade-payg--button__asset-alert"}))))):null},50:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(4),s=a(19),i=a.n(s),l=a(184),c=a(3),u=a(77),d=a(29);t.a=({size:e=c.ComponentSize.Small,className:t,buttonText:a="Upgrade Now",metric:n})=>{const s=Object(o.e)(d.c),m=i()("upgrade-payg--button",{[`${t}`]:t}),p=Object(l.f)();return r.a.createElement(u.a,null,s&&r.a.createElement(c.Button,{icon:c.IconFont.CrownSolid_New,className:m,size:e,shape:c.ButtonShape.Default,onClick:()=>{n&&n(),p.push("/checkout")},text:a,style:{background:"linear-gradient(45deg, rgb(52, 187, 85) 0%, rgb(0, 163, 255) 100%)"},testID:"cloud-upgrade--button"}))}},53:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(2),r=a.n(n),o=a(4),s=a(19),i=a.n(s),l=a(3),c=a(50),u=a(34),d=a(29),m=a(7);const p=({type:e,link:t,className:a,limitText:n})=>r.a.createElement("div",{className:`${a} rate-alert--content__free`},r.a.createElement("span",null,"Oh no! You hit the"," ",r.a.createElement("a",{href:t,className:"rate-alert--docs-link",target:"_blank",rel:"noreferrer"},"series cardinality"===e?"series cardinality":"query write")," ","limit ",null!=n?n:""," and your data stopped writing. Don’t lose important metrics."),r.a.createElement(l.FlexBox,{justifyContent:l.JustifyContent.Center,className:"rate-alert--button"},r.a.createElement(c.a,{className:"upgrade-payg--button__rate-alert",metric:()=>Object(m.a)(`user.limits.${e}.upgrade`)})));t.b=({className:e})=>{const t=Object(o.d)(),a=Object(o.e)(d.c),n=i()("rate-alert--content",{[`${e}`]:e});return a?r.a.createElement(p,{type:"series cardinality",link:"https://docs.influxdata.com/influxdb/v2.0/write-data/best-practices/resolve-high-cardinality/",className:n}):r.a.createElement("div",{className:`${n} rate-alert--content__payg`},r.a.createElement("span",null,"Data in has stopped because you've hit the"," ",r.a.createElement("a",{href:"https://docs.influxdata.com/influxdb/v2.0/write-data/best-practices/resolve-high-cardinality/",className:"rate-alert--docs-link",target:"_blank",rel:"noreferrer"},"series cardinality")," ","limit. Let's get it flowing again."),r.a.createElement(l.FlexBox,{justifyContent:l.JustifyContent.Center,className:"rate-alert--button"},r.a.createElement(l.Button,{className:"rate-alert-overlay-button",color:l.ComponentColor.Primary,size:l.ComponentSize.Small,onClick:()=>{t(Object(u.d)("rate-limit",null,(()=>t(u.b))))},text:"Inspect Series Cardinality"})))}},545:function(e,t,a){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=a(2),l=a(61),c=[],u=[];function d(e){var t=e(),a={loading:!0,loaded:null,error:null};return a.promise=t.then((function(e){return a.loading=!1,a.loaded=e,e})).catch((function(e){throw a.loading=!1,a.error=e,e})),a}function m(e){var t={loading:!1,loaded:{},error:null},a=[];try{Object.keys(e).forEach((function(n){var r=d(e[n]);r.loading?t.loading=!0:(t.loaded[n]=r.loaded,t.error=r.error),a.push(r.promise),r.promise.then((function(e){t.loaded[n]=e})).catch((function(e){t.error=e}))}))}catch(e){t.error=e}return t.promise=Promise.all(a).then((function(e){return t.loading=!1,e})).catch((function(e){throw t.loading=!1,e})),t}function p(e,t){return i.createElement((a=e)&&a.__esModule?a.default:a,t);var a}function h(e,t){var d,m;if(!t.loading)throw new Error("react-loadable requires a `loading` component");var h=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:p,webpack:null,modules:null},t),b=null;function g(){return b||(b=e(h.loader)),b.promise}return c.push(g),"function"==typeof h.webpack&&u.push((function(){if(e=h.webpack,"object"===n(a.m)&&e().every((function(e){return void 0!==e&&void 0!==a.m[e]})))return g();var e})),m=d=function(t){function a(n){r(this,a);var s=o(this,t.call(this,n));return s.retry=function(){s.setState({error:null,loading:!0,timedOut:!1}),b=e(h.loader),s._loadModule()},g(),s.state={error:b.error,pastDelay:!1,timedOut:!1,loading:b.loading,loaded:b.loaded},s}return s(a,t),a.preload=function(){return g()},a.prototype.componentWillMount=function(){this._mounted=!0,this._loadModule()},a.prototype._loadModule=function(){var e=this;if(this.context.loadable&&Array.isArray(h.modules)&&h.modules.forEach((function(t){e.context.loadable.report(t)})),b.loading){"number"==typeof h.delay&&(0===h.delay?this.setState({pastDelay:!0}):this._delay=setTimeout((function(){e.setState({pastDelay:!0})}),h.delay)),"number"==typeof h.timeout&&(this._timeout=setTimeout((function(){e.setState({timedOut:!0})}),h.timeout));var t=function(){e._mounted&&(e.setState({error:b.error,loaded:b.loaded,loading:b.loading}),e._clearTimeouts())};b.promise.then((function(){t()})).catch((function(e){t()}))}},a.prototype.componentWillUnmount=function(){this._mounted=!1,this._clearTimeouts()},a.prototype._clearTimeouts=function(){clearTimeout(this._delay),clearTimeout(this._timeout)},a.prototype.render=function(){return this.state.loading||this.state.error?i.createElement(h.loading,{isLoading:this.state.loading,pastDelay:this.state.pastDelay,timedOut:this.state.timedOut,error:this.state.error,retry:this.retry}):this.state.loaded?h.render(this.state.loaded,this.props):null},a}(i.Component),d.contextTypes={loadable:l.shape({report:l.func.isRequired})},m}function b(e){return h(d,e)}b.Map=function(e){if("function"!=typeof e.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return h(m,e)};var g=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return s(t,e),t.prototype.getChildContext=function(){return{loadable:{report:this.props.report}}},t.prototype.render=function(){return i.Children.only(this.props.children)},t}(i.Component);function y(e){for(var t=[];e.length;){var a=e.pop();t.push(a())}return Promise.all(t).then((function(){if(e.length)return y(e)}))}g.propTypes={report:l.func.isRequired},g.childContextTypes={loadable:l.shape({report:l.func.isRequired}).isRequired},b.Capture=g,b.preloadAll=function(){return new Promise((function(e,t){y(c).then(e,t)}))},b.preloadReady=function(){return new Promise((function(e,t){y(u).then(e,e)}))},e.exports=b},593:function(e,t,a){"use strict";var n=a(14),r=a(2),o=a.n(r),s=a(3),i=a(15);let l=class extends r.PureComponent{render(){return o.a.createElement(s.Form,{onSubmit:this.props.onConfirm},o.a.createElement(s.Overlay.Body,null,o.a.createElement(s.FlexBox,{alignItems:s.AlignItems.Center,direction:s.FlexDirection.Column,margin:s.ComponentSize.Large},o.a.createElement(s.Alert,{color:s.ComponentColor.Danger,icon:s.IconFont.AlertTriangle},"Bad things could happen if you don't read this!"),o.a.createElement(s.Form.Element,{label:""},o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,this.props.message),o.a.createElement("ul",null,this.props.effectedItems.map((e=>o.a.createElement("li",{key:e},e)))))))),o.a.createElement(s.Overlay.Footer,null,o.a.createElement(s.Button,{color:s.ComponentColor.Danger,text:this.props.confirmButtonText,type:s.ButtonType.Submit,testID:"danger-confirmation--button"})))}};l=Object(n.a)([i.a],l);var c=l;let u=class extends r.PureComponent{constructor(){super(...arguments),this.state={isConfirmed:!1},this.handleCloseOverlay=()=>{this.props.onClose()},this.handleConfirm=()=>{this.setState({isConfirmed:!0})}}render(){return o.a.createElement(s.Overlay.Container,{maxWidth:400},o.a.createElement(s.Overlay.Header,{title:this.overlayTitle,onDismiss:this.handleCloseOverlay}),this.overlayContents)}get overlayTitle(){const{title:e}=this.props;return this.state.isConfirmed?e:"Are you sure?"}get overlayContents(){const{message:e,effectedItems:t,confirmButtonText:a}=this.props;return this.state.isConfirmed?this.props.children:o.a.createElement(c,{onConfirm:this.handleConfirm,message:e,effectedItems:t,confirmButtonText:a})}};u=Object(n.a)([i.a],u);t.a=u},63:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(9),r=a(124),o=a(6);const s=e=>{const t=Object(r.a)().getState(),a=Object(n.a)(t),s=o.f?"InfluxDB Cloud":"InfluxDB";return(a&&a.name?[...e,Object(n.a)(t).name,s]:[...e,s]).join(" | ")}},762:function(e,t,a){"use strict";var n=a(14),r=a(2),o=a.n(r),s=a(545),i=a.n(s),l=a(4),c=a(184),u=a(15),d=a(3),m=a(10),p=a(311),h=a(178),b=a(5),g=a(11),y=a(9),f=a(105);const S=o.a.createElement("div",null),E=i()({loader:()=>Promise.all([a.e(22),a.e(9),a.e(66)]).then(a.bind(null,1042)),loading:()=>S});let C=class extends r.PureComponent{constructor(){super(...arguments),this.handleDismiss=()=>{const{history:e,org:t}=this.props,{onClearDataLoaders:a,onClearSteps:n}=this.props;a(),n(),e.push(`/orgs/${t.id}/load-data/telegrafs`)}}componentDidMount(){const{bucket:e,buckets:t}=this.props;if(!e&&t&&t.length){const{orgID:e,name:a,id:n}=t[0];this.props.onSetBucketInfo(e,a,n)}this.props.onSetCurrentStepIndex(0)}render(){return o.a.createElement(d.Overlay,{visible:!0},o.a.createElement(d.Overlay.Container,{maxWidth:1200},o.a.createElement(d.Overlay.Header,{title:"Create a Telegraf Configuration",onDismiss:this.handleDismiss}),o.a.createElement(d.Overlay.Body,{className:"data-loading--overlay"},o.a.createElement(E,{stepProps:this.stepProps}))))}get stepProps(){const{notify:e,currentStepIndex:t,onDecrementCurrentStepIndex:a,onIncrementCurrentStepIndex:n}=this.props;return{currentStepIndex:t,onIncrementCurrentStepIndex:n,onDecrementCurrentStepIndex:a,notify:e,onExit:this.handleDismiss}}};C=Object(n.a)([u.a],C);const v={notify:m.c,onSetBucketInfo:p.d,onIncrementCurrentStepIndex:p.c,onDecrementCurrentStepIndex:p.b,onSetCurrentStepIndex:p.e,onClearDataLoaders:h.e,onClearSteps:p.a},D=Object(l.c)((e=>{const{dataLoading:{dataLoaders:{telegrafPlugins:t},steps:{currentStep:a,substep:n,bucket:r}},me:{name:o},telegrafEditor:s}=e,i=Object(g.a)(e,b.ResourceType.Buckets).filter((e=>!Object(f.e)(e.name))),l=Object(y.a)(e);return{telegrafPlugins:t,text:s.text,currentStepIndex:a,substep:n,username:o,bucket:r,buckets:i,org:l}}),v);t.a=D(Object(c.j)(C))},77:function(e,t,a){"use strict";var n=a(2),r=a(6);t.a=class extends n.PureComponent{render(){const{children:e}=this.props;return r.f?e:null}}},790:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(8),s=a(4),i=a(184),l=a(3),c=a(334);class u extends n.PureComponent{constructor(e){super(e),this.handleNameValidation=e=>e?null:"Name cannot be empty",this.handleUrlValidation=e=>{if(!e)return"Target URL cannot be empty";return e.startsWith("http://")||e.startsWith("https://")?null:'Target URL must begin with "http://" or "https://"'}}render(){const{onInputChange:e,url:t,name:a,onSelectBucket:n,buckets:o,selectedBucketID:s,onSubmit:i,onDismiss:u}=this.props;return r.a.createElement(l.Form,{onSubmit:i},r.a.createElement(l.Grid,null,r.a.createElement(l.Grid.Row,null,r.a.createElement(l.Grid.Column,{widthSM:l.Columns.Six},r.a.createElement(l.Form.ValidationElement,{label:"Name",validationFunc:this.handleNameValidation,value:a},(t=>r.a.createElement(l.Input,{value:a,name:"name",onChange:e,titleText:"Name",placeholder:"Name this scraper",autoFocus:!0,status:t})))),r.a.createElement(l.Grid.Column,{widthSM:l.Columns.Six},r.a.createElement(l.Form.Element,{label:"Bucket to store scraped metrics"},r.a.createElement(c.a,{selectedBucketID:s,buckets:o,onSelectBucket:n}))),r.a.createElement(l.Grid.Column,{widthSM:l.Columns.Twelve},r.a.createElement(l.Form.ValidationElement,{label:"Target URL",validationFunc:this.handleUrlValidation,value:t},(a=>r.a.createElement(l.Input,{value:t,name:"url",placeholder:"http://",onChange:e,titleText:"Target URL",status:a}))))),r.a.createElement(l.Grid.Row,null,r.a.createElement(l.Grid.Column,null,r.a.createElement(l.Form.Footer,null,r.a.createElement(l.Button,{text:"Cancel",color:l.ComponentColor.Tertiary,onClick:u,testID:"create-scraper--cancel"}),r.a.createElement(l.Button,{status:this.submitButtonStatus,text:"Create",color:l.ComponentColor.Success,testID:"create-scraper--submit",type:l.ButtonType.Submit}))))))}get submitButtonStatus(){const{name:e,url:t,selectedBucketID:a}=this.props;return t&&e&&a?l.ComponentStatus.Default:l.ComponentStatus.Disabled}}var d=u,m=a(206),p=a(5),h=a(11);class b extends n.PureComponent{constructor(e){super(e),this.handleInputChange=e=>{const t=e.target.value,a=e.target.name,n=Object.assign(Object.assign({},this.state.scraper),{[a]:t});this.setState({scraper:n})},this.handleSelectBucket=e=>{const{orgID:t,id:a}=e,n=Object.assign(Object.assign({},this.state.scraper),{orgID:t,bucketID:a});this.setState({scraper:n})},this.handleFormSubmit=e=>{const{onCreateScraper:t}=this.props,{scraper:a}=this.state;e.preventDefault(),t(a),this.onDismiss()},this.onDismiss=()=>{this.props.history.goBack()};const{match:{params:{bucketID:t,orgID:a}},buckets:n}=this.props,r=Object(o.get)(n,"2.id","");this.state={scraper:{name:"Name this Scraper",type:"prometheus",url:`${this.origin}/metrics`,orgID:a,bucketID:t||r}}}render(){const{scraper:e}=this.state,{buckets:t}=this.props;return r.a.createElement(l.Overlay,{visible:!0},r.a.createElement(l.Overlay.Container,{maxWidth:600},r.a.createElement(l.Overlay.Header,{title:"Create Scraper",onDismiss:this.onDismiss}),r.a.createElement(l.Overlay.Body,null,r.a.createElement("h5",{className:"wizard-step--sub-title"},"Scrapers collect data from multiple targets at regular intervals and to write to a bucket"),r.a.createElement(d,{buckets:t,url:e.url,name:e.name,selectedBucketID:e.bucketID,onInputChange:this.handleInputChange,onSelectBucket:this.handleSelectBucket,onSubmit:this.handleFormSubmit,onDismiss:this.onDismiss}))))}get origin(){return window.location.origin}}const g={onCreateScraper:m.a},y=Object(s.c)((e=>({buckets:Object(h.a)(e,p.ResourceType.Buckets)})),g);t.a=y(Object(i.j)(b))},89:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(4),s=a(19),i=a.n(s),l=a(3),c=a(50),u=a(43),d=a(6),m=a(53),p=a(10),h=a(13),b=a(29),g=a(34);a(100);const y={sendNotify:p.c,handleShowOverlay:g.d,handleDismissOverlay:g.b};t.a=Object(o.c)((e=>{const t=Object(u.j)(e);return{status:Object(u.k)(e),resources:t,showUpgrade:Object(b.c)(e)}}),y)((({status:e,alertOnly:t,className:a,resources:o,showUpgrade:s,sendNotify:u,handleShowOverlay:p,handleDismissOverlay:b})=>{const g=()=>{p("write-limit",null,b)};Object(n.useEffect)((()=>{d.f&&"exceeded"===e&&o.includes("write")&&u(s?Object(h.Ud)("",r.a.createElement(m.a,{type:"write",link:"https://docs.influxdata.com/influxdb/v2.0/write-data/best-practices/optimize-writes/",className:"flex-upgrade-content"})):Object(h.Ud)("Data in has stopped because you've hit the query write limit. Let's get it flowing again: ",r.a.createElement(l.Button,{className:"rate-alert-overlay-button",color:l.ComponentColor.Primary,size:l.ComponentSize.Small,onClick:g,text:"Request Write Limit Increase"})))}),[s,e]);const y=i()("rate-alert",{[`${a}`]:a});return d.f&&"exceeded"===e&&o.includes("cardinality")?r.a.createElement(l.FlexBox,{direction:l.FlexDirection.Column,alignItems:l.AlignItems.Center,margin:l.ComponentSize.Large,className:y},r.a.createElement(l.BannerPanel,{size:l.ComponentSize.ExtraSmall,gradient:l.Gradients.PolarExpress,icon:l.IconFont.Cloud,hideMobileIcon:!0,textColor:l.InfluxColors.Yeti},r.a.createElement(m.b,null))):d.f&&!t?r.a.createElement(c.a,{className:"upgrade-payg--button__header"}):null}))},978:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(3),s=a(76);t.a=()=>r.a.createElement(o.Panel,{gradient:o.Gradients.PolarExpress,border:!0},r.a.createElement(o.Panel.Header,null,r.a.createElement("h5",null,"What is a Bucket?")),r.a.createElement(o.Panel.Body,null,r.a.createElement("p",null,"A bucket is a named location where time series data is stored. All buckets have a ",r.a.createElement("b",null,"Retention Policy"),", a duration of time that each data point persists.",r.a.createElement("br",null),r.a.createElement("br",null),"Here's"," ",r.a.createElement("a",{href:`https://docs.influxdata.com/influxdb/${s.a}/write-data/`,target:"_blank",rel:"noreferrer"},"how to write data")," ","into your bucket.")))},979:function(e,t,a){"use strict";var n=a(2),r=a.n(n),o=a(184),s=a(4),i=a(8),l=a(3),c=a(313),u=a(103),d=a(10),m=a(12),p=a(221),h=a(13),b=a(6),g=a(7),y=a(247),f=a(105);let S=null,E=null;b.f&&(S=a(31).MeasurementSchema,E=a(31).MeasurementSchemaCreateRequest);const C={onUpdateBucket:u.j,getSchema:u.g,onAddMeasurementSchemaToBucket:u.b,updateSchema:u.k};Object(s.c)(null,C);t.a=Object(s.c)(null,C)(Object(o.j)((({onUpdateBucket:e,getSchema:t,onAddMeasurementSchemaToBucket:a,updateSchema:o,match:u,history:b})=>{const{orgID:S,bucketID:E}=u.params,C=Object(s.d)(),[v,D]=Object(n.useState)(null),[k,x]=Object(n.useState)(l.RemoteDataState.Loading),[O,T]=Object(n.useState)(p.a),[I,w]=Object(n.useState)("implicit"),[j,N]=Object(n.useState)(null),[L,B]=Object(n.useState)(null),[A,F]=Object(n.useState)(null),[R,P]=Object(n.useState)(!1),_=Object(n.useCallback)((()=>{b.push(`/orgs/${S}/load-data/buckets`)}),[S,b]);Object(n.useEffect)((()=>{(async()=>{const e=await m.getBucket({bucketID:E});if(200!==e.status)return C(Object(d.c)(Object(h.Kb)(E,e.data.message))),void _();if(D(e.data),w(e.data.schemaType),"explicit"===e.data.schemaType){const e=await t(E);N(e)}const a=Object(i.get)(e.data,"retentionRules",[]).find((e=>"expire"===e.type));a&&T(a.everySeconds),x(l.RemoteDataState.Done)})()}),[E,_,C]);const U=Object(i.get)(v,"retentionRules",[]).find((e=>"expire"===e.type)),$=U?U.everySeconds:O,M=U?"expire":null;return r.a.createElement(l.Overlay,{visible:!0},r.a.createElement(l.Overlay.Container,{maxWidth:Object(f.d)()},r.a.createElement(l.Overlay.Header,{title:"Edit Bucket",onDismiss:_}),r.a.createElement(l.SpinnerContainer,{spinnerComponent:r.a.createElement(l.TechnoSpinner,null),loading:k},r.a.createElement(l.Overlay.Body,null,r.a.createElement(c.a,{name:v?v.name:"",buttonText:"Save Changes",ruleType:M,onClose:_,onSubmit:t=>{t.preventDefault(),(Object(y.a)(L)&&Object(y.b)(A)||(P(!0),0))&&(e(v),(null==L?void 0:L.length)&&L.forEach((e=>{const t={columns:e.columns,name:e.name};Object(g.a)("bucket.schema.explicit.editing.uploadSchema"),a(v.id,v.orgID,v.name,t)})),(null==A?void 0:A.length)&&A.filter((e=>e.hasUpdate)).forEach((e=>{const{currentSchema:t,columns:a}=e,{bucketID:n,id:r,name:s,orgID:i}=t,l={columns:a};Object(g.a)("bucket.schema.explicit.editing.updateSchema"),o(n,r,s,l,i)})),_())},isEditing:!0,onChangeInput:e=>{const t=e.target.name,a=e.target.value;D(Object.assign(Object.assign({},v),{[t]:a}))},retentionSeconds:$,onChangeRuleType:e=>{D(e?Object.assign(Object.assign({},v),{retentionRules:[{type:"expire",everySeconds:O}]}):Object.assign(Object.assign({},v),{retentionRules:[]}))},onChangeRetentionRule:e=>{D(Object.assign(Object.assign({},v),{retentionRules:[{type:"expire",everySeconds:e}]})),T(e)},onClickRename:()=>{b.push(`/orgs/${S}/load-data/buckets/${E}/rename`)},onChangeSchemaType:e=>{D(Object.assign(Object.assign({},v),{schemaType:e}))},schemaType:I,measurementSchemaList:j,onAddNewMeasurementSchemas:(e,t)=>{B(e),t&&P(!1)},onUpdateMeasurementSchemas:e=>{F(e)},showSchemaValidation:R})))))})))}}]);
//# sourceMappingURL=41.7d4f98829c.js.map